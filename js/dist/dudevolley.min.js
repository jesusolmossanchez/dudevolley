function cricri(e){var t,i,o,a,s,r,l,n,h,d,y=function(e,t){return e<<t|e>>>32-t},p=function(e,t){var i,o,a,s,r;return a=2147483648&e,s=2147483648&t,i=1073741824&e,o=1073741824&t,r=(1073741823&e)+(1073741823&t),i&o?2147483648^r^a^s:i|o?1073741824&r?3221225472^r^a^s:1073741824^r^a^s:r^a^s},c=function(e,t,i){return e&t|~e&i},u=function(e,t,i){return e&i|t&~i},m=function(e,t,i){return e^t^i},v=function(e,t,i){return t^(e|~i)},b=function(e,t,i,o,a,s,r){return e=p(e,p(p(c(t,i,o),a),r)),p(y(e,s),t)},P=function(e,t,i,o,a,s,r){return e=p(e,p(p(u(t,i,o),a),r)),p(y(e,s),t)},g=function(e,t,i,o,a,s,r){return e=p(e,p(p(m(t,i,o),a),r)),p(y(e,s),t)},w=function(e,t,i,o,a,s,r){return e=p(e,p(p(v(t,i,o),a),r)),p(y(e,s),t)},_=function(e){for(var t,i=e.length,o=i+8,a=(o-o%64)/64,s=16*(a+1),r=new Array(s-1),l=0,n=0;n<i;)t=(n-n%4)/4,l=n%4*8,r[t]=r[t]|e.charCodeAt(n)<<l,n++;return t=(n-n%4)/4,l=n%4*8,r[t]=r[t]|128<<l,r[s-2]=i<<3,r[s-1]=i>>>29,r},f=function(e){var t,i,o="",a="";for(i=0;i<=3;i++)t=e>>>8*i&255,a="0"+t.toString(16),o+=a.substr(a.length-2,2);return o},x=[],A=7,D=12,R=17,C=22,U=5,E=9,T=14,k=20,O=4,G=11,j=16,I=23,q=6,z=10,M=15,K=21;for(e=utf8_encode(e),x=_(e),l=1732584193,n=4023233417,h=2562383102,d=271733878,t=x.length,i=0;i<t;i+=16)o=l,a=n,s=h,r=d,l=b(l,n,h,d,x[i+0],A,3614090360),d=b(d,l,n,h,x[i+1],D,3905402710),h=b(h,d,l,n,x[i+2],R,606105819),n=b(n,h,d,l,x[i+3],C,3250441966),l=b(l,n,h,d,x[i+4],A,4118548399),d=b(d,l,n,h,x[i+5],D,1200080426),h=b(h,d,l,n,x[i+6],R,2821735955),n=b(n,h,d,l,x[i+7],C,4249261313),l=b(l,n,h,d,x[i+8],A,1770035416),d=b(d,l,n,h,x[i+9],D,2336552879),h=b(h,d,l,n,x[i+10],R,4294925233),n=b(n,h,d,l,x[i+11],C,2304563134),l=b(l,n,h,d,x[i+12],A,1804603682),d=b(d,l,n,h,x[i+13],D,4254626195),h=b(h,d,l,n,x[i+14],R,2792965006),n=b(n,h,d,l,x[i+15],C,1236535329),l=P(l,n,h,d,x[i+1],U,4129170786),d=P(d,l,n,h,x[i+6],E,3225465664),h=P(h,d,l,n,x[i+11],T,643717713),n=P(n,h,d,l,x[i+0],k,3921069994),l=P(l,n,h,d,x[i+5],U,3593408605),d=P(d,l,n,h,x[i+10],E,38016083),h=P(h,d,l,n,x[i+15],T,3634488961),n=P(n,h,d,l,x[i+4],k,3889429448),l=P(l,n,h,d,x[i+9],U,568446438),d=P(d,l,n,h,x[i+14],E,3275163606),h=P(h,d,l,n,x[i+3],T,4107603335),n=P(n,h,d,l,x[i+8],k,1163531501),l=P(l,n,h,d,x[i+13],U,2850285829),d=P(d,l,n,h,x[i+2],E,4243563512),h=P(h,d,l,n,x[i+7],T,1735328473),n=P(n,h,d,l,x[i+12],k,2368359562),l=g(l,n,h,d,x[i+5],O,4294588738),d=g(d,l,n,h,x[i+8],G,2272392833),h=g(h,d,l,n,x[i+11],j,1839030562),n=g(n,h,d,l,x[i+14],I,4259657740),l=g(l,n,h,d,x[i+1],O,2763975236),d=g(d,l,n,h,x[i+4],G,1272893353),h=g(h,d,l,n,x[i+7],j,4139469664),n=g(n,h,d,l,x[i+10],I,3200236656),l=g(l,n,h,d,x[i+13],O,681279174),d=g(d,l,n,h,x[i+0],G,3936430074),h=g(h,d,l,n,x[i+3],j,3572445317),n=g(n,h,d,l,x[i+6],I,76029189),l=g(l,n,h,d,x[i+9],O,3654602809),d=g(d,l,n,h,x[i+12],G,3873151461),h=g(h,d,l,n,x[i+15],j,530742520),n=g(n,h,d,l,x[i+2],I,3299628645),l=w(l,n,h,d,x[i+0],q,4096336452),d=w(d,l,n,h,x[i+7],z,1126891415),h=w(h,d,l,n,x[i+14],M,2878612391),n=w(n,h,d,l,x[i+5],K,4237533241),l=w(l,n,h,d,x[i+12],q,1700485571),d=w(d,l,n,h,x[i+3],z,2399980690),h=w(h,d,l,n,x[i+10],M,4293915773),n=w(n,h,d,l,x[i+1],K,2240044497),l=w(l,n,h,d,x[i+8],q,1873313359),d=w(d,l,n,h,x[i+15],z,4264355552),h=w(h,d,l,n,x[i+6],M,2734768916),n=w(n,h,d,l,x[i+13],K,1309151649),l=w(l,n,h,d,x[i+4],q,4149444226),d=w(d,l,n,h,x[i+11],z,3174756917),h=w(h,d,l,n,x[i+2],M,718787259),n=w(n,h,d,l,x[i+9],K,3951481745),l=p(l,o),n=p(n,a),h=p(h,s),d=p(d,r);var B=f(l)+f(n)+f(h)+f(d);return B.toLowerCase()}function utf8_encode(e){if(null===e||"undefined"==typeof e)return"";var t,i,o=e+"",a="",s=0;t=i=0,s=o.length;for(var r=0;r<s;r++){var l=o.charCodeAt(r),n=null;if(l<128)i++;else if(l>127&&l<2048)n=String.fromCharCode(l>>6|192,63&l|128);else if(55296!=(63488&l))n=String.fromCharCode(l>>12|224,l>>6&63|128,63&l|128);else{if(55296!=(64512&l))throw new RangeError("Unmatched trail surrogate at "+r);var h=o.charCodeAt(++r);if(56320!=(64512&h))throw new RangeError("Unmatched lead surrogate at "+(r-1));l=((1023&l)<<10)+(1023&h)+65536,n=String.fromCharCode(l>>18|240,l>>12&63|128,l>>6&63|128,63&l|128)}null!==n&&(i>t&&(a+=o.slice(t,i)),a+=n,t=i=r+1)}return i>t&&(a+=o.slice(t,s)),a}var DudeVolley={};DudeVolley.Boot=function(e){},DudeVolley.Boot.prototype={init:function(){window.twitter_img?ga("send","pageview","/Boot_tw"):ga("send","pageview","/Boot"),this.stage.disableVisibilityChange=!0,this.game.device.desktop?(this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.maxHeight=$(window).height(),this.scale.maxWidth=800*this.scale.maxHeight/685):(window.onresize=this.rescale.bind(this),this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,this.scale.maxHeight=$(window).height(),this.scale.maxWidth=800*$(window).height()/685)},preload:function(){this.load.image("titulo","assets/dude_volley_title.png"),this.load.image("preloaderBar","assets/cargando_dude.png")},create:function(){this.state.start("Preloader")},rescale:function(){this.scale.setShowAll(),this.scale.maxHeight=$(window).height(),this.scale.maxWidth=800*this.scale.maxHeight/685}},DudeVolley.Preloader=function(e){this.background=null,this.preloadBar=null,this.ready=!1},DudeVolley.Preloader.prototype={preload:function(){var e=this.cache.getImage("titulo");this.background=this.add.sprite(this.world.centerX-e.width/2,120,"titulo"),this.preloadBar=this.add.sprite(240,400,"preloaderBar"),this.load.setPreloadSprite(this.preloadBar),this.load.spritesheet("menu_1player","assets/menu_1player.png",400,270),this.load.image("titulo_estirado","assets/dude_volley.png"),this.load.image("sky","assets/new_campo2.png"),this.load.image("ground","assets/platform2.png"),this.load.image("red","assets/new_red.png"),this.load.image("pelota","assets/new_pelota.png"),this.load.image("sombra","assets/sombra.png"),this.load.image("explota","assets/explota.png"),this.load.image("game_over_back","assets/game_over_back.png"),this.load.image("volver_a_jugar","assets/volver_a_jugar.png"),this.load.image("seleccionar","assets/seleccionar.png"),this.load.spritesheet("player1","assets/default_player.png",80,110),this.load.spritesheet("player1_chick","assets/default_player_chick.png",80,110),this.load.spritesheet("cpu","cpu_player/cpu_player.png",80,110),this.load.spritesheet("cpu_chick","cpu_player/cpu_player_chick.png",80,110),this.load.image("volver","assets/volver.png"),this.load.image("tip1","assets/muevete.png"),this.load.image("tip2","assets/salta_arriba.png"),this.load.image("tip3","assets/gorrino.png"),this.load.image("tip4","assets/mate.png"),this.game.device.desktop?this.load.spritesheet("menu_principal","assets/menu_sprite_new.png",400,400):(this.load.spritesheet("menu_principal","assets/menu_sprite_movil_new.png",400,400),this.load.image("joy_back","assets/joy_back2.png"),this.load.image("joy_front","assets/joy_front.png"),this.load.image("pika","assets/pika.png")),this.load.audio("musica",["assets/musica.mp3","assets/musica.ogg"])},create:function(){this.preloadBar.cropEnabled=!1,this.ready=!0,this.game.device.desktop?this.state.start("MainMenu"):this.state.start("MovilMainMenu")},update:function(){}},DudeVolley.MainMenu=function(e){this.background=null,this.preloadBar=null,this.ready=!1,this.UN_JUGADOR=0,this.DOS_JUGADORES=1,this.JUGAR_ONLINE=2,this.JUGAR_TWITTER=3,this.ENTRENAMIENTO=4,this.MEJORES_PUNTUACIONES=5,this.CREDITOS=6},DudeVolley.MainMenu.prototype={create:function(){ga("send","pageview","/MainMenu");var e=this.cache.getImage("titulo_estirado");this.titulo_estirado=this.add.sprite(this.world.centerX-e.width/2,20,"titulo_estirado"),this.menu_principal=this.add.sprite(this.world.centerX,300,"menu_principal"),this.menu_principal.anchor.setTo(.5,.5),this.menu_principal.frame=0,this.cursors=this.input.keyboard.createCursorKeys(),L=this.input.keyboard.addKey(Phaser.Keyboard.L),Z=this.input.keyboard.addKey(Phaser.Keyboard.Z),ENTER=this.input.keyboard.addKey(Phaser.Keyboard.ENTER),this.cambia_menu=this.time.now+200,this.notocas=this.time.now+1e4,this.game.best_player_got=!1,this.music=this.add.audio("musica");var t=this;$(window).on("DOMMouseScroll mousewheel",function(e){var i;i=0===e.originalEvent.detail?e.originalEvent.wheelDelta*-1:9*e.originalEvent.detail,Math.abs(i)<20||(i>0?(t.mueveabajo=!1,t.cambia_menu=t.time.now+200,t.menu_principal.frame<5?t.menu_principal.frame++:t.menu_principal.frame=0):(t.muevearriba=!1,t.cambia_menu=t.time.now+200,0==t.menu_principal.frame?t.menu_principal.frame=6:t.menu_principal.frame--))})},get_creditos:function(){this.game.creditos_got||(this.menu_principal.visible=!1,this.game.creditos_got=!0,eljuego=this,$("#contiene_creditos").show())},cierra_creditos:function(){this.game.creditos_got=!1,$("#contiene_creditos").hide(),eljuego.menu_principal.visible=!0},get_best_players:function(e){this.game.best_player_got||(this.game.best_player_got=!0,eljuego=this,$.ajax({url:"best_players.php",type:"GET",contentType:!1,cache:!1,processData:!1,success:function(e){$("#mandapuntos").hide(),$("#contiene_mandapuntos").show(),$("#contiene_clasificacion").html("<dl id='titulo_nivel'></dl>"),acho=JSON.parse(e),$.each(acho,function(){var e=Number(this.tiempo),t=Math.floor(e/1e3),i=Math.floor(t/60),t=t-60*i;t<10&&(t="0"+t);var o=i+":"+t;$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<dl><dt>"+this.nombre+"</dt><dd>"+this.puntuacion+"("+o+")</dd></dl>")}),$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<div style='text-align:center;'><input id='volver_menu' onclick='eljuego.cierra_best();' type='submit' value='volver' /></div>"),eljuego.menu_principal.visible=!1,$("#contiene_mandapuntos").css("top","120px")}}))},cierra_best:function(){this.game.best_player_got=!1,$("#contiene_mandapuntos").slideDown(),$("#contiene_clasificacion").html(""),$("#contiene_mandapuntos").css("top","4vw"),this.menu_principal.visible=!0},update:function(){if(window.twitter_img&&this.state.start("Menu1Player"),window.te_reto&&this.state.start("GameMultiplayer"),window.modo)switch(window.modo){case"entrenamiento":this.state.start("Entrenamiento");break;case"multiplayer":this.state.start("GameMultiplayer");break;case"2jugadores":this.state.start("GameTwoPlayer");break;case"1jugador":this.state.start("Menu1Player");break;case"party":this.state.start("GamePartyMode")}this.time.now>this.notocas&&this.state.start("Demo");var e=this;$(document).keyup(function(t){e.notocas=e.time.now+1e4}),(this.cursors.down.isDown||this.mueveabajo)&&this.cambia_menu<this.time.now&&(this.mueveabajo=!1,this.cambia_menu=this.time.now+200,this.menu_principal.frame<5?this.menu_principal.frame++:this.menu_principal.frame=0),(this.cursors.up.isDown||this.muevearriba)&&this.cambia_menu<this.time.now&&(this.muevearriba=!1,this.cambia_menu=this.time.now+200,0==this.menu_principal.frame?this.menu_principal.frame=6:this.menu_principal.frame--),(L.isDown||Z.isDown||ENTER.isDown)&&this.empieza()},empieza:function(){switch(this.menu_principal.frame){case this.UN_JUGADOR:this.state.start("Menu1Player");break;case this.DOS_JUGADORES:this.state.start("GameTwoPlayer");break;case this.JUGAR_ONLINE:this.state.start("GameMultiplayer");break;case this.JUGAR_TWITTER:window.location.replace("twitter");break;case this.ENTRENAMIENTO:this.state.start("Entrenamiento");break;case this.MEJORES_PUNTUACIONES:this.get_best_players();break;case this.CREDITOS:this.get_creditos()}}},DudeVolley.Menu1Player=function(e){this.background=null,this.preloadBar=null,this.ready=!1},DudeVolley.Menu1Player.prototype={create:function(){window.twitter_img?ga("send","pageview","/Menu1Player_tw"):ga("send","pageview","/Menu1Player");var e=this.cache.getImage("titulo_estirado");this.titulo_estirado=this.add.sprite(this.world.centerX-e.width/2,20,"titulo_estirado"),this.menu_1player=this.add.sprite(this.world.centerX,300,"menu_1player"),this.menu_1player.anchor.setTo(.5,.5),this.menu_1player.frame=0,this.cursors=this.input.keyboard.createCursorKeys(),L=this.input.keyboard.addKey(Phaser.Keyboard.L),Z=this.input.keyboard.addKey(Phaser.Keyboard.Z),ENTER=this.input.keyboard.addKey(Phaser.Keyboard.ENTER),this.cambia_menu=this.time.now+200,this.movil_jugar=this.add.sprite(this.world.centerX,this.world.height-100,"seleccionar"),this.movil_jugar.anchor.setTo(.5,.5),this.movil_jugar.inputEnabled=!0,this.movil_jugar.input.sprite.events.onInputDown.add(this.empieza_movil,this)},beginSwipe:function(){startX=this.game.input.worldX,startY=this.game.input.worldY,this.game.input.onDown.remove(this.beginSwipe),this.game.input.onUp.add(this.endSwipe,this)},endSwipe:function(){endX=this.game.input.worldX,endY=this.game.input.worldY;var e=(startX-endX,startY-endY);Math.abs(e)>60&&(e>0?this.muevearriba=!0:this.mueveabajo=!0),this.game.input.onDown.add(this.beginSwipe),this.game.input.onUp.remove(this.endSwipe)},update:function(){if(window.twitter_img&&this.juega(window.twitter_img),this.game.input.onDown.add(this.beginSwipe,this),(this.cursors.down.isDown||this.mueveabajo)&&this.cambia_menu<this.time.now&&(this.mueveabajo=!1,this.cambia_menu=this.time.now+200,this.menu_1player.frame<1?this.menu_1player.frame++:this.menu_1player.frame=0),(this.cursors.up.isDown||this.muevearriba)&&this.cambia_menu<this.time.now&&(this.muevearriba=!1,this.cambia_menu=this.time.now+200,0==this.menu_1player.frame?this.menu_1player.frame=1:this.menu_1player.frame--),L.isDown||Z.isDown||ENTER.isDown)switch(this.menu_1player.frame){case 0:this.game.normalplayer=!0,this.juega(!1);break;case 1:this.empieza()}},empieza:function(e){this.menu_1player.destroy(),this.game.normalplayer=!1,yomismo=this,$("#subefoto").show(),$("#fileToUpload").change(function(){$("#inputsubefoto").submit()}),window.sube=0,window.sube2=0,$("#subefoto").on("submit",function(e){e.preventDefault(),window.sube<1&&(window.sube=1,$.ajax({url:"subeajax1.php",type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,success:function(e){yomismo.movil_jugar.visible=!1,$("#subefoto").hide(),$("#contiene_foto_subida").show(),lo_que_habia=$("#contiene_foto_subida").html(),$("#contiene_foto_subida").html(lo_que_habia+e),$("#sube_img_cortada").on("submit",function(e){e.preventDefault(),window.sube2<1&&(window.sube2=1,$.ajax({url:"subeajax2.php",type:"POST",data:new FormData(this),contentType:!1,cache:!1,processData:!1,success:function(e){yomismo.juega(e)}}))})}}))})},juega:function(e){$("#contiene_foto_subida").css("display","none"),this.game.ruta_jugador=e,this.state.start("PreOnePlayer")},empieza_movil:function(){switch(this.menu_1player.frame){case 0:this.juega(!1),this.game.normalplayer=!0;break;case 1:this.empieza()}}},DudeVolley.MovilMainMenu=function(e){this.background=null,this.preloadBar=null,this.ready=!1,this.UN_JUGADOR=0,this.JUGAR_ONLINE=1,this.JUGAR_TWITTER=2,this.ENTRENAMIENTO=3,this.MEJORES_PUNTUACIONES=4,this.CREDITOS=5},DudeVolley.MovilMainMenu.prototype={create:function(){ga("send","pageview","/MovilMainMenu");var e=this.cache.getImage("titulo_estirado");this.titulo_estirado=this.add.sprite(this.world.centerX-e.width/2,20,"titulo_estirado"),this.menu_principal=this.add.sprite(this.world.centerX,300,"menu_principal"),this.menu_principal.anchor.setTo(.5,.5),this.menu_principal.frame=0,this.cambia_menu=this.time.now+200,this.notocas=this.time.now+1e4,this.game.best_player_got=!1,this.movil_jugar=this.add.sprite(this.world.centerX,this.world.height-100,"seleccionar"),this.movil_jugar.anchor.setTo(.5,.5),this.movil_jugar.inputEnabled=!0,this.movil_jugar.input.sprite.events.onInputDown.add(this.empieza,this)},get_creditos:function(){this.game.creditos_got||(this.menu_principal.visible=!1,this.movil_jugar.visible=!1,this.game.creditos_got=!0,eljuego=this,$("#contiene_creditos").show())},cierra_creditos:function(){this.game.creditos_got=!1,$("#contiene_creditos").hide(),this.menu_principal.visible=!0,this.movil_jugar.visible=!0},get_best_players:function(e){this.game.best_player_got||(this.game.best_player_got=!0,self=this,$.ajax({url:"best_players.php",type:"GET",contentType:!1,cache:!1,processData:!1,success:function(e){$("#mandapuntos").hide(),$("#contiene_mandapuntos").show(),$("#contiene_clasificacion").html("<dl id='titulo_nivel'></dl>"),acho=JSON.parse(e),$.each(acho,function(){var e=Number(this.tiempo),t=Math.floor(e/1e3),i=Math.floor(t/60),t=t-60*i;t<10&&(t="0"+t);var o=i+":"+t;$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<dl><dt>"+this.nombre+"</dt><dd>"+this.puntuacion+"("+o+")</dd></dl>")}),$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<div style='text-align:center;'><input id='volver_menu' onclick='self.cierra_best();' type='submit' value='volver' /></div>"),self.menu_principal.visible=!1,self.movil_jugar.visible=!1,$("#contiene_mandapuntos").css("top","120px")}}))},cierra_best:function(){this.game.best_player_got=!1,$("#contiene_mandapuntos").slideDown(),$("#contiene_clasificacion").html(""),$("#contiene_mandapuntos").css("top","4vw"),this.menu_principal.visible=!0,this.movil_jugar.visible=!0},beginSwipe:function(){this.notocas=this.time.now+1e4,startX=this.game.input.worldX,startY=this.game.input.worldY,this.game.input.onDown.remove(this.beginSwipe),this.game.input.onUp.add(this.endSwipe,this)},endSwipe:function(){endX=this.game.input.worldX,endY=this.game.input.worldY;var e=(startX-endX,startY-endY);Math.abs(e)>60&&(e>0?this.mueveabajo=!0:this.muevearriba=!0),this.game.input.onDown.add(this.beginSwipe),this.game.input.onUp.remove(this.endSwipe)},update:function(){this.game.input.onDown.add(this.beginSwipe,this);var e=this;document.addEventListener("touchend",function(t){e.notocas=e.time.now+1e4},!1),this.time.now>this.notocas&&this.state.start("Demo"),this.mueveabajo&&this.cambia_menu<this.time.now&&(this.mueveabajo=!1,this.cambia_menu=this.time.now+200,this.menu_principal.frame<4?this.menu_principal.frame++:this.menu_principal.frame=0),this.muevearriba&&this.cambia_menu<this.time.now&&(this.muevearriba=!1,this.cambia_menu=this.time.now+200,0==this.menu_principal.frame?this.menu_principal.frame=4:this.menu_principal.frame--)},empieza:function(){switch(this.menu_principal.frame){case this.UN_JUGADOR:this.state.start("Menu1Player");break;case this.JUGAR_ONLINE:this.state.start("GameMultiplayer");break;case this.ENTRENAMIENTO:this.state.start("Entrenamiento");break;case this.JUGAR_TWITTER:window.location.replace("twitter");break;case this.MEJORES_PUNTUACIONES:this.get_best_players();break;case this.CREDITOS:this.get_creditos()}}},DudeVolley.PreOnePlayer=function(e){},DudeVolley.PreOnePlayer.prototype={preload:function(){this.game.normalplayer?(this.load.spritesheet("player1","assets/default_player.png",80,110),this.load.spritesheet("player1_chick","assets/default_player_chick.png",80,110)):this.load.spritesheet("player1",this.game.ruta_jugador,80,110)},init:function(){},create:function(){},update:function(){this.empieza()},empieza:function(e){this.state.start("GameOnePlayer")}},DudeVolley.GameOnePlayer=function(e){},DudeVolley.GameOnePlayer.prototype={init:function(){window.twitter_img?ga("send","pageview","/GameOnePlayer_tw"):ga("send","pageview","/GameOnePlayer"),this.physics.startSystem(Phaser.Physics.ARCADE),this.add.sprite(0,0,"sky"),platforms=this.add.group(),platforms.enableBody=!0;var e=platforms.create(0,this.world.height-134,"ground");e.scale.setTo(2,2),e.body.immovable=!0;var t=platforms.create(390,this.world.height-320,"red");t.body.immovable=!0,this.pelota=this.add.sprite(32,0,"pelota"),this.pelota.anchor.setTo(.5,.5),this.physics.arcade.enable(this.pelota),this.pelota.body.bounce.y=.9,this.pelota.body.bounce.x=.9,this.pelota.body.gravity.y=900,this.pelota.body.collideWorldBounds=!0,this.pelota.body.mass=.15,this.sombra1=this.add.sprite(32,this.world.height-200,"sombra"),this.sombra_pelota=this.add.sprite(32,this.world.height-200,"sombra"),this.sombra2=this.add.sprite(this.world.width-52,this.world.height-200,"sombra"),this.sombra1.alpha=.5,this.sombra2.alpha=.5,this.sombra_pelota.alpha=.2,1==window.tipo_jugador_1?Player1=new Player(this.game,"player1",(!1),(!1),1):2==window.tipo_jugador_1&&(Player1=new Player(this.game,"player1_chick",(!1),(!1),2)),1==window.tipo_jugador_2?PlayerCPU=new Player(this.game,"cpu",(!1),(!1),1):2==window.tipo_jugador_2&&(PlayerCPU=new Player(this.game,"cpu_chick",(!1),(!1),2)),this.game.level=2,this.game.hasperdio=!1,this.game.unplayer=!0,this.game.empieza=this.time.now,this.scoreText1=this.add.text(16,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"}),this.scoreText2=this.add.text(this.world.width-16,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"}),this.scoreText2.anchor.x=1,this.game.puntosPlayer1=0,this.game.puntosPlayer2=0,this.esperaCollide1=this.time.now,this.esperaCollide2=this.time.now,this.cincoMovimientos=0,this.dondeVaCpu=-100,this.game.device.desktop||(this.joy=new Joystick(this.game,120,this.world.height-100),this.movil_accion=this.add.sprite(this.world.width-100,this.world.height-100,"pika"),this.movil_accion.anchor.setTo(.5,.5),this.movil_accion.inputEnabled=!0,this.movil_accion.input.sprite.events.onInputDown.add(this.entra_movil_accion,this),this.movil_accion.input.sprite.events.onInputUp.add(this.sal_movil_accion,this)),cursors=this.input.keyboard.createCursorKeys(),ARRIBA=cursors.up,ABAJO=cursors.down,IZQUIERDA=cursors.left,DERECHA=cursors.right,SUPERPIKA=this.input.keyboard.addKey(Phaser.Keyboard.L),SUPERPIKA2=this.input.keyboard.addKey(Phaser.Keyboard.Z),PAUSE=this.input.keyboard.addKey(Phaser.Keyboard.ESC),this.enpausa=!1,window.onkeydown=function(){27==this.PAUSE.game.input.keyboard.event.keyCode&&(this.PAUSE.game.paused=!this.PAUSE.game.paused)}},entra_movil_accion:function(){this.click_accion=!0},sal_movil_accion:function(){this.click_accion=!1},update:function(){this.sombra2.position.set(Player1.sprite.body.position.x,this.world.height-144),this.sombra1.position.set(PlayerCPU.sprite.body.position.x,this.world.height-144),this.sombra_pelota.position.set(this.pelota.body.position.x,this.world.height-144),this.time.now>this.esperaCollide1&&this.physics.arcade.collide(this.pelota,Player1.sprite,function(){Player1.rebote(this)},null,this),this.time.now>this.esperaCollide2&&this.physics.arcade.collide(this.pelota,PlayerCPU.sprite,function(){PlayerCPU.rebote_CPU(this)},null,this),this.physics.arcade.collide(this.pelota,platforms),this.physics.arcade.collide(Player1.sprite,platforms),this.physics.arcade.collide(PlayerCPU.sprite,platforms),this.punto?(this.pelota.angle+=this.pelota.body.velocity.x/20,this.time.now>this.enunratico&&(this.punto=!1,this.explota.kill(),this.empieza(this.quienEmpieza)),Player1.sprite.body.velocity.x=0):(this.time.now>PlayerCPU.sprite.tiempoGorrino-100&&(PlayerCPU.sprite.body.velocity.x=0,PlayerCPU.sprite.body.rotation=0,PlayerCPU.sprite.haceGorrino=!1),Player1.sprite.body.y>this.world.height-250&&(Player1.sprite.salta=!1),PlayerCPU.sprite.body.y>this.world.height-250&&(PlayerCPU.sprite.salta=!1),this.pelota.angle+=this.pelota.body.velocity.x/20,this.time.now>Player1.sprite.tiempoGorrino-100&&(Player1.sprite.body.rotation=0,Player1.sprite.haceGorrino=!1,Player1.sprite.body.velocity.x=0),this.time.now>Player1.sprite.tiempoGorrino+100&&(Player1.sprite.paraGorrino=!1),this.time.now>PlayerCPU.sprite.tiempoGorrino-100&&(PlayerCPU.sprite.body.rotation=0,PlayerCPU.sprite.haceGorrino=!1),this.time.now>PlayerCPU.sprite.tiempoGorrino+100&&(PlayerCPU.sprite.paraGorrino=!1),(SUPERPIKA.isDown||SUPERPIKA2.isDown||this.click_accion)&&(Player1.sprite.body.touching.down||Player1.sprite.paraGorrino?Player1.sprite.paraGorrino||(Player1.sprite.haceGorrino=!0,Player1.sprite.tiempoGorrino=this.time.now+400):(Player1.sprite.enfadao=!0,Player1.sprite.animations.play("senfada"),Player1.sprite.enfadaoTime=this.time.now+500)),this.game.device.desktop?(IZQUIERDA.isDown?Player1.mueve("izquierda"):DERECHA.isDown?Player1.mueve("derecha"):Player1.mueve("parao"),ARRIBA.isDown&&Player1.mueve("arriba"),ABAJO.isDown):(this.joy.update(),this.joy.holder.events.onMove.add(this.procesaDragg,this),this.joy.holder.events.onUp.add(this.paraDragg,this)),PlayerCPU.procesa_movimientos_maquina(this),this.pelota.body.position.y>500&&this.procesapunto())},procesapunto:function(){this.esperaCollide1=this.time.now,Player1.sprite.enfadaoTime=this.time.now,PlayerCPU.sprite.enfadaoTime=this.time.now,this.explota=this.add.sprite(this.pelota.body.position.x,this.pelota.body.position.y+5,"explota"),Player1.sprite.body.velocity.y=.2*Player1.sprite.body.velocity.y,PlayerCPU.sprite.body.velocity.y=.2*PlayerCPU.sprite.body.velocity.y,Player1.sprite.body.velocity.x=.2*Player1.sprite.body.velocity.x,PlayerCPU.sprite.body.velocity.x=.2*PlayerCPU.sprite.body.velocity.x,this.pelota.body.velocity.y=.2*this.pelota.body.velocity.y,this.pelota.body.velocity.x=.2*this.pelota.body.velocity.x,this.pelota.body.gravity.y=200,this.pelota.body.position.x>390?(this.game.puntosPlayer1++,this.scoreText1.text=this.game.puntosPlayer1,this.enunratico=this.time.now+2500,this.quienEmpieza="uno",this.punto=!0,this.game.puntosPlayer1>=10&&(this.game.ganador=Player1.sprite,this.game.perdedor=PlayerCPU.sprite,this.state.start("GameOver"))):(this.game.puntosPlayer2++,this.scoreText2.text=this.game.puntosPlayer2,this.enunratico=this.time.now+2500,this.quienEmpieza="dos",this.punto=!0,this.game.puntosPlayer2>=10&&(this.game.hasperdio=!0,this.game.perdedor=Player1.sprite,this.game.ganador=PlayerCPU.sprite,this.state.start("GameOver")))},empieza:function(e){this.dondecae=this.world.width-1,this.pelota.body.gravity.y=900,Player1.sprite.body.position.x=32,Player1.sprite.body.position.y=this.world.height-250,Player1.sprite.body.velocity.x=0,Player1.sprite.body.velocity.y=0,PlayerCPU.sprite.body.position.x=this.world.width-32,PlayerCPU.sprite.body.position.y=this.world.height-250,PlayerCPU.sprite.body.velocity.x=0,PlayerCPU.sprite.body.velocity.y=0,this.pelota.body.position.y=0,this.pelota.body.velocity.x=0,"uno"==e?(PlayerCPU.sprite.body.position.x=this.world.width-150,this.pelota.body.position.x=10):this.pelota.body.position.x=this.world.width-32},quitGame:function(e){this.state.start("MainMenu")},paraDragg:function(e){Player1.mueve("parao"),this.mueveizquierda=!1,this.muevederecha=!1,this.muevearriba=!1,this.mueveabajo=!1},procesaDragg:function(e,t,i){var o=180*i/Math.PI;return t<30?(Player1.mueve("parao"),this.mueveizquierda=!1,this.muevederecha=!1,this.muevearriba=!1,void(this.mueveabajo=!1)):(o>-90&&o<90&&(Player1.mueve("derecha"),this.mueveizquierda=!1,this.muevederecha=!0),(o>90||o<-90)&&(Player1.mueve("izquierda"),this.mueveizquierda=!0,this.muevederecha=!1),o>-135&&o<-45?(Player1.mueve("arriba"),this.muevearriba=!0):this.muevearriba=!1,void(o<135&&o>45?this.mueveabajo=!0:this.mueveabajo=!1))},rebote:function(){if(this.punto)return this.esperaCollide1=this.time.now+2500,!0;this.esperaCollide1=this.time.now+100,this.pelota.body.gravity.y=900,this.pelota.body.velocity.y=-600;var e=this.pelota.body.position.x,t=Player1.sprite.body.position.x,i=e-t,o=(this.pelota.body.velocity.x,this.pelota.body.velocity.y);this.pelota.body.velocity.x=3*i,this.time.now<Player1.sprite.enfadaoTime&&Player1.sprite.enfadao&&((DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&!ABAJO.isDown||(this.muevederecha||this.mueveizquierda)&&!this.muevearriba&&!this.mueveabajo?(this.pelota.body.velocity.y=.3*o,this.pelota.body.velocity.x=800,this.pelota.body.gravity.y=1500):DERECHA.isDown&&ARRIBA.isDown&&!ABAJO.isDown||this.muevederecha&&this.muevearriba&&!this.mueveabajo?(this.pelota.body.velocity.y=-700,this.pelota.body.velocity.x=800,this.pelota.body.gravity.y=1400):IZQUIERDA.isDown&&ARRIBA.isDown&&!ABAJO.isDown||this.mueveizquierda&&this.muevearriba&&!this.mueveabajo?(this.pelota.body.velocity.y=-700,this.pelota.body.velocity.x=-800,this.pelota.body.gravity.y=1400):(DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&ABAJO.isDown||(this.mueveizquierda||this.muevederecha)&&!this.muevearriba&&this.mueveabajo?(this.pelota.body.velocity.y=800,this.pelota.body.velocity.x=1e3,this.pelota.body.gravity.y=1400):!DERECHA.isDown&&!IZQUIERDA.isDown&&!ARRIBA.isDown&&ABAJO.isDown||!this.muevederecha&&!this.mueveizquierda&&!this.muevearriba&&this.mueveabajo?(this.pelota.body.velocity.y=800,this.pelota.body.velocity.x=300,this.pelota.body.gravity.y=1400):DERECHA.isDown||IZQUIERDA.isDown||ARRIBA.isDown||ABAJO.isDown||this.muevederecha||this.mueveizquierda||this.muevearriba||this.mueveabajo?(DERECHA.isDown||IZQUIERDA.isDown||!ARRIBA.isDown||ABAJO.isDown)&&(this.muevederecha||this.mueveizquierda||!this.muevearriba||this.mueveabajo)||(this.pelota.body.velocity.y=-1e3,this.pelota.body.velocity.x=300,this.pelota.body.gravity.y=1400):(this.pelota.body.velocity.y=-100,this.pelota.body.velocity.x=300,this.pelota.body.gravity.y=1400))},rebote_CPU:function(){if(this.punto)return this.esperaCollide2=this.time.now+2500,!0;this.esperaCollide2=this.time.now+100,0==this.game.level?(this.factorFacilidadX=.6,this.factorFacilidadY=.8):1==this.game.level?(this.factorFacilidadX=.9,this.factorFacilidadY=.9):2==this.game.level&&(this.factorFacilidadX=1,this.factorFacilidadY=1),this.pelota.body.gravity.y=900,this.pelota.body.velocity.y=-600;var e=this.pelota.body.position.x,t=PlayerCPU.sprite.body.position.x,i=e-t,o=(this.pelota.body.velocity.x,this.pelota.body.velocity.y);this.pelota.body.velocity.x=3*i,this.time.now<PlayerCPU.sprite.enfadaoTime&&PlayerCPU.sprite.enfadao&&(quehago=Math.floor(4*Math.random()),PlayerCPU.sprite.position.x>450&3==quehago&&(quehago=Math.floor(3*Math.random())),0==quehago?(this.pelota.body.velocity.y=.3*o,this.pelota.body.velocity.x=-800*this.factorFacilidadX,this.pelota.body.gravity.y=1500*this.factorFacilidadX):1==quehago?(this.pelota.body.velocity.y=-700*this.factorFacilidadY,this.pelota.body.velocity.x=800*this.factorFacilidadX,this.pelota.body.gravity.y=1400*this.factorFacilidadX):2==quehago?(this.pelota.body.velocity.y=-700*this.factorFacilidadY,this.pelota.body.velocity.x=-800*this.factorFacilidadX,this.pelota.body.gravity.y=1400*this.factorFacilidadX):3==quehago&&(this.pelota.body.velocity.y=800*this.factorFacilidadY,this.pelota.body.velocity.x=-1e3*this.factorFacilidadX,this.pelota.body.gravity.y=1400*this.factorFacilidadX))},procesa_movimientos_maquina:function(){x=this.pelota.body.position.x,y=515,H=(this.pelota.body.position.y-(this.world.height-185))*-1,Vx=this.pelota.body.velocity.x,Vy=this.pelota.body.velocity.y,0==this.game.level?(cuantocorre=135,cuantocorreGorrino=300,cuantoTiempoEnfadao=700,cuantoTiempoGorrino=300):1==this.game.level?(cuantocorre=125,cuantocorreGorrino=300,cuantoTiempoEnfadao=700,cuantoTiempoGorrino=300):2==this.game.level&&(cuantocorre=135,cuantocorreGorrino=300,cuantoTiempoEnfadao=800,cuantoTiempoGorrino=300),Vy<0&&(Vy*=-1,this.dondecae=x+Vx/this.pelota.body.gravity.y*Math.sqrt(2*this.pelota.body.gravity.y*H+Vx),this.dondecae>800?this.dondecae=800-(this.dondecae-800):this.dondecae<0&&(this.dondecae=-this.dondecae)),this.dondecae>360?(this.dondecae<PlayerCPU.sprite.position.x&&!PlayerCPU.sprite.haceGorrino&&PlayerCPU.sprite.position.x>PlayerCPU.sprite.limiteIzquierda?(PlayerCPU.sprite.body.velocity.x=-cuantocorre,this.time.now>PlayerCPU.sprite.enfadaoTime&&0!=PlayerCPU.sprite.body.velocity.x&&PlayerCPU.sprite.animations.play("semueve")):PlayerCPU.sprite.haceGorrino||(PlayerCPU.sprite.body.velocity.x=cuantocorre,this.time.now>PlayerCPU.sprite.enfadaoTime&&0!=PlayerCPU.sprite.body.velocity.x&&PlayerCPU.sprite.animations.play("semueve")),this.dondecae-PlayerCPU.sprite.position.x<70&&x>440&&PlayerCPU.sprite.position.y>this.world.height-200&&Vx<120&&Vx>-120&&this.pelota.position.y<this.world.height-300&&(PlayerCPU.sprite.body.velocity.y=-550,PlayerCPU.sprite.enfadao=!0,PlayerCPU.sprite.animations.play("senfada"),PlayerCPU.sprite.enfadaoTime=this.time.now+cuantoTiempoEnfadao)):(this.cincoMovimientos=++this.cincoMovimientos%60,this.cincoMovimientos>58?(ale=Math.random(),ale>.9&&PlayerCPU.sprite.position.y>this.world.height-200&&(PlayerCPU.sprite.body.velocity.y=-550),ale>.5&&PlayerCPU.sprite.body.position.x>440?PlayerCPU.sprite.body.velocity.x=-100:ale<.5&&(PlayerCPU.sprite.body.velocity.x=100),
this.dondeVaCpu=PlayerCPU.sprite.body.velocity.x):PlayerCPU.sprite.body.velocity.x=this.dondeVaCpu,PlayerCPU.sprite.animations.play("semueve")),0!=this.game.level&&H<200&&PlayerCPU.sprite.body.touching.down&&(this.dondecae<PlayerCPU.sprite.position.x&&PlayerCPU.sprite.position.x>PlayerCPU.sprite.limiteIzquierda?PlayerCPU.sprite.position.x-this.dondecae>130&&x>440&&!PlayerCPU.sprite.haceGorrino&&(PlayerCPU.sprite.body.velocity.x=-cuantocorreGorrino,PlayerCPU.sprite.body.rotation=-90,PlayerCPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino,PlayerCPU.sprite.haceGorrino=!0):this.dondecae-PlayerCPU.sprite.position.x>130&&x>440&&!PlayerCPU.sprite.haceGorrino&&(PlayerCPU.sprite.body.velocity.x=cuantocorreGorrino,PlayerCPU.sprite.body.rotation=90,PlayerCPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino,PlayerCPU.sprite.haceGorrino=!0))}},DudeVolley.Entrenamiento=function(e){},DudeVolley.Entrenamiento.prototype={preload:function(){this.tip1=this.add.sprite(20,20,"tip1"),this.tip2=this.add.sprite(220,20,"tip2"),this.tip3=this.add.sprite(420,20,"tip3"),this.tip4=this.add.sprite(620,20,"tip4"),this.tip1.alpha=.5,this.tip2.alpha=.5,this.tip3.alpha=.5,this.tip4.alpha=.5,this.volver=this.add.sprite(650,220,"volver"),this.volver.inputEnabled=!0,this.volver.input.sprite.events.onInputDown.add(this.volver_a_jugar,this)},init:function(){ga("send","pageview","/Entrenamiento"),this.physics.startSystem(Phaser.Physics.ARCADE),this.add.sprite(0,0,"sky"),platforms=this.add.group(),platforms.enableBody=!0;var e=platforms.create(0,this.world.height-134,"ground");e.scale.setTo(2,2),e.body.immovable=!0,this.pelota=this.add.sprite(32,0,"pelota"),this.pelota.anchor.setTo(.5,.5),this.physics.arcade.enable(this.pelota),this.pelota.body.gravity.y=0,this.pelota.body.bounce.y=.9,this.pelota.body.bounce.x=.9,this.pelota.body.gravity.y=900,this.pelota.body.collideWorldBounds=!0,this.pelota.body.mass=.15,Player1=new Player(this.game,"player1",(!0)),this.game.level=2,this.esperaCollide1=this.time.now,this.game.device.desktop||(this.joy=new Joystick(this.game,120,this.world.height-100),this.movil_accion=this.add.sprite(this.world.width-100,this.world.height-100,"pika"),this.movil_accion.anchor.setTo(.5,.5),this.movil_accion.inputEnabled=!0,this.movil_accion.input.sprite.events.onInputDown.add(this.entra_movil_accion,this),this.movil_accion.input.sprite.events.onInputUp.add(this.sal_movil_accion,this)),this.mueveizquierda=!1,this.muevederecha=!1,this.muevearriba=!1,this.mueveabajo=!1,cursors=this.input.keyboard.createCursorKeys(),PAUSE=this.input.keyboard.addKey(Phaser.Keyboard.ESC),ARRIBA=cursors.up,ABAJO=cursors.down,IZQUIERDA=cursors.left,DERECHA=cursors.right,SUPERPIKA=this.input.keyboard.addKey(Phaser.Keyboard.L),SUPERPIKA2=this.input.keyboard.addKey(Phaser.Keyboard.Z),this.enpausa=!1,window.onkeydown=function(){27==this.PAUSE.game.input.keyboard.event.keyCode&&(this.PAUSE.game.paused=!this.PAUSE.game.paused)}},entra_movil_accion:function(){this.click_accion=!0},sal_movil_accion:function(){this.click_accion=!1},update:function(){Player1.sprite.body.y>this.world.height-250&&(Player1.sprite.salta=!1,this.tip2.alpha=.5,this.tip4.alpha=.5),this.time.now>this.esperaCollide1&&this.physics.arcade.collide(this.pelota,Player1.sprite,this.rebote,null,this),this.physics.arcade.collide(this.pelota,platforms),this.physics.arcade.collide(Player1.sprite,platforms),this.pelota.angle+=this.pelota.body.velocity.x/20,this.time.now>Player1.sprite.tiempoGorrino-100&&(Player1.sprite.body.rotation=0,Player1.sprite.haceGorrino=!1,this.tip3.alpha=.5),this.time.now>Player1.sprite.tiempoGorrino+100&&(Player1.sprite.paraGorrino=!1),this.time.now>Player1.sprite.enfadaoTime&&(Player1.sprite.enfadao=!1),(SUPERPIKA.isDown||SUPERPIKA2.isDown||this.click_accion)&&(Player1.sprite.body.touching.down||Player1.sprite.paraGorrino?Player1.sprite.paraGorrino||(Player1.sprite.haceGorrino=!0,Player1.sprite.tiempoGorrino=this.time.now+400):(Player1.sprite.enfadao=!0,Player1.sprite.animations.play("senfada"),Player1.sprite.enfadaoTime=this.time.now+500)),this.game.device.desktop?(IZQUIERDA.isDown?(Player1.mueve("izquierda"),this.time.now<Player1.sprite.tiempoGorrino-100?this.tip3.alpha=1:this.tip1.alpha=1):DERECHA.isDown?(Player1.mueve("derecha"),this.time.now<Player1.sprite.tiempoGorrino-100?this.tip3.alpha=1:this.tip1.alpha=1):(Player1.mueve("parao"),this.tip1.alpha=.5),ARRIBA.isDown&&(Player1.mueve("arriba"),this.tip2.alpha=1),ABAJO.isDown):(this.joy.update(),this.joy.holder.events.onMove.add(this.procesaDragg,this),this.joy.holder.events.onUp.add(this.paraDragg,this))},quitGame:function(e){this.state.start("MainMenu")},paraDragg:function(e){Player1.mueve("parao"),this.mueveizquierda=!1,this.muevederecha=!1,this.muevearriba=!1,this.mueveabajo=!1},procesaDragg:function(e,t,i){var o=180*i/Math.PI;return t<30?(Player1.mueve("parao"),this.mueveizquierda=!1,this.muevederecha=!1,this.muevearriba=!1,void(this.mueveabajo=!1)):(o>-90&&o<90&&(Player1.mueve("derecha"),this.mueveizquierda=!1,this.muevederecha=!0),(o>90||o<-90)&&(Player1.mueve("izquierda"),this.mueveizquierda=!0,this.muevederecha=!1),o>-135&&o<-45?(Player1.mueve("arriba"),this.muevearriba=!0):this.muevearriba=!1,void(o<135&&o>45?this.mueveabajo=!0:this.mueveabajo=!1))},rebote:function(){if(this.pelota.body.position.y>Player1.sprite.body.position.y+60)return!0;this.esperaCollide1=this.time.now+100,this.pelota.body.position.y>450&&(this.pelota.body.velocity.y=-600),this.pelota.body.gravity.y=900,this.pelota.body.velocity.y=-600;var e=this.pelota.body.position.x,t=Player1.sprite.body.position.x,i=e-t,o=(this.pelota.body.velocity.x,this.pelota.body.velocity.y);this.pelota.body.velocity.x=3*i,this.time.now<Player1.sprite.enfadaoTime&&Player1.sprite.enfadao&&(this.tip4.alpha=1,(DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&!ABAJO.isDown||(this.muevederecha||this.mueveizquierda)&&!this.muevearriba&&!this.mueveabajo?(this.pelota.body.velocity.y=.3*o,this.pelota.body.velocity.x=800,this.pelota.body.gravity.y=1500):DERECHA.isDown&&ARRIBA.isDown&&!ABAJO.isDown||this.muevederecha&&this.muevearriba&&!this.mueveabajo?(this.pelota.body.velocity.y=-800,this.pelota.body.velocity.x=800,this.pelota.body.gravity.y=1400):IZQUIERDA.isDown&&ARRIBA.isDown&&!ABAJO.isDown||this.mueveizquierda&&this.muevearriba&&!this.mueveabajo?(this.pelota.body.velocity.y=-800,this.pelota.body.velocity.x=-800,this.pelota.body.gravity.y=1400):(DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&ABAJO.isDown||(this.mueveizquierda||this.muevederecha)&&!this.muevearriba&&this.mueveabajo?(this.pelota.body.velocity.y=800,this.pelota.body.velocity.x=1e3,this.pelota.body.gravity.y=1400):!DERECHA.isDown&&!IZQUIERDA.isDown&&!ARRIBA.isDown&&ABAJO.isDown||!this.muevederecha&&!this.mueveizquierda&&!this.muevearriba&&this.mueveabajo?(this.pelota.body.velocity.y=800,this.pelota.body.velocity.x=300,this.pelota.body.gravity.y=1400):DERECHA.isDown||IZQUIERDA.isDown||ARRIBA.isDown||ABAJO.isDown||this.muevederecha||this.mueveizquierda||this.muevearriba||this.mueveabajo?(DERECHA.isDown||IZQUIERDA.isDown||!ARRIBA.isDown||ABAJO.isDown)&&(this.muevederecha||this.mueveizquierda||!this.muevearriba||this.mueveabajo)||(this.pelota.body.velocity.y=-1e3,this.pelota.body.velocity.x=300,this.pelota.body.gravity.y=1400):(this.pelota.body.velocity.y=-100,this.pelota.body.velocity.x=300,this.pelota.body.gravity.y=1400))},volver_a_jugar:function(){location.reload()}},DudeVolley.GameTwoPlayer=function(e){},DudeVolley.GameTwoPlayer.prototype={init:function(){ga("send","pageview","/GameTwoPlayer"),this.physics.startSystem(Phaser.Physics.ARCADE),this.add.sprite(0,0,"sky"),platforms=this.add.group(),platforms.enableBody=!0;var e=platforms.create(0,this.world.height-134,"ground");e.scale.setTo(2,2),e.body.immovable=!0;var t=platforms.create(390,this.world.height-320,"red");t.body.immovable=!0,this.pelota=this.add.sprite(32,0,"pelota"),this.pelota.anchor.setTo(.5,.5),this.physics.arcade.enable(this.pelota),this.pelota.body.gravity.y=0,this.pelota.body.bounce.y=.9,this.pelota.body.bounce.x=.9,this.pelota.body.gravity.y=900,this.pelota.body.collideWorldBounds=!0,this.pelota.body.mass=.15,this.sombra1=this.add.sprite(32,this.world.height-200,"sombra"),this.sombra_pelota=this.add.sprite(32,this.world.height-200,"sombra"),this.sombra2=this.add.sprite(this.world.width-52,this.world.height-200,"sombra"),this.sombra1.alpha=.5,this.sombra2.alpha=.5,this.sombra_pelota.alpha=.2,Player1=new Player(this.game,"player1"),Player2=new Player(this.game,"cpu"),this.game.level=2,this.enunratico=this.time.now,this.quienEmpieza="uno",this.punto=!1,this.scoreText1=this.add.text(16,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"}),this.scoreText2=this.add.text(this.world.width-16,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"}),this.scoreText2.anchor.x=1,this.game.puntosPlayer1=0,this.game.puntosPlayer2=0,this.esperaCollide1=this.time.now,this.esperaCollide2=this.time.now,cursors=this.input.keyboard.createCursorKeys(),PAUSE=this.input.keyboard.addKey(Phaser.Keyboard.ESC),ARRIBA2=cursors.up,ABAJO2=cursors.down,IZQUIERDA2=cursors.left,DERECHA2=cursors.right,SUPERPIKA2=this.input.keyboard.addKey(Phaser.Keyboard.L),ARRIBA=this.input.keyboard.addKey(Phaser.Keyboard.R),ABAJO=this.input.keyboard.addKey(Phaser.Keyboard.F),IZQUIERDA=this.input.keyboard.addKey(Phaser.Keyboard.D),DERECHA=this.input.keyboard.addKey(Phaser.Keyboard.G),SUPERPIKA=this.input.keyboard.addKey(Phaser.Keyboard.Z),this.enpausa=!1,window.onkeydown=function(){27==this.PAUSE.game.input.keyboard.event.keyCode&&(this.PAUSE.game.paused=!this.PAUSE.game.paused)}},update:function(){this.sombra2.position.set(Player1.sprite.body.position.x,this.world.height-144),this.sombra1.position.set(Player2.sprite.body.position.x,this.world.height-144),this.sombra_pelota.position.set(this.pelota.body.position.x,this.world.height-144),this.time.now>this.esperaCollide1&&this.physics.arcade.collide(this.pelota,Player1.sprite,this.rebote,null,this),this.time.now>this.esperaCollide2&&this.physics.arcade.collide(this.pelota,Player2.sprite,this.rebote2,null,this),this.physics.arcade.collide(this.pelota,platforms),this.physics.arcade.collide(Player1.sprite,platforms),this.physics.arcade.collide(Player2.sprite,platforms),this.pelota.angle+=this.pelota.body.velocity.x/20,this.punto?this.time.now>this.enunratico&&(this.punto=!1,this.explota.kill(),this.empieza(this.quienEmpieza)):(Player1.sprite.body.y>this.world.height-250&&(Player1.sprite.salta=!1),Player2.sprite.body.y>this.world.height-250&&(Player2.sprite.salta=!1),this.time.now>Player1.sprite.tiempoGorrino-100&&(Player1.sprite.body.rotation=0,Player1.sprite.haceGorrino=!1),this.time.now>Player1.sprite.tiempoGorrino+100&&(Player1.sprite.paraGorrino=!1),this.time.now>Player2.sprite.tiempoGorrino-100&&(Player2.sprite.body.rotation=0,Player2.sprite.haceGorrino=!1),this.time.now>Player2.sprite.tiempoGorrino+100&&(Player2.sprite.paraGorrino=!1),SUPERPIKA.isDown&&(Player1.sprite.body.touching.down||Player1.sprite.paraGorrino?Player1.sprite.paraGorrino||(Player1.sprite.haceGorrino=!0,Player1.sprite.tiempoGorrino=this.time.now+400):(Player1.sprite.enfadao=!0,Player1.sprite.animations.play("senfada"),Player1.sprite.enfadaoTime=this.time.now+500)),SUPERPIKA2.isDown&&(Player2.sprite.body.touching.down||Player2.sprite.paraGorrino?Player2.sprite.paraGorrino||(Player2.sprite.haceGorrino=!0,Player2.sprite.tiempoGorrino=this.time.now+400):(Player2.sprite.enfadao=!0,Player2.sprite.animations.play("senfada"),Player2.sprite.enfadaoTime=this.time.now+500)),IZQUIERDA.isDown?Player1.mueve("izquierda"):DERECHA.isDown?Player1.mueve("derecha"):Player1.mueve("parao"),ARRIBA.isDown&&Player1.mueve("arriba"),ABAJO.isDown,IZQUIERDA2.isDown?Player2.mueve("izquierda"):DERECHA2.isDown?Player2.mueve("derecha"):Player2.mueve("parao"),ARRIBA2.isDown&&Player2.mueve("arriba"),ABAJO2.isDown,this.pelota.body.position.y>500&&this.procesapunto())},quitGame:function(e){this.state.start("MainMenu")},procesapunto:function(){this.explota=this.add.sprite(this.pelota.body.position.x,this.pelota.body.position.y+5,"explota"),Player1.sprite.body.velocity.y=.2*Player1.sprite.body.velocity.y,Player2.sprite.body.velocity.y=.2*Player2.sprite.body.velocity.y,Player1.sprite.body.velocity.x=.2*Player1.sprite.body.velocity.x,Player2.sprite.body.velocity.x=.2*Player2.sprite.body.velocity.x,this.pelota.body.velocity.y=.2*this.pelota.body.velocity.y,this.pelota.body.velocity.x=.2*this.pelota.body.velocity.x,this.pelota.body.gravity.y=200,this.pelota.body.position.x>390?(this.game.puntosPlayer1++,this.scoreText1.text=this.game.puntosPlayer1,this.game.puntosPlayer1>=15&&(this.game.ganador=Player1.sprite,this.game.perdedor=Player2.sprite,this.state.start("GameOver")),this.enunratico=this.time.now+2500,this.quienEmpieza="uno",this.punto=!0):(this.game.puntosPlayer2++,this.scoreText2.text=this.game.puntosPlayer2,this.game.puntosPlayer2>=15&&(this.game.ganador=Player2.sprite,this.game.perdedor=Player1.sprite,this.state.start("GameOver"),this.game.hasperdio=!0),this.enunratico=this.time.now+2500,this.quienEmpieza="dos",this.punto=!0)},empieza:function(e){this.pelota.body.gravity.y=900,Player1.sprite.body.position.x=32,Player1.sprite.body.position.y=this.world.height-250,Player1.sprite.body.velocity.x=0,Player1.sprite.body.velocity.y=0,Player2.sprite.body.position.x=this.world.width-32,Player2.sprite.body.position.y=this.world.height-250,Player2.sprite.body.velocity.x=0,Player2.sprite.body.velocity.y=0,this.pelota.body.position.y=0,this.pelota.body.velocity.x=0,"uno"==e?this.pelota.body.position.x=32:this.pelota.body.position.x=this.world.width-32},rebote:function(){if(this.punto)return!0;this.esperaCollide1=this.time.now+100,this.pelota.body.gravity.y=900,this.pelota.body.velocity.y=-600;var e=this.pelota.body.position.x,t=Player1.sprite.body.position.x,i=e-t,o=(this.pelota.body.velocity.x,this.pelota.body.velocity.y);this.pelota.body.velocity.x=3*i,this.time.now<Player1.sprite.enfadaoTime&&Player1.sprite.enfadao&&(!DERECHA.isDown&&!IZQUIERDA.isDown||ARRIBA.isDown||ABAJO.isDown?DERECHA.isDown&&ARRIBA.isDown&&!ABAJO.isDown?(this.pelota.body.velocity.y=-800,this.pelota.body.velocity.x=800,this.pelota.body.gravity.y=1400):IZQUIERDA.isDown&&ARRIBA.isDown&&!ABAJO.isDown?(this.pelota.body.velocity.y=-800,this.pelota.body.velocity.x=-800,this.pelota.body.gravity.y=1400):(DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&ABAJO.isDown?(this.pelota.body.velocity.y=800,this.pelota.body.velocity.x=1e3,this.pelota.body.gravity.y=1400):DERECHA.isDown||IZQUIERDA.isDown||ARRIBA.isDown||!ABAJO.isDown?DERECHA.isDown||IZQUIERDA.isDown||ARRIBA.isDown||ABAJO.isDown?DERECHA.isDown||IZQUIERDA.isDown||!ARRIBA.isDown||ABAJO.isDown||(this.pelota.body.velocity.y=-1e3,this.pelota.body.velocity.x=300,this.pelota.body.gravity.y=1400):(this.pelota.body.velocity.y=-100,this.pelota.body.velocity.x=300,this.pelota.body.gravity.y=1400):(this.pelota.body.velocity.y=800,this.pelota.body.velocity.x=300,this.pelota.body.gravity.y=1400):(this.pelota.body.velocity.y=.3*o,this.pelota.body.velocity.x=800,this.pelota.body.gravity.y=1500))},rebote2:function(){return!!this.punto||(this.esperaCollide2=this.time.now+100,this.pelota.body.gravity.y=900,this.pelota.body.velocity.y=-600,posXPelota=this.pelota.body.position.x,posXPlayer=Player2.sprite.body.position.x,diferencia=posXPelota-posXPlayer,VxPelota=this.pelota.body.velocity.x,VyPelota=this.pelota.body.velocity.y,this.pelota.body.velocity.x=3*diferencia,void(this.time.now<Player2.sprite.enfadaoTime&&Player2.sprite.enfadao&&(!DERECHA2.isDown&&!IZQUIERDA2.isDown||ARRIBA2.isDown||ABAJO2.isDown?DERECHA2.isDown&&ARRIBA2.isDown&&!ABAJO2.isDown?(this.pelota.body.velocity.y=-800,this.pelota.body.velocity.x=-800,this.pelota.body.gravity.y=1400):IZQUIERDA2.isDown&&ARRIBA2.isDown&&!ABAJO2.isDown?(this.pelota.body.velocity.y=-800,this.pelota.body.velocity.x=800,this.pelota.body.gravity.y=1400):(DERECHA2.isDown||IZQUIERDA2.isDown)&&!ARRIBA2.isDown&&ABAJO2.isDown?(this.pelota.body.velocity.y=800,this.pelota.body.velocity.x=-1e3,this.pelota.body.gravity.y=1400):DERECHA2.isDown||IZQUIERDA2.isDown||ARRIBA2.isDown||!ABAJO2.isDown?DERECHA2.isDown||IZQUIERDA2.isDown||ARRIBA2.isDown||ABAJO2.isDown?DERECHA2.isDown||IZQUIERDA2.isDown||!ARRIBA2.isDown||ABAJO2.isDown||(this.pelota.body.velocity.y=-1e3,this.pelota.body.velocity.x=-300,this.pelota.body.gravity.y=1400):(this.pelota.body.velocity.y=-100,this.pelota.body.velocity.x=-300,this.pelota.body.gravity.y=1400):(this.pelota.body.velocity.y=800,this.pelota.body.velocity.x=-300,this.pelota.body.gravity.y=1400):(this.pelota.body.velocity.y=.3*VyPelota,this.pelota.body.velocity.x=-800,this.pelota.body.gravity.y=1500))))}},DudeVolley.Demo=function(e){},DudeVolley.Demo.prototype={init:function(){ga("send","pageview","/Demo"),this.physics.startSystem(Phaser.Physics.ARCADE),this.add.sprite(0,0,"sky"),platforms=this.add.group(),platforms.enableBody=!0;var e=platforms.create(0,this.world.height-134,"ground");e.scale.setTo(2,2),e.body.immovable=!0;var t=platforms.create(390,this.world.height-320,"red");t.body.immovable=!0,this.pelota=this.add.sprite(32,0,"pelota"),this.pelota.anchor.setTo(.5,.5),this.physics.arcade.enable(this.pelota),this.pelota.body.gravity.y=0,this.pelota.body.bounce.y=.9,this.pelota.body.bounce.x=.9,this.pelota.body.gravity.y=900,this.pelota.body.collideWorldBounds=!0,this.pelota.body.mass=.3,this.sombra1=this.add.sprite(32,this.world.height-200,"sombra"),this.sombra_pelota=this.add.sprite(32,this.world.height-200,"sombra"),this.sombra2=this.add.sprite(this.world.width-52,this.world.height-200,"sombra"),this.sombra1.alpha=.5,this.sombra2.alpha=.5,this.sombra_pelota.alpha=.2,Player1CPU=new Player(this.game,"player1",(!1)),Player2CPU=new Player(this.game,"cpu",(!1)),this.game.level=2,this.scoreText1=this.add.text(16,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"}),this.scoreText2=this.add.text(this.world.width-38,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"}),this.game.puntosPlayer1=0,this.game.puntosPlayer2=0,this.cincoMovimientos1=0,this.cincoMovimientos2=0,this.dondeVaCpu1=100,this.dondeVaCpu2=-100,cursors=this.input.keyboard.createCursorKeys(),ARRIBA=cursors.up,ABAJO=cursors.down,IZQUIERDA=cursors.left,DERECHA=cursors.right,SUPERPIKA=this.input.keyboard.addKey(Phaser.Keyboard.L),SUPERPIKA2=this.input.keyboard.addKey(Phaser.Keyboard.Z),PAUSE=this.input.keyboard.addKey(Phaser.Keyboard.ESC),this.enpausa=!1,window.onkeydown=function(){27==this.PAUSE.game.input.keyboard.event.keyCode&&(this.PAUSE.game.paused=!this.PAUSE.game.paused)}},update:function(){$(document).keyup(function(e){location.reload()}),$(document).click(function(e){location.reload()}),document.addEventListener("touchend",function(e){location.reload()},!1),this.time.now>Player1CPU.sprite.tiempoGorrino-100&&(Player1CPU.sprite.body.velocity.x=0,Player1CPU.sprite.body.rotation=0,Player1CPU.sprite.haceGorrino=!1),this.time.now>Player2CPU.sprite.tiempoGorrino-100&&(Player2CPU.sprite.body.velocity.x=0,Player2CPU.sprite.body.rotation=0,Player2CPU.sprite.haceGorrino=!1),this.sombra2.position.set(Player1CPU.sprite.body.position.x,this.world.height-144),this.sombra1.position.set(Player2CPU.sprite.body.position.x,this.world.height-144),this.sombra_pelota.position.set(this.pelota.body.position.x,this.world.height-144),this.physics.arcade.collide(this.pelota,Player1CPU.sprite,this.rebote_CPU,null,this),this.physics.arcade.collide(this.pelota,Player2CPU.sprite,this.rebote_CPU,null,this),this.physics.arcade.collide(this.pelota,platforms),this.physics.arcade.collide(Player1CPU.sprite,platforms),this.physics.arcade.collide(Player2CPU.sprite,platforms),this.pelota.angle+=this.pelota.body.velocity.x/20,this.punto?this.time.now>this.enunratico&&(this.punto=!1,this.explota.kill(),this.empieza(this.quienEmpieza)):(Player1CPU.sprite.body.y>this.world.height-250&&(Player1CPU.sprite.salta=!1),Player2CPU.sprite.body.y>this.world.height-250&&(Player2CPU.sprite.salta=!1),this.time.now>Player1CPU.sprite.tiempoGorrino-100&&(Player1CPU.sprite.body.rotation=0,Player1CPU.sprite.haceGorrino=!1),this.time.now>Player1CPU.sprite.tiempoGorrino+100&&(Player1CPU.sprite.paraGorrino=!1),this.time.now>Player2CPU.sprite.tiempoGorrino-100&&(Player2CPU.sprite.body.rotation=0,Player2CPU.sprite.haceGorrino=!1),this.time.now>Player2CPU.sprite.tiempoGorrino+100&&(Player2CPU.sprite.paraGorrino=!1),this.procesa_movimientos_maquina(),this.pelota.body.position.y>500&&this.procesapunto())},quitGame:function(e){this.state.start("MainMenu")},procesapunto:function(){this.explota=this.add.sprite(this.pelota.body.position.x,this.pelota.body.position.y+5,"explota"),Player1CPU.sprite.body.velocity.y=.2*Player1CPU.sprite.body.velocity.y,Player2CPU.sprite.body.velocity.y=.2*Player2CPU.sprite.body.velocity.y,Player1CPU.sprite.body.velocity.x=.2*Player1CPU.sprite.body.velocity.x,Player2CPU.sprite.body.velocity.x=.2*Player2CPU.sprite.body.velocity.x,this.pelota.body.velocity.y=.2*this.pelota.body.velocity.y,this.pelota.body.velocity.x=.2*this.pelota.body.velocity.x,this.pelota.body.gravity.y=200,this.pelota.body.position.x>390?(this.game.puntosPlayer1++,this.scoreText1.text=this.game.puntosPlayer1,this.enunratico=this.time.now+2500,this.quienEmpieza="uno",this.punto=!0):(this.game.puntosPlayer2++,this.scoreText2.text=this.game.puntosPlayer2,this.enunratico=this.time.now+2500,this.quienEmpieza="dos",this.punto=!0)},empieza:function(e){this.pelota.body.gravity.y=900,Player1CPU.sprite.body.position.x=32,Player1CPU.sprite.body.position.y=this.world.height-250,Player1CPU.sprite.body.velocity.x=0,Player1CPU.sprite.body.velocity.y=0,Player2CPU.sprite.body.position.x=this.world.width-32,Player2CPU.sprite.body.position.y=this.world.height-250,Player2CPU.sprite.body.velocity.x=0,Player2CPU.sprite.body.velocity.y=0,this.pelota.body.position.y=0,this.pelota.body.velocity.x=0,"uno"==e?(this.pelota.body.position.x=32,this.dondecae=1):(this.pelota.body.position.x=this.world.width-32,this.dondecae=this.world.width-1)},rebote_CPU:function(e,t){if(this.punto)return!0;var i;"cpu"==t.key?(i=1,jugadorCPU=Player2CPU):(i=-1,jugadorCPU=Player1CPU),0==this.game.level?(this.factorFacilidadX=.6,this.factorFacilidadY=.8):1==this.game.level?(this.factorFacilidadX=.9,this.factorFacilidadY=.9):2==this.game.level&&(this.factorFacilidadX=1,this.factorFacilidadY=1),this.pelota.body.gravity.y=900,this.pelota.body.velocity.y=-600;var o=this.pelota.body.position.x,a=jugadorCPU.sprite.body.position.x,s=o-a,r=(this.pelota.body.velocity.x,this.pelota.body.velocity.y);this.pelota.body.velocity.x=3*s,this.time.now<jugadorCPU.sprite.enfadaoTime&&jugadorCPU.sprite.enfadao&&(quehago=Math.floor(4*Math.random()),0==quehago?(this.pelota.body.velocity.y=.3*r,this.pelota.body.velocity.x=i*-800*this.factorFacilidadX,this.pelota.body.gravity.y=1400*this.factorFacilidadX):1==quehago?(this.pelota.body.velocity.y=-700*this.factorFacilidadY,this.pelota.body.velocity.x=800*i*this.factorFacilidadX,this.pelota.body.gravity.y=1400*this.factorFacilidadX):2==quehago?(this.pelota.body.velocity.y=-700*this.factorFacilidadY,this.pelota.body.velocity.x=i*-800*this.factorFacilidadX,this.pelota.body.gravity.y=1400*this.factorFacilidadX):3==quehago&&(this.pelota.body.velocity.y=800*this.factorFacilidadY,this.pelota.body.velocity.x=i*-1e3*this.factorFacilidadX,this.pelota.body.gravity.y=1400*this.factorFacilidadX))},procesa_movimientos_maquina:function(){x=this.pelota.body.position.x,y=515,H=(this.pelota.body.position.y-(this.world.height-185))*-1,Vx=this.pelota.body.velocity.x,Vy=this.pelota.body.velocity.y,0==this.game.level?(cuantocorre=135,cuantocorreGorrino=300,cuantoTiempoEnfadao=700,cuantoTiempoGorrino=300):1==this.game.level?(cuantocorre=125,cuantocorreGorrino=300,cuantoTiempoEnfadao=700,cuantoTiempoGorrino=300):2==this.game.level&&(cuantocorre=135,cuantocorreGorrino=300,cuantoTiempoEnfadao=800,cuantoTiempoGorrino=300),Vy<0&&(Vy*=-1,this.dondecae=x+Vx/this.pelota.body.gravity.y*Math.sqrt(2*this.pelota.body.gravity.y*H+Vx),this.dondecae>800?this.dondecae=800-(this.dondecae-800):this.dondecae<0&&(this.dondecae=-this.dondecae)),this.dondecae>360?(this.dondecae<Player2CPU.sprite.position.x&&!Player2CPU.sprite.haceGorrino&&Player2CPU.sprite.position.x>Player2CPU.sprite.limiteIzquierda?(Player2CPU.sprite.body.velocity.x=-cuantocorre,this.time.now>Player2CPU.sprite.enfadaoTime&&0!=Player2CPU.sprite.body.velocity.x&&Player2CPU.sprite.animations.play("semueve")):Player2CPU.sprite.haceGorrino||(Player2CPU.sprite.body.velocity.x=cuantocorre,this.time.now>Player2CPU.sprite.enfadaoTime&&0!=Player2CPU.sprite.body.velocity.x&&Player2CPU.sprite.animations.play("semueve")),this.dondecae-Player2CPU.sprite.position.x<70&&x>440&&Player2CPU.sprite.position.y>this.world.height-200&&Vx<120&&Vx>-120&&this.pelota.position.y<this.world.height-300&&(Player2CPU.sprite.body.velocity.y=-550,Player2CPU.sprite.enfadao=!0,Player2CPU.sprite.animations.play("senfada"),Player2CPU.sprite.enfadaoTime=this.time.now+cuantoTiempoEnfadao),this.cincoMovimientos2=++this.cincoMovimientos2%60,this.cincoMovimientos2>58?(ale=Math.random(),ale>.9&&Player1CPU.sprite.position.y>this.world.height-200&&(Player1CPU.sprite.body.velocity.y=-550),ale>.6&&Player1CPU.sprite.body.position.x<360?Player1CPU.sprite.body.velocity.x=100:ale<.5&&(Player1CPU.sprite.body.velocity.x=-100),this.dondeVaCpu1=Player1CPU.sprite.body.velocity.x):Player1CPU.sprite.body.velocity.x=this.dondeVaCpu1,Player1CPU.sprite.animations.play("semueve")):this.dondecae<440&&(this.dondecae<Player1CPU.sprite.position.x&&!Player1CPU.sprite.haceGorrino?(Player1CPU.sprite.body.velocity.x=-cuantocorre,this.time.now>Player1CPU.sprite.enfadaoTime&&0!=Player1CPU.sprite.body.velocity.x&&Player1CPU.sprite.animations.play("semueve")):Player1CPU.sprite.position.x<Player1CPU.sprite.limiteDerecha&&(Player1CPU.sprite.haceGorrino||(Player1CPU.sprite.body.velocity.x=cuantocorre,this.time.now>Player1CPU.sprite.enfadaoTime&&0!=Player1CPU.sprite.body.velocity.x&&Player1CPU.sprite.animations.play("semueve"))),this.dondecae-Player1CPU.sprite.position.x<70&&x<360&&Player1CPU.sprite.position.y>this.world.height-200&&Vx<120&&Vx>-120&&this.pelota.position.y<this.world.height-300&&(Player1CPU.sprite.body.velocity.y=-550,Player1CPU.sprite.enfadao=!0,Player1CPU.sprite.animations.play("senfada"),Player1CPU.sprite.enfadaoTime=this.time.now+cuantoTiempoEnfadao),this.cincoMovimientos1=++this.cincoMovimientos1%60,this.cincoMovimientos1>58?(ale=Math.random(),ale>.9&&Player2CPU.sprite.position.y>this.world.height-200&&(Player2CPU.sprite.body.velocity.y=-550),ale>.6&&Player2CPU.sprite.body.position.x>440?Player2CPU.sprite.body.velocity.x=-100:ale<.5&&(Player2CPU.sprite.body.velocity.x=100),this.dondeVaCpu2=Player2CPU.sprite.body.velocity.x):Player2CPU.sprite.body.velocity.x=this.dondeVaCpu2,Player2CPU.sprite.animations.play("semueve")),0!=this.game.level&&H<200&&(this.dondecae<Player2CPU.sprite.position.x&&Player2CPU.sprite.body.touching.down?Player2CPU.sprite.position.x-this.dondecae>130&&x>440&&!Player2CPU.sprite.haceGorrino&&Player2CPU.sprite.position.x>Player2CPU.sprite.limiteIzquierda&&(Player2CPU.sprite.body.velocity.x=-cuantocorreGorrino,Player2CPU.sprite.body.rotation=-90,Player2CPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino,Player2CPU.sprite.haceGorrino=!0):this.dondecae-Player2CPU.sprite.position.x>130&&x>440&&!Player2CPU.sprite.haceGorrino&&Player2CPU.sprite.body.touching.down&&(Player2CPU.sprite.body.velocity.x=cuantocorreGorrino,Player2CPU.sprite.body.rotation=90,Player2CPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino,Player2CPU.sprite.haceGorrino=!0),this.dondecae<Player1CPU.sprite.position.x&&Player1CPU.sprite.body.touching.down?Player1CPU.sprite.position.x-this.dondecae>130&&x<360&&!Player1CPU.sprite.haceGorrino&&Player1CPU.sprite.position.x<Player1CPU.sprite.limiteDerecha&&(Player1CPU.sprite.body.velocity.x=-cuantocorreGorrino,Player1CPU.sprite.body.rotation=-90,Player1CPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino,Player1CPU.sprite.haceGorrino=!0):this.dondecae-Player1CPU.sprite.position.x>130&&x<360&&!Player1CPU.sprite.haceGorrino&&Player1CPU.sprite.body.touching.down&&(Player1CPU.sprite.body.velocity.x=cuantocorreGorrino,Player1CPU.sprite.body.rotation=90,Player1CPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino,Player1CPU.sprite.haceGorrino=!0))}},DudeVolley.GameMultiplayer=function(e){},DudeVolley.GameMultiplayer.prototype={init:function(){function e(){$("#socket_overlay").show(),$("#socket_nombre").focus();var e=this.id;eljuego.input.keyboard.removeKey(Phaser.Keyboard.D),eljuego.input.keyboard.removeKey(Phaser.Keyboard.R),eljuego.input.keyboard.removeKey(Phaser.Keyboard.F),eljuego.input.keyboard.removeKey(Phaser.Keyboard.G),eljuego.input.keyboard.removeKey(Phaser.Keyboard.Z),eljuego.input.keyboard.removeKey(Phaser.Keyboard.L),$("#socket_empezar").click(function(){ARRIBA=eljuego.input.keyboard.addKey(Phaser.Keyboard.R),ABAJO=eljuego.input.keyboard.addKey(Phaser.Keyboard.F),IZQUIERDA=eljuego.input.keyboard.addKey(Phaser.Keyboard.D),DERECHA=eljuego.input.keyboard.addKey(Phaser.Keyboard.G),SUPERPIKA=eljuego.input.keyboard.addKey(Phaser.Keyboard.L),SUPERPIKA2=eljuego.input.keyboard.addKey(Phaser.Keyboard.Z),window.te_reto?(Player1=new Player(eljuego,"cpu",null,e),Player1.nombre=$("#socket_nombre").val(),socket.emit("player_ready_privada",{nombre:Player1.nombre,privada:window.te_reto})):$("#reta_a_un_colega").show(),$("#volley_label").hide(),$("#botonera_socket").hide()}),$("#reta_a_un_colega_button").click(function(){$("#reta_a_un_colega_button").hide(),$("#juega_con_quien_sea").hide();var t=m(5);Player1=new Player(eljuego,"player1",null,e),Player1.nombre=$("#socket_nombre").val(),socket.emit("prepara_privada",{nombre:Player1.nombre,id_room:t}),$("#room_privada").text(t),$("#pasa_el_enlace").show(),$("#esperando_oponente").show()}),$("#juega_con_quien_sea").click(function(){$("#reta_a_un_colega_button").hide(),$("#juega_con_quien_sea").hide(),socket.emit("prepara_publica"),$("#esperando_oponente").show()})}function t(){eljuego.game.desconectado=!0,eljuego.game.hasperdio=!1,eljuego.game.perdedor=Player1.sprite,eljuego.game.ganador=OTROPLAYER.sprite,eljuego.game.nombre_ganador=OTROPLAYER.nombre,eljuego.state.start("GameOver")}function i(e){"undefined"==typeof Player1&&(Player1=new Player(eljuego,"player1",null,e),Player1.nombre=$("#socket_nombre").val(),socket.emit("player_ready",{nombre:Player1.nombre,id:Player1.id}))}function o(e){"undefined"==typeof Player1&&(Player1=new Player(eljuego,"cpu",null,e),Player1.nombre=$("#socket_nombre").val(),socket.emit("player_ready",{nombre:Player1.nombre,id:Player1.id})),e.id!==Player1.id&&"undefined"==typeof OTROPLAYER&&(0==Player1.soyplayer1?ruta="player1":ruta="cpu",OTROPLAYER=new Player(eljuego,ruta,null,e))}function a(e){"undefined"==typeof OTROPLAYER&&(0==Player1.soyplayer1?ruta="player1":ruta="cpu",OTROPLAYER=new Player(eljuego,ruta,null,e[0])),eljuego.nombre1.text=e[0],Player1.nombre=e[0],eljuego.nombre2.text=e[1],OTROPLAYER.nombre=e[0],$("#socket_overlay").hide(),eljuego.empieza("uno")}function s(e){e.id===Player1.id?("derecha"==e.dir&&Player1.mueve("derecha"),"izquierda"==e.dir&&Player1.mueve("izquierda"),"arriba"==e.dir&&Player1.mueve("arriba"),"parao"==e.dir&&Player1.mueve("parao")):("derecha"==e.dir&&OTROPLAYER.mueve("derecha"),"izquierda"==e.dir&&OTROPLAYER.mueve("izquierda"),"arriba"==e.dir&&OTROPLAYER.mueve("arriba"),"parao"==e.dir&&OTROPLAYER.mueve("parao"))}function r(e){e.id===Player1.id?("1"==e.R&&Player1.mueve("derecha"),"1"==e.L&&Player1.mueve("izquierda"),"1"==e.U&&Player1.mueve("arriba"),"1"==e.P&&Player1.mueve("parao")):("1"==e.R&&OTROPLAYER.mueve("derecha"),"1"==e.L&&OTROPLAYER.mueve("izquierda"),"1"==e.U&&OTROPLAYER.mueve("arriba"),"1"==e.P&&OTROPLAYER.mueve("parao"),"1"==e.D)}function l(e){Player1.soyplayer1||(eljuego.pelota.angle=e.angulo,eljuego.pelota.x=e.x,eljuego.pelota.y=e.y)}function n(e){Player1.soyplayer1||(eljuego.scoreText1.text=e.puntos1,
eljuego.scoreText2.text=e.puntos2,eljuego.game.puntosPlayer1=e.puntos1,eljuego.game.puntosPlayer2=e.puntos2)}function h(e){eljuego.procesapunto_sync(e.x,e.y+5)}function d(e){Player1.soyplayer1||((OTROPLAYER.sprite.x>e.P1x+40||OTROPLAYER.sprite.x<e.P1x-40)&&(OTROPLAYER.sprite.x=e.P1x,tween=eljuego.add.tween(OTROPLAYER.sprite).to({x:[OTROPLAYER.sprite.x,e.P1x]},2,Phaser.Easing.Linear.None,!0)),(Player1.sprite.x>e.P2x+40||Player1.sprite.x<e.P2x-40)&&(Player1.sprite.x=e.P2x,tween2=eljuego.add.tween(Player1.sprite).to({x:[Player1.sprite.x,e.P2x]},2,Phaser.Easing.Linear.None,!0)))}function y(e){Player1.id!=e.id&&(OTROPLAYER.sprite.enfadao=!0,OTROPLAYER.sprite.animations.play("senfada"),OTROPLAYER.sprite.enfadaoTime=eljuego.time.now+500)}function p(){OTROPLAYER.sprite.haceGorrino=!0,OTROPLAYER.sprite.tiempoGorrino=eljuego.time.now+400}function c(e){1==e.U?1==e.L?quehaceel2=7:1==e.R?quehaceel2=9:quehaceel2=8:1==e.D?1==e.L?quehaceel2=1:1==e.R?quehaceel2=2:quehaceel2=3:1==e.L?quehaceel2=4:1==e.R?quehaceel2=6:quehaceel2=5}function u(e){e.ganador_id==Player1.id?(eljuego.game.hasperdio=!0,eljuego.game.perdedor=OTROPLAYER.sprite,eljuego.game.ganador=Player1.sprite,eljuego.game.nombre_ganador=Player1.nombre):(eljuego.game.hasperdio=!1,eljuego.game.perdedor=Player1.sprite,eljuego.game.ganador=OTROPLAYER.sprite,eljuego.game.nombre_ganador=OTROPLAYER.nombre),eljuego.state.start("GameOver")}function m(e){for(var t="0123456789ABCDEFGHIJKLMNOPQRSTUVWXTZabcdefghiklmnopqrstuvwxyz",i=10,o="",a=0;a<i;a++){var s=Math.floor(2*Math.random());if(0==s){var r=Math.floor(9*Math.random());o+=r}else{var l=Math.floor(Math.random()*t.length);o+=t.substring(l,l+1)}}return o}function v(e){}function b(e){"undefined"==typeof Player1&&location.reload()}function P(){socket.on("connect",e),socket.on("disconnect",t),socket.on("new player",i),socket.on("new player2",o),socket.on("samovio",s),socket.on("recibeteclas",r),socket.on("situapelota",l),socket.on("situajugador1",d),socket.on("fuera del multiplayer",b),socket.on("goGameOver",u),p2p.on("posicion pelota",l),p2p.on("posicion jugador1",d),p2p.on("actualiza_marcador",n),p2p.on("punto",h),p2p.on("enfadao2",y),p2p.on("hacegorrino2",p),p2p.on("teclaspika",c),socket.on("remove player",v),socket.on("ya estamos todos",a)}ga("send","pageview","/GameMultiplayer"),eljuego=this,primeraVez=!0,"undefined"==typeof io&&(alert("sin definir"),location.reload()),socket=io.connect("https://dudevolley.com:8080",{port:8080,transports:["websocket"],secure:!0}),p2p=new P2P(socket),p2p.on("ready",function(){p2p.usePeerConnection=!0,console.log(p2p);try{p2p.emit("peer-obj",{peerId:peerId})}catch(e){console.log("mierror",e)}}),P(),this.physics.startSystem(Phaser.Physics.ARCADE),this.add.sprite(0,0,"sky"),platforms=this.add.group(),platforms.enableBody=!0;var g=platforms.create(0,this.world.height-134,"ground");g.scale.setTo(2,2),g.body.immovable=!0;var w=platforms.create(390,this.world.height-320,"red");w.body.immovable=!0,this.sombra1=this.add.sprite(32,this.world.height-200,"sombra"),this.sombraPelota=this.add.sprite(32,this.world.height-200,"sombra"),this.sombra2=this.add.sprite(this.world.width-52,this.world.height-200,"sombra"),this.sombra1.alpha=.5,this.sombra2.alpha=.5,this.sombraPelota.alpha=.2,this.nombre1=this.add.text(16,10,"",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"}),this.nombre2=this.add.text(this.world.width-16,10,"",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"}),this.nombre2.anchor.x=1,this.scoreText1=this.add.text(16,46,"0",{font:"54px ArcadeClassic",fill:"#eaff02",align:"center"}),this.scoreText2=this.add.text(this.world.width-16,46,"0",{font:"54px ArcadeClassic",fill:"#eaff02",align:"center"}),this.scoreText2.anchor.x=1,this.game.puntosPlayer1=0,this.game.puntosPlayer2=0,this.scoreText1.text=this.game.puntosPlayer1,this.scoreText2.text=this.game.puntosPlayer2,this.esperaCollide1=this.time.now,this.esperaCollide2=this.time.now,this.game.factor_slow_velocity=1,this.game.factor_slow_gravity=1,this.game.ultimo_tocar="",this.game.contador_toques=0,this.game.device.desktop||(this.joy=new Joystick(this.game,120,this.world.height-100),this.movil_accion=this.add.sprite(this.world.width-100,this.world.height-100,"pika"),this.movil_accion.anchor.setTo(.5,.5),this.movil_accion.inputEnabled=!0,this.movil_accion.input.sprite.events.onInputDown.add(this.entra_movil_accion,this),this.movil_accion.input.sprite.events.onInputUp.add(this.sal_movil_accion,this)),cursors=this.input.keyboard.createCursorKeys(),SUPERPIKA=this.input.keyboard.addKey(Phaser.Keyboard.L),SUPERPIKA2=this.input.keyboard.addKey(Phaser.Keyboard.Z),PAUSE=this.input.keyboard.addKey(Phaser.Keyboard.ESC),quehaceel2=0,this.sincronizapelotatime=this.time.now+100,this.enunratico=this.time.now,this.quienEmpieza="uno",this.punto=!1,this.dondecae=0,this.cuandocae=0,this.muevederecha=!1,this.mueveizquierda=!1,this.muevearriba=!1,this.mueveabajo=!1,this.game.hasperdio=!1,this.game.unplayer=!1,this.game.multiplayer=!0,this.game.empieza=this.time.now,this.need_sync=!1,this.enpausa=!1,window.onkeydown=function(){27==this.PAUSE.game.input.keyboard.event.keyCode&&(this.PAUSE.game.paused=!this.PAUSE.game.paused)}},entra_movil_accion:function(){this.click_accion=!0},sal_movil_accion:function(){this.click_accion=!1},update:function(){if("undefined"!=typeof OTROPLAYER&&(OTROPLAYER.sprite.body.y>this.world.height-250&&(OTROPLAYER.sprite.salta=!1),this.sombra2.position.set(OTROPLAYER.sprite.body.position.x,this.world.height-144),"undefined"!=typeof this.pelota&&this.time.now>this.esperaCollide2&&this.physics.arcade.collide(this.pelota,OTROPLAYER.sprite,this.pika_OTRO,null,this),this.physics.arcade.collide(OTROPLAYER.sprite,platforms)),"undefined"!=typeof Player1&&(Player1.sprite.body.y>this.world.height-250&&(Player1.sprite.salta=!1),this.sombra1.position.set(Player1.sprite.body.position.x,this.world.height-144),"undefined"!=typeof this.pelota&&this.time.now>this.esperaCollide1&&this.physics.arcade.collide(this.pelota,Player1.sprite,this.pika,null,this),this.physics.arcade.collide(Player1.sprite,platforms)),"undefined"!=typeof this.pelota&&Player1.soyplayer1){this.sombraPelota.position.set(this.pelota.body.position.x,this.world.height-144),this.pelota.angle+=this.pelota.body.velocity.x/20,this.physics.arcade.collide(this.pelota,platforms);try{p2p.emit("posicion pelota",{x:this.pelota.x,y:this.pelota.y,angulo:this.pelota.angle,room:window.te_reto}),this.need_sync&&(this.need_sync=!1,p2p.emit("posicion jugador1",{P1x:Player1.sprite.x,P2x:OTROPLAYER.sprite.x,P1y:Player1.sprite.y,P2y:OTROPLAYER.sprite.y,room:window.te_reto}))}catch(e){console.log("mierror",e)}this.time.now>this.sincronizapelotatime&&(this.sincronizapelotatime=this.time.now+20)}if(this.punto)this.game.contador_toques=0,this.game.factor_slow_velocity=1,this.time.now>this.enunratico&&(this.punto=!1,this.need_sync=!0,this.explota.kill(),this.empieza(this.quienEmpieza));else{if("undefined"!=typeof OTROPLAYER&&(this.time.now>OTROPLAYER.sprite.tiempoGorrino-100&&(OTROPLAYER.sprite.body.rotation=0,OTROPLAYER.sprite.haceGorrino=!1),this.time.now>OTROPLAYER.sprite.tiempoGorrino+100&&(OTROPLAYER.sprite.paraGorrino=!1)),"undefined"!=typeof Player1){if(this.time.now>Player1.sprite.tiempoGorrino-100&&(Player1.sprite.body.rotation=0,Player1.sprite.haceGorrino=!1),this.time.now>Player1.sprite.tiempoGorrino+100&&(Player1.sprite.paraGorrino=!1),SUPERPIKA.isDown||this.click_accion||SUPERPIKA2.isDown)if(Player1.sprite.body.touching.down||Player1.sprite.paraGorrino){if(!Player1.sprite.paraGorrino){try{p2p.emit("hacegorrino2",{room:window.te_reto})}catch(e){console.log("mierror",e)}Player1.sprite.haceGorrino=!0,Player1.sprite.tiempoGorrino=this.time.now+400}}else{Player1.sprite.enfadao=!0,Player1.sprite.animations.play("senfada"),Player1.sprite.enfadaoTime=this.time.now+500;try{p2p.emit("enfadao2",{id:Player1.id,room:window.te_reto})}catch(e){console.log("mierror",e)}}this.game.device.desktop||(this.joy.update(),this.joy.holder.events.onMove.add(this.procesaDragg,this),this.joy.holder.events.onUp.add(this.paraDragg,this));var e=0,t=0,i=0,o=0,a=0;if(cursors.left.isDown||this.mueveizquierda?e=1:cursors.right.isDown||this.muevederecha?t=1:a=1,(cursors.up.isDown||this.muevearriba)&&(i=1),(cursors.down.isDown||this.mueveabajo)&&(o=1),socket.emit("teclas",{id:Player1.id,L:e,R:t,U:i,D:o,P:a,room:window.te_reto}),!Player1.soyplayer1)try{p2p.emit("teclaspika",{L:e,R:t,U:i,D:o,room:window.te_reto})}catch(e){console.log("mierror",e)}}"undefined"!=typeof this.pelota&&Player1.soyplayer1&&this.pelota.body.position.y>500&&this.procesapunto()}},quitGame:function(e){this.state.start("MainMenu")},paraDragg:function(e){Player1.mueve("parao"),this.mueveizquierda=!1,this.muevederecha=!1,this.muevearriba=!1,this.mueveabajo=!1},procesaDragg:function(e,t,i){var o=180*i/Math.PI;return t<30?(Player1.mueve("parao"),this.mueveizquierda=!1,this.muevederecha=!1,this.muevearriba=!1,void(this.mueveabajo=!1)):(o>-90&&o<90&&(Player1.mueve("derecha"),this.mueveizquierda=!1,this.muevederecha=!0),(o>90||o<-90)&&(Player1.mueve("izquierda"),this.mueveizquierda=!0,this.muevederecha=!1),o>-135&&o<-45?(Player1.mueve("arriba"),this.muevearriba=!0):this.muevearriba=!1,void(o<135&&o>45?this.mueveabajo=!0:this.mueveabajo=!1))},procesapunto:function(){this.explota=this.add.sprite(this.pelota.body.position.x,this.pelota.body.position.y+5,"explota"),this.punto=!0,Player1.sprite.body.velocity.y=.2*Player1.sprite.body.velocity.y,OTROPLAYER.sprite.body.velocity.y=.2*OTROPLAYER.sprite.body.velocity.y,Player1.sprite.body.velocity.x=.2*Player1.sprite.body.velocity.x,OTROPLAYER.sprite.body.velocity.x=.2*OTROPLAYER.sprite.body.velocity.x,this.pelota.body.velocity.y=.2*this.pelota.body.velocity.y,this.pelota.body.velocity.x=.2*this.pelota.body.velocity.x,this.pelota.body.gravity.y=200,this.pelota.body.position.x>390?(this.game.puntosPlayer1++,this.scoreText1.text=this.game.puntosPlayer1,this.enunratico=this.time.now+2500,this.quienEmpieza="uno",this.game.puntosPlayer1>=15&&socket.emit("game_over",{ganador:Player1.nombre,ganador_id:Player1.id,perdedor:OTROPLAYER.nombre,perdedor_id:OTROPLAYER.id,room:window.te_reto})):(this.game.puntosPlayer2++,this.scoreText2.text=this.game.puntosPlayer2,this.enunratico=this.time.now+2500,this.quienEmpieza="dos",this.game.puntosPlayer2>=15&&socket.emit("game_over",{ganador:OTROPLAYER.nombre,ganador_id:OTROPLAYER.id,perdedor:Player1.nombre,perdedor_id:Player1.id,room:window.te_reto}));try{p2p.emit("actualiza_marcador",{puntos1:this.game.puntosPlayer1,puntos2:this.game.puntosPlayer2,room:window.te_reto}),p2p.emit("punto",{x:this.pelota.body.position.x,y:this.pelota.body.position.y,room:window.te_reto})}catch(e){console.log("mierror",e)}},procesapunto_sync:function(e,t){Player1.soyplayer1||(this.explota=this.add.sprite(e,t,"explota"),this.punto=!0,this.enunratico=this.time.now+2400)},pika:function(){if("undefined"!=typeof this.pelota){if(this.punto)return!0;this.esperaCollide1=this.time.now+100,this.pelota.body.gravity.y=900*this.game.factor_slow_gravity,this.pelota.body.velocity.y=-600*this.game.factor_slow_velocity,pos_pelota=this.pelota.body.position.x,pos_player=Player1.sprite.body.position.x,diferencia=pos_pelota-pos_player,v_x_pelota=this.pelota.body.velocity.x,v_y_pelota=this.pelota.body.velocity.y,this.pelota.body.velocity.x=3*diferencia,"player1"!=this.game.ultimo_tocar&&(this.game.contador_toques++,this.game.ultimo_tocar="player1"),console.log(this.game.contador_toques),this.game.contador_toques>=10&&(this.pelota.tint=16776960,this.game.factor_slow_velocity=1.3),this.time.now<Player1.sprite.enfadaoTime&&Player1.sprite.enfadao&&(!(cursors.right.isDown||cursors.left.isDown||this.mueveizquierda||this.muevederecha)&&this.game.device.desktop||cursors.up.isDown||this.muevearriba||cursors.down.isDown||this.mueveabajo?!cursors.right.isDown&&!this.muevederecha||!cursors.up.isDown&&!this.muevearriba||cursors.down.isDown||this.mueveabajo?!cursors.left.isDown&&!this.mueveizquierda||!cursors.up.isDown&&!this.muevearriba||cursors.down.isDown||this.mueveabajo?!(cursors.right.isDown||cursors.left.isDown||this.mueveizquierda||this.muevederecha)||cursors.up.isDown||this.muevearriba||!cursors.down.isDown&&!this.mueveabajo?cursors.right.isDown||this.muevederecha||cursors.left.isDown||this.mueveizquierda||cursors.up.isDown||this.muevearriba||!cursors.down.isDown&&!this.mueveabajo?cursors.right.isDown||this.muevederecha||cursors.left.isDown||this.muevearriba||cursors.up.isDown||this.muevearriba||cursors.down.isDown||this.mueveabajo?cursors.right.isDown||this.muevederecha||cursors.left.isDown||this.mueveizquierda||!cursors.up.isDown&&!this.muevearriba||cursors.down.isDown||this.mueveabajo||(this.pelota.body.velocity.y=-1e3*this.game.factor_slow_velocity,this.pelota.body.velocity.x=300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):(this.pelota.body.velocity.y=-100*this.game.factor_slow_velocity,this.pelota.body.velocity.x=300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):(this.pelota.body.velocity.y=800*this.game.factor_slow_velocity,this.pelota.body.velocity.x=300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):(this.pelota.body.velocity.y=800*this.game.factor_slow_velocity,this.pelota.body.velocity.x=1e3*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):(this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):(this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity,this.pelota.body.velocity.x=800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):(this.pelota.body.velocity.y=.3*v_y_pelota*this.game.factor_slow_velocity,this.pelota.body.velocity.x=800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1500*this.game.factor_slow_gravity))}},pika_OTRO:function(){if(this.need_sync=!0,"undefined"!=typeof this.pelota){if(this.punto)return!0;this.esperaCollide2=this.time.now+100,this.pelota.body.gravity.y=900*this.game.factor_slow_gravity,this.pelota.body.velocity.y=-600*this.game.factor_slow_velocity,pos_pelota=this.pelota.body.position.x,pos_player=OTROPLAYER.sprite.body.position.x,diferencia=pos_pelota-pos_player,v_x_pelota=this.pelota.body.velocity.x,v_y_pelota=this.pelota.body.velocity.y,this.pelota.body.velocity.x=3*diferencia,"player2"!=this.game.ultimo_tocar&&(this.game.contador_toques++,this.game.ultimo_tocar="player2"),this.game.contador_toques>=10&&(this.pelota.tint=16776960,this.game.factor_slow_velocity=1.2),this.time.now<OTROPLAYER.sprite.enfadaoTime&&OTROPLAYER.sprite.enfadao&&(4==quehaceel2||6==quehaceel2?(this.pelota.body.velocity.y=.3*v_y_pelota*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1500*this.game.factor_slow_gravity):9==quehaceel2?(this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity,this.pelota.body.velocity.x=800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):7==quehaceel2?(this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):1==quehaceel2||3==quehaceel2?(this.pelota.body.velocity.y=800*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-1e3*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):2==quehaceel2?(this.pelota.body.velocity.y=800*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):5==quehaceel2?(this.pelota.body.velocity.y=-100*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):8==quehaceel2&&(this.pelota.body.velocity.y=-1e3*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity))}},empieza:function(e){primeraVez?(this.pelota=this.add.sprite(32,0,"pelota"),this.pelota.anchor.setTo(.5,.5),Player1.soyplayer1&&(this.physics.arcade.enable(this.pelota),this.pelota.body.gravity.y=0,this.pelota.body.bounce.y=.9,this.pelota.body.bounce.x=.9,this.pelota.body.gravity.y=900*this.game.factor_slow_gravity,this.pelota.body.collideWorldBounds=!0,this.pelota.body.mass=.15),primeraVez=!1):Player1.soyplayer1?(this.dondecae=this.world.width-1,this.pelota.body.gravity.y=900,"uno"==e?this.pelota.body.position.x=32:this.pelota.body.position.x=this.world.width-32,this.pelota.body.position.y=0,this.pelota.body.velocity.x=0,Player1.sprite.body.position.x=32,Player1.sprite.body.position.y=this.world.height-250,Player1.sprite.body.velocity.x=0,Player1.sprite.body.velocity.y=0,OTROPLAYER.sprite.body.position.x=this.world.width-32,OTROPLAYER.sprite.body.position.y=this.world.height-250,OTROPLAYER.sprite.body.velocity.x=0,OTROPLAYER.sprite.body.velocity.y=0):(OTROPLAYER.sprite.body.position.x=32,OTROPLAYER.sprite.body.position.y=this.world.height-250,OTROPLAYER.sprite.body.velocity.x=0,OTROPLAYER.sprite.body.velocity.y=0,Player1.sprite.body.position.x=this.world.width-32,Player1.sprite.body.position.y=this.world.height-250,Player1.sprite.body.velocity.x=0,Player1.sprite.body.velocity.y=0)}},DudeVolley.GamePartyMode=function(e){},DudeVolley.GamePartyMode.prototype={init:function(){function e(){$("#party_overlay").show();this.id;eljuego.input.keyboard.removeKey(Phaser.Keyboard.D),eljuego.input.keyboard.removeKey(Phaser.Keyboard.R),eljuego.input.keyboard.removeKey(Phaser.Keyboard.F),eljuego.input.keyboard.removeKey(Phaser.Keyboard.G),eljuego.input.keyboard.removeKey(Phaser.Keyboard.Z),eljuego.input.keyboard.removeKey(Phaser.Keyboard.L);var e=Math.floor(9e3*Math.random())+1e3;$("#id_partida_party").text(e),socket.emit("prepara_party",e)}function t(){eljuego.state.start("GameOver")}function i(e){"undefined"==typeof Player1?(Player1=new Player(eljuego,"player1",null,e.id),Player1.nombre=e.nombre,eljuego.nombre1.text=e.nombre):(Player2=new Player(eljuego,"cpu",null,e.id),Player2.nombre=e.nombre,eljuego.nombre2.text=Player2.nombre,eljuego.empieza(eljuego.quienEmpieza,!0),$("#party_overlay").hide())}function o(e){e.id===Player1.id?(1==e.U?1==e.L?Player1.cruceta=7:1==e.R?Player1.cruceta=9:Player1.cruceta=8:1==e.D?1==e.L?Player1.cruceta=1:1==e.R?Player1.cruceta=2:Player1.cruceta=3:1==e.L?Player1.cruceta=4:1==e.R?Player1.cruceta=6:Player1.cruceta=5,"1"==e.R&&Player1.mueve("derecha"),"1"==e.L&&Player1.mueve("izquierda"),"1"==e.U&&Player1.mueve("arriba"),"1"==e.P&&Player1.mueve("parao")):(1==e.U?1==e.L?Player2.cruceta=7:1==e.R?Player2.cruceta=9:Player2.cruceta=8:1==e.D?1==e.L?Player2.cruceta=1:1==e.R?Player2.cruceta=2:Player2.cruceta=3:1==e.L?Player2.cruceta=4:1==e.R?Player2.cruceta=6:Player2.cruceta=5,"1"==e.R&&Player2.mueve("derecha"),"1"==e.L&&Player2.mueve("izquierda"),"1"==e.U&&Player2.mueve("arriba"),"1"==e.P&&Player2.mueve("parao"),"1"==e.D)}function a(e){e===Player1.id?Player1.accion_pulsado=!0:Player2.accion_pulsado=!0}function s(e){e===Player1.id?Player1.accion_pulsado=!1:Player2.accion_pulsado=!1}function r(){socket.on("connect",e),socket.on("disconnect",t),socket.on("new_player",i),socket.on("accion_pulsado",a),socket.on("accion_suelto",s),socket.on("recibeteclas",o)}ga("send","pageview","/GamePartyMode"),eljuego=this,"undefined"==typeof io,socket=io.connect("https://dudevolley.com:8081",{port:8081,transports:["websocket"],secure:!0}),r(),this.physics.startSystem(Phaser.Physics.ARCADE),this.add.sprite(0,0,"sky"),platforms=this.add.group(),platforms.enableBody=!0;var l=platforms.create(0,this.world.height-134,"ground");l.scale.setTo(2,2),l.body.immovable=!0;var n=platforms.create(390,this.world.height-320,"red");n.body.immovable=!0,this.sombra1=this.add.sprite(32,this.world.height-200,"sombra"),this.sombraPelota=this.add.sprite(32,this.world.height-200,"sombra"),this.sombra2=this.add.sprite(this.world.width-52,this.world.height-200,"sombra"),this.sombra1.alpha=.5,this.sombra2.alpha=.5,this.sombraPelota.alpha=.2,this.nombre1=this.add.text(16,10,"",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"}),this.nombre2=this.add.text(this.world.width-16,10,"",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"}),this.nombre2.anchor.x=1,this.scoreText1=this.add.text(16,46,"0",{font:"54px ArcadeClassic",fill:"#eaff02",align:"center"}),this.scoreText2=this.add.text(this.world.width-16,46,"0",{font:"54px ArcadeClassic",fill:"#eaff02",align:"center"}),this.scoreText2.anchor.x=1,this.game.puntosPlayer1=0,this.game.puntosPlayer2=0,this.scoreText1.text=this.game.puntosPlayer1,this.scoreText2.text=this.game.puntosPlayer2,this.contador_empieza=this.add.text(this.world.width/2,this.world.height/2,"",{font:"64px ArcadeClassic",fill:"#eaff02",align:"center"}),this.contador_empieza.anchor.x=.5,this.contador_empieza.anchor.y=.5,this.esperaCollide1=this.time.now,this.esperaCollide2=this.time.now,this.empezar=!1,this.tiempo_empieza=this.time.now,this.game.factor_slow_velocity=1,this.game.factor_slow_gravity=1,this.enunratico=this.time.now,this.quienEmpieza="uno",this.punto=!1,this.dondecae=0,this.cuandocae=0,this.muevederecha=!1,this.mueveizquierda=!1,this.muevearriba=!1,this.mueveabajo=!1,this.game.hasperdio=!1,this.game.unplayer=!1,this.game.multiplayer=!0,this.game.empieza=this.time.now,this.enpausa=!1},update:function(){this.empezar&&this.time.now<this.tiempo_empieza?(this.contador_empieza.text=Math.floor((this.tiempo_empieza-this.time.now)/1e3),this.pelota.body.velocity.x=0,this.pelota.body.velocity.y=0):this.contador_empieza.text="","undefined"!=typeof Player2&&(Player2.sprite.body.y>this.world.height-250&&(Player2.sprite.salta=!1),this.sombra2.position.set(Player2.sprite.body.position.x,this.world.height-144),"undefined"!=typeof this.pelota&&this.time.now>this.esperaCollide2&&this.physics.arcade.collide(this.pelota,Player2.sprite,this.pika2,null,this),this.physics.arcade.collide(Player2.sprite,platforms)),"undefined"!=typeof Player1&&(Player1.sprite.body.y>this.world.height-250&&(Player1.sprite.salta=!1),this.sombra1.position.set(Player1.sprite.body.position.x,this.world.height-144),"undefined"!=typeof this.pelota&&this.time.now>this.esperaCollide1&&this.physics.arcade.collide(this.pelota,Player1.sprite,this.pika,null,this),this.physics.arcade.collide(Player1.sprite,platforms)),"undefined"!=typeof this.pelota&&(this.sombraPelota.position.set(this.pelota.body.position.x,this.world.height-144),this.pelota.angle+=this.pelota.body.velocity.x/20,this.physics.arcade.collide(this.pelota,platforms)),this.punto?this.time.now>this.enunratico&&(this.punto=!1,this.explota.kill(),this.empieza(this.quienEmpieza)):("undefined"!=typeof Player2&&(this.time.now>Player2.sprite.tiempoGorrino-100&&(Player2.sprite.body.rotation=0,Player2.sprite.haceGorrino=!1),this.time.now>Player2.sprite.tiempoGorrino+100&&(Player2.sprite.paraGorrino=!1),Player2.accion_pulsado&&(Player2.sprite.body.touching.down||Player2.sprite.paraGorrino?Player2.sprite.paraGorrino||(Player2.sprite.haceGorrino=!0,Player2.sprite.tiempoGorrino=this.time.now+400):(Player2.sprite.enfadao=!0,Player2.sprite.animations.play("senfada"),Player2.sprite.enfadaoTime=this.time.now+500))),"undefined"!=typeof Player1&&(this.time.now>Player1.sprite.tiempoGorrino-100&&(Player1.sprite.body.rotation=0,Player1.sprite.haceGorrino=!1),this.time.now>Player1.sprite.tiempoGorrino+100&&(Player1.sprite.paraGorrino=!1),Player1.accion_pulsado&&(Player1.sprite.body.touching.down||Player1.sprite.paraGorrino?Player1.sprite.paraGorrino||(Player1.sprite.haceGorrino=!0,Player1.sprite.tiempoGorrino=this.time.now+400):(Player1.sprite.enfadao=!0,Player1.sprite.animations.play("senfada"),Player1.sprite.enfadaoTime=this.time.now+500))),"undefined"!=typeof this.pelota&&this.pelota.body.position.y>500&&this.procesapunto())},quitGame:function(e){this.state.start("MainMenu")},procesapunto:function(){this.explota=this.add.sprite(this.pelota.body.position.x,this.pelota.body.position.y+5,"explota"),this.punto=!0,Player1.sprite.body.velocity.y=.2*Player1.sprite.body.velocity.y,Player2.sprite.body.velocity.y=.2*Player2.sprite.body.velocity.y,Player1.sprite.body.velocity.x=.2*Player1.sprite.body.velocity.x,Player2.sprite.body.velocity.x=.2*Player2.sprite.body.velocity.x,this.pelota.body.velocity.y=.2*this.pelota.body.velocity.y,this.pelota.body.velocity.x=.2*this.pelota.body.velocity.x,this.pelota.body.gravity.y=200,this.pelota.body.position.x>390?(this.game.puntosPlayer1++,this.scoreText1.text=this.game.puntosPlayer1,this.enunratico=this.time.now+2500,this.quienEmpieza="uno",this.game.puntosPlayer1>=15):(this.game.puntosPlayer2++,this.scoreText2.text=this.game.puntosPlayer2,this.enunratico=this.time.now+2500,this.quienEmpieza="dos",this.game.puntosPlayer2>=15)},pika:function(){if("undefined"!=typeof this.pelota){if(this.punto)return!0;this.esperaCollide1=this.time.now+100,this.pelota.body.gravity.y=900*this.game.factor_slow_gravity,this.pelota.body.velocity.y=-600*this.game.factor_slow_velocity,pos_pelota=this.pelota.body.position.x,pos_player=Player1.sprite.body.position.x,diferencia=pos_pelota-pos_player,v_x_pelota=this.pelota.body.velocity.x,v_y_pelota=this.pelota.body.velocity.y,this.pelota.body.velocity.x=3*diferencia,this.time.now<Player1.sprite.enfadaoTime&&Player1.sprite.enfadao&&(4==Player1.cruceta||6==Player1.cruceta?(this.pelota.body.velocity.y=.3*v_y_pelota*this.game.factor_slow_velocity,this.pelota.body.velocity.x=800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1500*this.game.factor_slow_gravity):9==Player1.cruceta?(this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity,this.pelota.body.velocity.x=800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):7==Player1.cruceta?(this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):1==Player1.cruceta||3==Player1.cruceta?(this.pelota.body.velocity.y=800*this.game.factor_slow_velocity,this.pelota.body.velocity.x=1e3*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):2==Player1.cruceta?(this.pelota.body.velocity.y=800*this.game.factor_slow_velocity,this.pelota.body.velocity.x=300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):5==Player1.cruceta?(this.pelota.body.velocity.y=-100*this.game.factor_slow_velocity,this.pelota.body.velocity.x=300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):8==Player1.cruceta&&(this.pelota.body.velocity.y=-1e3*this.game.factor_slow_velocity,this.pelota.body.velocity.x=300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity))}},pika2:function(){if("undefined"!=typeof this.pelota){if(this.punto)return!0;this.esperaCollide2=this.time.now+100,this.pelota.body.gravity.y=900*this.game.factor_slow_gravity,this.pelota.body.velocity.y=-600*this.game.factor_slow_velocity,pos_pelota=this.pelota.body.position.x,pos_player=Player2.sprite.body.position.x,diferencia=pos_pelota-pos_player,v_x_pelota=this.pelota.body.velocity.x,v_y_pelota=this.pelota.body.velocity.y,this.pelota.body.velocity.x=3*diferencia,this.time.now<Player2.sprite.enfadaoTime&&Player2.sprite.enfadao&&(4==Player2.cruceta||6==Player2.cruceta?(this.pelota.body.velocity.y=.3*v_y_pelota*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1500*this.game.factor_slow_gravity):9==Player2.cruceta?(this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity,this.pelota.body.velocity.x=800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):7==Player2.cruceta?(this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-800*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):1==Player2.cruceta||3==Player2.cruceta?(this.pelota.body.velocity.y=800*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-1e3*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):2==Player2.cruceta?(this.pelota.body.velocity.y=800*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):5==Player2.cruceta?(this.pelota.body.velocity.y=-100*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity):8==Player2.cruceta&&(this.pelota.body.velocity.y=-1e3*this.game.factor_slow_velocity,this.pelota.body.velocity.x=-300*this.game.factor_slow_velocity,this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity))}},empieza:function(e,t){t?(this.empezar=!0,this.tiempo_empieza=this.time.now+5e3,eljuego.pelota=eljuego.add.sprite(32,0,"pelota"),eljuego.pelota.anchor.setTo(.5,.5),eljuego.physics.arcade.enable(eljuego.pelota),eljuego.pelota.body.gravity.y=0,eljuego.pelota.body.bounce.y=.9,eljuego.pelota.body.bounce.x=.9,eljuego.pelota.body.gravity.y=900*eljuego.game.factor_slow_gravity,eljuego.pelota.body.collideWorldBounds=!0,eljuego.pelota.body.mass=.15):(this.dondecae=this.world.width-1,this.pelota.body.gravity.y=900,"uno"==e?this.pelota.body.position.x=32:this.pelota.body.position.x=this.world.width-32,this.pelota.body.position.y=0,this.pelota.body.velocity.x=0,Player1.sprite.body.position.x=32,Player1.sprite.body.position.y=this.world.height-250,Player1.sprite.body.velocity.x=0,Player1.sprite.body.velocity.y=0,Player2.sprite.body.position.x=this.world.width-32,Player2.sprite.body.position.y=this.world.height-250,Player2.sprite.body.velocity.x=0,Player2.sprite.body.velocity.y=0)}},DudeVolley.GameOver=function(e){},DudeVolley.GameOver.prototype={create:function(){ga("send","pageview","/GameOver");var e=this.game.ruta_jugador;relacion=$(window).height()/$(window).width(),relacion<1&&(letra1=$(window).height()/9,letra2=$(window).height()/14,letra3=$(window).height()/20,borde=$(window).height()/40,ancho=$(window).height()/2,$("#puntos").css("font-size",letra1+"px"),$("#texto_fin").css("font-size",letra2+"px"),$("#envia_tus_puntos").css("font-size",letra2+"px"),$("#inputtunombre").css("font-size",letra2+"px"),$("#inputtunombre").css("padding",borde+"px"),$("#inputtunombre").css("width",ancho+"px"),$("#inputtunombre").css("border",borde+"px solid #f5f823"),$("#envia_tu_nombre").css("font-size",letra2+"px"),$("#envia_tu_nombre").css("padding",borde+"px"),$("#envia_tu_nombre").css("border",borde+"px solid #f5f823"),$("#contiene_mandapuntos").css("font-size",letra3+"px"),$("#contiene_clasificacion").css("font-size",letra3+"px")),this.input.keyboard.removeKey(Phaser.Keyboard.D),this.input.keyboard.removeKey(Phaser.Keyboard.R),this.input.keyboard.removeKey(Phaser.Keyboard.F),this.input.keyboard.removeKey(Phaser.Keyboard.G),this.input.keyboard.removeKey(Phaser.Keyboard.Z),this.input.keyboard.removeKey(Phaser.Keyboard.L),this.add.sprite(0,0,"game_over_back");var t,i=this.game.puntosPlayer1-this.game.puntosPlayer2,o=this.game.puntosPlayer1+" - "+this.game.puntosPlayer2;if(this.game.unplayer){var a,s=this.time.now-this.game.empieza;if(1==this.game.hasperdio)t="perdido";else if(t="ganado",0!=e){var r={rutaplayer:e,token:window.token};$.post("cambia_imagen_winner.php",r).done(function(e){console.log(e)})}0==this.game.level?a="chupao":1==this.game.level?a="normalico":2==this.game.level&&(a="jodio");var l=cricri(i+o+s+window.token);if(window.twitter_img){$("#envia_tu_nombre").hide(),
$("#inputtunombre").hide(),$("#envia_tus_puntos").hide();var r={nombre:window.twitter_name,diferencia:i,puntuacion:o,tiempo:s,level:a,token:window.token,cri:l};$.post("registrapuntos.php",r).done(function(e){window.setTimeout(function(){n.alpha=0,h.alpha=0,$("#mandapuntos").slideUp(),$("#contiene_clasificacion").slideDown(),acho=JSON.parse(e),$.each(acho,function(){var e=Number(this.tiempo),t=Math.floor(e/1e3),i=Math.floor(t/60),t=t-60*i;t<10&&(t="0"+t);var o=i+":"+t;$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<dl><dt>"+this.nombre+"</dt><dd>"+this.puntuacion+"("+o+")</dd></dl>")})},5e3)})}$("#mandapuntos").show(),$("#contiene_mandapuntos").fadeIn(),$("#contiene_mandapuntos").focus(),t=this.game.hasperdio?"perdido":"ganado",this.resultado_text=this.add.text(this.world.width/2,120,"Has "+t,{font:"65px ArcadeClassic",fill:"#eaff02",align:"center"}),this.resultado_text.anchor.setTo(.5,.5),this.resultado_puntos_text=this.add.text(this.world.width/2,200,this.game.puntosPlayer1+" - "+this.game.puntosPlayer2,{font:"65px ArcadeClassic",fill:"#eaff02",align:"center"}),this.resultado_puntos_text.anchor.setTo(.5,.5);var l=cricri(i+o+s+window.token);window.entra=0;var n=this.resultado_text,h=this.resultado_puntos_text;$("#envia_tu_nombre").click(function(e){if(e.preventDefault(),window.entra<1){var t={nombre:$("#inputtunombre").val(),diferencia:i,puntuacion:o,tiempo:s,level:a,token:window.token,cri:l};$.post("registrapuntos.php",t).done(function(e){n.alpha=0,h.alpha=0,$("#mandapuntos").slideUp(),$("#contiene_clasificacion").slideDown(),acho=JSON.parse(e),$.each(acho,function(){var e=Number(this.tiempo),t=Math.floor(e/1e3),i=Math.floor(t/60),t=t-60*i;t<10&&(t="0"+t);var o=i+":"+t;$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<dl><dt>"+this.nombre+"</dt><dd>"+this.puntuacion+"("+o+")</dd></dl>")})})}})}else{var d,y="";if(this.game.multiplayer){if(d=this.game.nombre_ganador,socket.emit("disconect",window.te_reto),this.game.desconectado)var y="</br>...el otro se ha pirao"}else d=this.game.hasperdio?"Player2":"Player1";$("#contiene_mandapuntos").show(),$("#mandapuntos").show(),$("#envia_tus_puntos").hide(),$("#inputtunombre").hide(),$("#envia_tu_nombre").hide(),this.resultado_text=this.add.text(this.world.width/2,120,"Ganador: "+d.replace("<br>","")+y,{font:"65px ArcadeClassic",fill:"#eaff02",align:"center"}),this.resultado_text.anchor.setTo(.5,.5),this.resultado_puntos_text=this.add.text(this.world.width/2,200,this.game.puntosPlayer1+" - "+this.game.puntosPlayer2,{font:"65px ArcadeClassic",fill:"#eaff02",align:"center"}),this.resultado_puntos_text.anchor.setTo(.5,.5)}if(this.physics.startSystem(Phaser.Physics.ARCADE),this.ganador=this.add.sprite(32,this.world.height-250,this.game.ganador.key),this.perdedor=this.add.sprite(this.world.width/2,this.world.height-250,this.game.perdedor.key),this.ganador.anchor.setTo(.5,.5),this.perdedor.anchor.setTo(.5,.5),this.physics.arcade.enable(this.ganador),this.physics.arcade.enable(this.perdedor),this.ganador.body.bounce.y=0,this.ganador.body.gravity.y=800,this.ganador.body.collideWorldBounds=!0,this.perdedor.body.bounce.y=0,this.perdedor.body.gravity.y=800,this.perdedor.body.collideWorldBounds=!0,this.pelota=this.add.sprite(300,this.world.height-130,"pelota"),this.pelota.anchor.setTo(.5,.5),this.pelota.angle=Math.floor(180*Math.random()+1),this.explota=this.add.sprite(300,this.world.height-150,"explota"),this.ganador.animations.add("semueve",[0,1],7,!0),this.perdedor.animations.add("semueve2",[0,1],7,!0),this.ganador.animations.add("senfada",[2,3],7,!0),this.perdedor.animations.add("senfada2",[2,3],7,!0),window.twitter_img){var p=this.game;window.setTimeout(function(){var e=p.canvas.toDataURL(),t={imagen:e,usuario:window.twitter_name,puntos1:p.puntosPlayer1,puntos2:p.puntosPlayer2};$.post("sube_img_tw.php",t).done(function(e){var t=this.cache.getImage("volver_a_jugar");this.play_again=this.add.sprite(this.world.centerX-t.width/2,470,"volver_a_jugar"),this.play_again.inputEnabled=!0,this.play_again.input.sprite.events.onInputDown.add(this.empieza,this)})},3e3)}else{var c=this.cache.getImage("volver_a_jugar");this.play_again=this.add.sprite(this.world.centerX-c.width/2,470,"volver_a_jugar"),this.play_again.inputEnabled=!0,this.play_again.input.sprite.events.onInputDown.add(this.empieza,this)}},update:function(){this.ganador.body.x>=this.world.width-180&&(this.ganador.body.velocity.x=-150),this.ganador.body.x<=140&&(this.ganador.body.velocity.x=150),this.ganador.animations.play("semueve"),this.perdedor.animations.play("senfada"),this.perdedor.body.rotation=90,this.ganador.body.y>this.world.height-190&&(this.ganador.body.velocity.y=-550),this.perdedor.body.y>this.world.height-180&&(this.perdedor.body.velocity.y=0,this.perdedor.body.y=this.world.height-180),(SUPERPIKA.isDown||SUPERPIKA2.isDown)&&this.state.start("Preloader")},empieza:function(){window.location="http://www.dudevolley.com"}};var Player=function(e,t,i,o,a){this.eljuego=e,a?this.tipo=a:this.tipo=1,console.log(this.tipo),"cpu"===t||"cpu_chick"===t?(this.sprite=e.add.sprite(e.world.width-52,e.world.height-250,t),this.sprite.animations.add("senfada",[0],5,!0),this.sprite.animations.add("semueve",[2,3],7,!0),this.sprite.animations.add("salta",[1],5,!0),this.sprite.limiteIzquierda=470,this.sprite.limiteDerecha=800,this.soyplayer1=!1,this.frameParao=3):(this.sprite=e.add.sprite(32,e.world.height-250,t),this.sprite.animations.add("semueve",[0,1],7,!0),this.sprite.animations.add("senfada",[3],5,!0),this.sprite.animations.add("salta",[2],5,!0),this.sprite.limiteIzquierda=0,i?this.sprite.limiteDerecha=e.world.width:this.sprite.limiteDerecha=330,this.soyplayer1=!0,this.frameParao=0),o&&(this.id=o),e.physics.arcade.enable(this.sprite),this.sprite.anchor.setTo(.5,.5),this.sprite.body.bounce.y=0,this.sprite.body.gravity.y=800,this.sprite.body.collideWorldBounds=!0,this.sprite.enfadao=!1,this.sprite.enfadaoTime=e.time.now,this.sprite.tiempoGorrino=e.time.now,this.sprite.haceGorrino=!1,this.sprite.frame=1,1==this.tipo&&(this.velocidad_andando=150,this.velocidad_gorrino=400,this.velocidad_saltando=550,this.colide_time=100,this.gravedad_rebote_normal=900,this.velocidad_rebote_normal=-600,this.velocidad_lateral1=800,this.velocidad_lateral_mate=1e3,this.velocidad_lateral3=300,this.velocidad_vertical1=700,this.velocidad_vertical_mate=800,this.velocidad_vertical_dejada=-100,this.velocidad_vertical_arriba=-1e3,this.gravedad_pika1=1500,this.gravedad_pika2=1400,this.gravedad_pika3=1400,this.espera_saltar_maquina=300),2==this.tipo&&(this.velocidad_andando=200,this.velocidad_gorrino=500,this.velocidad_saltando=640,this.colide_time=100,this.gravedad_rebote_normal=900,this.velocidad_rebote_normal=-700,this.velocidad_lateral1=700,this.velocidad_lateral_mate=1e3,this.velocidad_lateral3=300,this.velocidad_vertical1=600,this.velocidad_vertical_mate=1200,this.velocidad_vertical_dejada=-100,this.velocidad_vertical_arriba=-1e3,this.gravedad_pika1=1500,this.gravedad_pika2=1400,this.gravedad_pika3=1800,this.espera_saltar_maquina=500),this.mueve=function(t){this.sprite.haceGorrino?"izquierda"==t&&this.sprite.body.touching.down&&!this.sprite.paraGorrino?(this.sprite.position.x>this.sprite.limiteIzquierda?this.sprite.body.velocity.x=-this.velocidad_gorrino:this.sprite.body.velocity.x=0,this.sprite.rotation=-90,this.sprite.paraGorrino=!0):"derecha"==t&&this.sprite.body.touching.down&&!this.sprite.paraGorrino&&(this.sprite.position.x<this.sprite.limiteDerecha?this.sprite.body.velocity.x=this.velocidad_gorrino:this.sprite.body.velocity.x=0,this.sprite.rotation=90,this.sprite.paraGorrino=!0):("izquierda"==t?(e.time.now>this.sprite.enfadaoTime&&(this.sprite.body.touching.down?this.sprite.animations.play("semueve"):this.sprite.animations.play("salta")),this.sprite.position.x>this.sprite.limiteIzquierda?this.sprite.body.velocity.x=-this.velocidad_andando:this.sprite.body.velocity.x=0):"derecha"==t?(e.time.now>this.sprite.enfadaoTime&&(this.sprite.body.touching.down?this.sprite.animations.play("semueve"):this.sprite.animations.play("salta")),this.sprite.position.x<this.sprite.limiteDerecha?this.sprite.body.velocity.x=this.velocidad_andando:this.sprite.body.velocity.x=0):"parao"==t&&e.time.now>this.sprite.enfadaoTime&&(this.sprite.animations.stop(),this.sprite.body.velocity.x=0,this.sprite.frame=this.frameParao),"arriba"==t&&!this.sprite.haceGorrino&&this.sprite.body.touching.down&&(this.sprite.body.velocity.y=-this.velocidad_saltando,this.sprite.salta=!0,this.sprite.animations.play("salta")))},this.procesa_movimientos_maquina=function(e){x=e.pelota.body.position.x,H=(e.pelota.body.position.y-(e.world.height-185))*-1,Vx=e.pelota.body.velocity.x,Vy=e.pelota.body.velocity.y,0==e.game.level?(cuantocorre=135,cuanto_salta=-550,cuantocorreGorrino=300,cuantoTiempoEnfadao=700,cuantoTiempoGorrino=300):1==e.game.level?(cuantocorre=125,cuanto_salta=-550,cuantocorreGorrino=300,cuantoTiempoEnfadao=700,cuantoTiempoGorrino=300):2==e.game.level&&(1==this.tipo&&(cuantocorre=135,cuanto_salta=-550,cuantocorreGorrino=300),2==this.tipo&&(cuantocorre=175,cuanto_salta=-640,cuantocorreGorrino=400),cuantoTiempoEnfadao=800,cuantoTiempoGorrino=300),Vy<0&&(Vy*=-1,e.dondecae=x+Vx/e.pelota.body.gravity.y*Math.sqrt(2*e.pelota.body.gravity.y*H+Vx),e.dondecae>e.world.width?e.dondecae=e.world.width-(e.dondecae-e.world.width):e.dondecae<0&&(e.dondecae=-e.dondecae)),e.dondecae>e.world.width/2-50?(e.dondecae<this.sprite.position.x&&!this.sprite.haceGorrino&&this.sprite.position.x>this.sprite.limiteIzquierda?(this.sprite.body.velocity.x=-cuantocorre,e.time.now>this.sprite.enfadaoTime&&0!=this.sprite.body.velocity.x&&this.sprite.animations.play("semueve")):this.sprite.haceGorrino||(this.sprite.body.velocity.x=cuantocorre,e.time.now>this.sprite.enfadaoTime&&0!=this.sprite.body.velocity.x&&this.sprite.animations.play("semueve")),e.dondecae-this.sprite.position.x<70&&x>e.world.width/2&&this.sprite.position.y>e.world.height-200&&Vx<120&&Vx>-120&&e.pelota.position.y<e.world.height-this.espera_saltar_maquina&&(this.sprite.body.velocity.y=cuanto_salta,this.sprite.enfadao=!0,this.sprite.animations.play("senfada"),this.sprite.enfadaoTime=e.time.now+cuantoTiempoEnfadao)):(e.cincoMovimientos=++e.cincoMovimientos%60,e.cincoMovimientos>58?(ale=Math.random(),ale>.9&&this.sprite.position.y>e.world.height-200&&(this.sprite.body.velocity.y=-cuanto_salta),ale>.5&&this.sprite.body.position.x>440?this.sprite.body.velocity.x=-100:ale<.5&&(this.sprite.body.velocity.x=100),e.dondeVaCpu=this.sprite.body.velocity.x):this.sprite.body.velocity.x=e.dondeVaCpu,this.sprite.animations.play("semueve")),0!=e.game.level&&H<200&&this.sprite.body.touching.down&&(e.dondecae<this.sprite.position.x&&this.sprite.position.x>this.sprite.limiteIzquierda?this.sprite.position.x-e.dondecae>130&&x>440&&!this.sprite.haceGorrino&&(this.sprite.body.velocity.x=-cuantocorreGorrino,this.sprite.body.rotation=-90,this.sprite.tiempoGorrino=e.time.now+cuantoTiempoGorrino,this.sprite.haceGorrino=!0):e.dondecae-this.sprite.position.x>130&&x>440&&!this.sprite.haceGorrino&&(this.sprite.body.velocity.x=cuantocorreGorrino,this.sprite.body.rotation=90,this.sprite.tiempoGorrino=e.time.now+cuantoTiempoGorrino,this.sprite.haceGorrino=!0))},this.rebote=function(e){if(e.punto)return e.esperaCollide1=e.time.now+1500,!0;e.esperaCollide1=e.time.now+this.colide_time,e.pelota.body.gravity.y=this.gravedad_rebote_normal,e.pelota.body.velocity.y=this.velocidad_rebote_normal;var t=e.pelota.body.position.x,i=Player1.sprite.body.position.x,o=t-i,a=(e.pelota.body.velocity.x,e.pelota.body.velocity.y);e.pelota.body.velocity.x=3*o,e.time.now<Player1.sprite.enfadaoTime&&Player1.sprite.enfadao&&((DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&!ABAJO.isDown||(e.muevederecha||e.mueveizquierda)&&!e.muevearriba&&!e.mueveabajo?(e.pelota.body.velocity.y=.3*a,e.pelota.body.velocity.x=this.velocidad_lateral1,e.pelota.body.gravity.y=this.gravedad_pika1):DERECHA.isDown&&ARRIBA.isDown&&!ABAJO.isDown||e.muevederecha&&e.muevearriba&&!e.mueveabajo?(e.pelota.body.velocity.y=-this.velocidad_vertical1,e.pelota.body.velocity.x=this.velocidad_lateral1,e.pelota.body.gravity.y=this.gravedad_pika2):IZQUIERDA.isDown&&ARRIBA.isDown&&!ABAJO.isDown||e.mueveizquierda&&e.muevearriba&&!e.mueveabajo?(e.pelota.body.velocity.y=-this.velocidad_vertical1,e.pelota.body.velocity.x=-this.velocidad_lateral1,e.pelota.body.gravity.y=this.gravedad_pika2):(DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&ABAJO.isDown||(e.mueveizquierda||e.muevederecha)&&!e.muevearriba&&e.mueveabajo?(e.pelota.body.velocity.y=this.velocidad_vertical_mate,e.pelota.body.velocity.x=this.velocidad_lateral_mate,e.pelota.body.gravity.y=this.gravedad_pika3):!DERECHA.isDown&&!IZQUIERDA.isDown&&!ARRIBA.isDown&&ABAJO.isDown||!e.muevederecha&&!e.mueveizquierda&&!e.muevearriba&&e.mueveabajo?(e.pelota.body.velocity.y=this.velocidad_vertical_mate,e.pelota.body.velocity.x=this.velocidad_lateral3,e.pelota.body.gravity.y=this.gravedad_pika2):DERECHA.isDown||IZQUIERDA.isDown||ARRIBA.isDown||ABAJO.isDown||e.muevederecha||e.mueveizquierda||e.muevearriba||e.mueveabajo?(DERECHA.isDown||IZQUIERDA.isDown||!ARRIBA.isDown||ABAJO.isDown)&&(e.muevederecha||e.mueveizquierda||!e.muevearriba||e.mueveabajo)||(e.pelota.body.velocity.y=this.velocidad_vertical_arriba,e.pelota.body.velocity.x=this.velocidad_lateral3,e.pelota.body.gravity.y=this.gravedad_pika2):(e.pelota.body.velocity.y=this.velocidad_vertical_dejada,e.pelota.body.velocity.x=this.velocidad_lateral3,e.pelota.body.gravity.y=this.gravedad_pika2))},this.rebote_CPU=function(e){if(e.punto)return e.esperaCollide2=e.time.now+1500,!0;e.esperaCollide2=e.time.now+100,0==e.game.level?(e.factorFacilidadX=.6,e.factorFacilidadY=.8):1==e.game.level?(e.factorFacilidadX=.9,e.factorFacilidadY=.9):2==e.game.level&&(e.factorFacilidadX=1,e.factorFacilidadY=1),e.pelota.body.gravity.y=this.gravedad_rebote_normal,e.pelota.body.velocity.y=this.velocidad_rebote_normal;var t=e.pelota.body.position.x,i=this.sprite.body.position.x,o=t-i,a=(e.pelota.body.velocity.x,e.pelota.body.velocity.y);e.pelota.body.velocity.x=3*o,e.time.now<this.sprite.enfadaoTime&&this.sprite.enfadao&&(i-e.world.width/2<110&&2==this.tipo&&Math.random()>.3?(e.pelota.body.velocity.y=this.velocidad_vertical_mate,e.pelota.body.velocity.x=-this.velocidad_lateral_mate,e.pelota.body.gravity.y=this.gravedad_pika3):(quehago=Math.floor(4*Math.random()),this.sprite.position.x>450&3==quehago&&(quehago=Math.floor(3*Math.random())),0==quehago?(e.pelota.body.velocity.y=.3*a,e.pelota.body.velocity.x=-this.velocidad_lateral1*e.factorFacilidadX,e.pelota.body.gravity.y=this.gravedad_pika1*e.factorFacilidadX):1==quehago?(e.pelota.body.velocity.y=-this.velocidad_vertical1*e.factorFacilidadY,e.pelota.body.velocity.x=this.velocidad_lateral1*e.factorFacilidadX,e.pelota.body.gravity.y=this.gravedad_pika2*e.factorFacilidadX):2==quehago?(e.pelota.body.velocity.y=-this.velocidad_vertical1*e.factorFacilidadY,e.pelota.body.velocity.x=-this.velocidad_lateral1*e.factorFacilidadX,e.pelota.body.gravity.y=this.gravedad_pika2*e.factorFacilidadX):3==quehago&&(e.pelota.body.velocity.y=this.velocidad_vertical_mate*e.factorFacilidadY,e.pelota.body.velocity.x=-1e3*e.factorFacilidadX,e.pelota.body.gravity.y=this.gravedad_pika2*e.factorFacilidadX)))}},Joystick=function(e,t,i){function o(){this.isBeingDragged=!0,this.disabled||this.holder.events.onDown.dispatch()}function a(){this.isBeingDragged=!1,this.dragger.position.setTo(0,0),this.pin.position.setTo(0,0),this.disabled||this.holder.events.onUp.dispatch(this.direction,this.distance,this.angle)}this.pin=e.add.sprite(0,0,"joy_front"),this.holder=e.add.sprite(0,0,"joy_back"),this.holder.anchor.setTo(.5,.5),this.holder.fixedToCamera=!0,this.holder.cameraOffset.setTo(t,i),this.holder.direction=new Phaser.Point(0,0),this.holder.distance=0,this.holder.pinAngle=0,this.holder.disabled=!1,this.holder.isBeingDragged=!1,this.holder.events.onDown=new Phaser.Signal,this.holder.events.onUp=new Phaser.Signal,this.holder.events.onMove=new Phaser.Signal,this.pin.anchor.setTo(.5,.5),this.holder.addChild(this.pin);var s=this.dragger=e.add.sprite(0,0,"null");s.anchor.setTo(.5,.5),s.width=s.height=181,s.inputEnabled=!0,s.input.enableDrag(!0),s.events.onDragStart.add(o,this),s.events.onDragStop.add(a,this),s.alpha=0,this.holder.addChild(s),this.enable=function(){this.disabled=!1},this.disable=function(){this.disabled=!0},this.update=function(){if(this.isBeingDragged){var e=this.dragger.position,t=this.pin.position,i=new Phaser.Point(0,0),o=this.pinAngle=i.angle(e),a=this.distance=e.getMagnitude(),s=Phaser.Point.normalize,r=s(e,this.direction);if(t.copyFrom(e),a>80&&t.setMagnitude(80),this.disabled)return;this.holder.events.onMove.dispatch(r,a,o)}}};