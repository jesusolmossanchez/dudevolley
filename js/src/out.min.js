var DudeVolley={};DudeVolley.Boot=function(a){};DudeVolley.Boot.prototype={init:function(){ga("send","pageview","/Boot");this.stage.disableVisibilityChange=true;if(this.game.device.desktop){this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;this.scale.maxHeight=$(window).height();this.scale.maxWidth=800*this.scale.maxHeight/685}else{window.onresize=this.rescale.bind(this);this.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL;this.scale.maxHeight=$(window).height();this.scale.maxWidth=800*$(window).height()/685}},preload:function(){this.load.image("titulo","assets/dude_volley_title.png");this.load.image("preloaderBar","assets/cargando_dude.png")},create:function(){this.state.start("Preloader")},rescale:function(){this.scale.setShowAll();this.scale.maxHeight=$(window).height();this.scale.maxWidth=800*this.scale.maxHeight/685},};DudeVolley.Entrenamiento=function(a){};DudeVolley.Entrenamiento.prototype={preload:function(){this.tip1=this.add.sprite(20,20,"tip1");this.tip2=this.add.sprite(220,20,"tip2");this.tip3=this.add.sprite(420,20,"tip3");this.tip4=this.add.sprite(620,20,"tip4");this.tip1.alpha=0.5;this.tip2.alpha=0.5;this.tip3.alpha=0.5;this.tip4.alpha=0.5;this.volver=this.add.sprite(650,220,"volver");this.volver.inputEnabled=true;this.volver.input.sprite.events.onInputDown.add(this.volver_a_jugar,this)},init:function(){ga("send","pageview","/Entrenamiento");this.physics.startSystem(Phaser.Physics.ARCADE);this.add.sprite(0,0,"sky");platforms=this.add.group();platforms.enableBody=true;var a=platforms.create(0,this.world.height-134,"ground");a.scale.setTo(2,2);a.body.immovable=true;this.pelota=this.add.sprite(32,0,"pelota");this.pelota.anchor.setTo(0.5,0.5);this.physics.arcade.enable(this.pelota);this.pelota.body.gravity.y=0;this.pelota.body.bounce.y=0.9;this.pelota.body.bounce.x=0.9;this.pelota.body.gravity.y=900;this.pelota.body.collideWorldBounds=true;this.pelota.body.mass=0.15;Player1=new Player(this.game,"player1",true);this.game.level=2;this.esperaCollide1=this.time.now;if(!this.game.device.desktop){this.joy=new Joystick(this.game,120,this.world.height-100);this.movil_accion=this.add.sprite(this.world.width-100,this.world.height-100,"pika");this.movil_accion.anchor.setTo(0.5,0.5);this.movil_accion.inputEnabled=true;this.movil_accion.input.sprite.events.onInputDown.add(this.entra_movil_accion,this);this.movil_accion.input.sprite.events.onInputUp.add(this.sal_movil_accion,this)}this.mueveizquierda=false;this.muevederecha=false;this.muevearriba=false;this.mueveabajo=false;cursors=this.input.keyboard.createCursorKeys();PAUSE=this.input.keyboard.addKey(Phaser.Keyboard.ESC);ARRIBA=cursors.up;ABAJO=cursors.down;IZQUIERDA=cursors.left;DERECHA=cursors.right;SUPERPIKA=this.input.keyboard.addKey(Phaser.Keyboard.L);SUPERPIKA2=this.input.keyboard.addKey(Phaser.Keyboard.Z);this.enpausa=false;window.onkeydown=function(){if(this.PAUSE.game.input.keyboard.event.keyCode==27){this.PAUSE.game.paused=!this.PAUSE.game.paused}}},entra_movil_accion:function(){this.click_accion=true},sal_movil_accion:function(){this.click_accion=false},update:function(){if(Player1.sprite.body.y>this.world.height-250){Player1.sprite.salta=false;this.tip2.alpha=0.5;this.tip4.alpha=0.5}if(this.time.now>this.esperaCollide1){this.physics.arcade.collide(this.pelota,Player1.sprite,this.rebote,null,this)}this.physics.arcade.collide(this.pelota,platforms);this.physics.arcade.collide(Player1.sprite,platforms);this.pelota.angle+=this.pelota.body.velocity.x/20;if(this.time.now>(Player1.sprite.tiempoGorrino-100)){Player1.sprite.body.rotation=0;Player1.sprite.haceGorrino=false;this.tip3.alpha=0.5}if(this.time.now>(Player1.sprite.tiempoGorrino+100)){Player1.sprite.paraGorrino=false}if(this.time.now>Player1.sprite.enfadaoTime){Player1.sprite.enfadao=false}if(SUPERPIKA.isDown||SUPERPIKA2.isDown||this.click_accion){if(!Player1.sprite.body.touching.down&&!Player1.sprite.paraGorrino){Player1.sprite.enfadao=true;Player1.sprite.animations.play("senfada");Player1.sprite.enfadaoTime=this.time.now+500}else{if(!Player1.sprite.paraGorrino){Player1.sprite.haceGorrino=true;Player1.sprite.tiempoGorrino=this.time.now+400}}}if(this.game.device.desktop){if(IZQUIERDA.isDown){Player1.mueve("izquierda");if(this.time.now<(Player1.sprite.tiempoGorrino-100)){this.tip3.alpha=1}else{this.tip1.alpha=1}}else{if(DERECHA.isDown){Player1.mueve("derecha");if(this.time.now<(Player1.sprite.tiempoGorrino-100)){this.tip3.alpha=1}else{this.tip1.alpha=1}}else{Player1.mueve("parao");this.tip1.alpha=0.5}}if(ARRIBA.isDown){Player1.mueve("arriba");this.tip2.alpha=1}if(ABAJO.isDown){}}else{this.joy.update();this.joy.holder.events.onMove.add(this.procesaDragg,this);this.joy.holder.events.onUp.add(this.paraDragg,this)}},quitGame:function(a){this.state.start("MainMenu")},paraDragg:function(a){Player1.mueve("parao");this.mueveizquierda=false;this.muevederecha=false;this.muevearriba=false;this.mueveabajo=false},procesaDragg:function(b,e,d){var c=d*180/Math.PI;if(e<30){Player1.mueve("parao");this.mueveizquierda=false;this.muevederecha=false;this.muevearriba=false;this.mueveabajo=false;return}if(c>-90&&c<90){Player1.mueve("derecha");this.mueveizquierda=false;this.muevederecha=true}if(c>90||c<-90){Player1.mueve("izquierda");this.mueveizquierda=true;this.muevederecha=false}if(c>-135&&c<-45){Player1.mueve("arriba");this.muevearriba=true}else{this.muevearriba=false}if(c<135&&c>45){this.mueveabajo=true}else{this.mueveabajo=false}},rebote:function(){if(this.pelota.body.position.y>(Player1.sprite.body.position.y+60)){return true}this.esperaCollide1=this.time.now+100;if((this.pelota.body.position.y>450)){this.pelota.body.velocity.y=-600}this.pelota.body.gravity.y=900;this.pelota.body.velocity.y=-600;var e=this.pelota.body.position.x;var c=Player1.sprite.body.position.x;var d=e-c;var a=this.pelota.body.velocity.x;var b=this.pelota.body.velocity.y;this.pelota.body.velocity.x=d*3;if(this.time.now<Player1.sprite.enfadaoTime&&Player1.sprite.enfadao){this.tip4.alpha=1;if(((DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&!ABAJO.isDown)||((this.muevederecha||this.mueveizquierda)&&!this.muevearriba&&!this.mueveabajo)){this.pelota.body.velocity.y=b*0.3;this.pelota.body.velocity.x=800;this.pelota.body.gravity.y=1500}else{if((DERECHA.isDown&&ARRIBA.isDown&&!ABAJO.isDown)||(this.muevederecha&&this.muevearriba&&!this.mueveabajo)){this.pelota.body.velocity.y=-800;this.pelota.body.velocity.x=800;this.pelota.body.gravity.y=1400}else{if((IZQUIERDA.isDown&&ARRIBA.isDown&&!ABAJO.isDown)||(this.mueveizquierda&&this.muevearriba&&!this.mueveabajo)){this.pelota.body.velocity.y=-800;this.pelota.body.velocity.x=-800;this.pelota.body.gravity.y=1400}else{if(((DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&ABAJO.isDown)||((this.mueveizquierda||this.muevederecha)&&!this.muevearriba&&this.mueveabajo)){this.pelota.body.velocity.y=800;this.pelota.body.velocity.x=1000;this.pelota.body.gravity.y=1400}else{if((!DERECHA.isDown&&!IZQUIERDA.isDown&&!ARRIBA.isDown&&ABAJO.isDown)||(!this.muevederecha&&!this.mueveizquierda&&!this.muevearriba&&this.mueveabajo)){this.pelota.body.velocity.y=800;this.pelota.body.velocity.x=300;this.pelota.body.gravity.y=1400}else{if((!DERECHA.isDown&&!IZQUIERDA.isDown&&!ARRIBA.isDown&&!ABAJO.isDown)&&(!this.muevederecha&&!this.mueveizquierda&&!this.muevearriba&&!this.mueveabajo)){this.pelota.body.velocity.y=-100;this.pelota.body.velocity.x=300;this.pelota.body.gravity.y=1400}else{if((!DERECHA.isDown&&!IZQUIERDA.isDown&&ARRIBA.isDown&&!ABAJO.isDown)||(!this.muevederecha&&!this.mueveizquierda&&this.muevearriba&&!this.mueveabajo)){this.pelota.body.velocity.y=-1000;this.pelota.body.velocity.x=300;this.pelota.body.gravity.y=1400}}}}}}}}},volver_a_jugar:function(){location.reload()}};DudeVolley.GameOnePlayer=function(a){};DudeVolley.GameOnePlayer.prototype={init:function(){ga("send","pageview","/GameOnePlayer");this.physics.startSystem(Phaser.Physics.ARCADE);this.add.sprite(0,0,"sky");platforms=this.add.group();platforms.enableBody=true;var a=platforms.create(0,this.world.height-134,"ground");a.scale.setTo(2,2);a.body.immovable=true;var b=platforms.create(390,this.world.height-320,"red");b.body.immovable=true;this.pelota=this.add.sprite(32,0,"pelota");this.pelota.anchor.setTo(0.5,0.5);this.physics.arcade.enable(this.pelota);this.pelota.body.bounce.y=0.9;this.pelota.body.bounce.x=0.9;this.pelota.body.gravity.y=900;this.pelota.body.collideWorldBounds=true;this.pelota.body.mass=0.15;this.sombra1=this.add.sprite(32,this.world.height-200,"sombra");this.sombra_pelota=this.add.sprite(32,this.world.height-200,"sombra");this.sombra2=this.add.sprite(this.world.width-52,this.world.height-200,"sombra");this.sombra1.alpha=0.5;this.sombra2.alpha=0.5;this.sombra_pelota.alpha=0.2;Player1=new Player(this.game,"player1",false);PlayerCPU=new Player(this.game,"cpu",false);this.game.level=2;this.game.hasperdio=false;this.game.unplayer=true;this.game.empieza=this.time.now;this.scoreText1=this.add.text(16,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"});this.scoreText2=this.add.text(this.world.width-16,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"});this.scoreText2.anchor.x=1;this.game.puntosPlayer1=0;this.game.puntosPlayer2=0;this.esperaCollide1=this.time.now;this.esperaCollide2=this.time.now;this.cincoMovimientos=0;this.dondeVaCpu=-100;if(!this.game.device.desktop){this.joy=new Joystick(this.game,120,this.world.height-100);this.movil_accion=this.add.sprite(this.world.width-100,this.world.height-100,"pika");this.movil_accion.anchor.setTo(0.5,0.5);this.movil_accion.inputEnabled=true;this.movil_accion.input.sprite.events.onInputDown.add(this.entra_movil_accion,this);this.movil_accion.input.sprite.events.onInputUp.add(this.sal_movil_accion,this)}cursors=this.input.keyboard.createCursorKeys();ARRIBA=cursors.up;ABAJO=cursors.down;IZQUIERDA=cursors.left;DERECHA=cursors.right;SUPERPIKA=this.input.keyboard.addKey(Phaser.Keyboard.L);SUPERPIKA2=this.input.keyboard.addKey(Phaser.Keyboard.Z);PAUSE=this.input.keyboard.addKey(Phaser.Keyboard.ESC);this.enpausa=false;window.onkeydown=function(){if(this.PAUSE.game.input.keyboard.event.keyCode==27){this.PAUSE.game.paused=!this.PAUSE.game.paused}}},entra_movil_accion:function(){this.click_accion=true},sal_movil_accion:function(){this.click_accion=false},update:function(){this.sombra2.position.set(Player1.sprite.body.position.x,this.world.height-144);this.sombra1.position.set(PlayerCPU.sprite.body.position.x,this.world.height-144);this.sombra_pelota.position.set(this.pelota.body.position.x,this.world.height-144);if(this.time.now>this.esperaCollide1){this.physics.arcade.collide(this.pelota,Player1.sprite,this.rebote,null,this)}if(this.time.now>this.esperaCollide2){this.physics.arcade.collide(this.pelota,PlayerCPU.sprite,this.rebote_CPU,null,this)}this.physics.arcade.collide(this.pelota,platforms);this.physics.arcade.collide(Player1.sprite,platforms);this.physics.arcade.collide(PlayerCPU.sprite,platforms);if(this.punto){this.pelota.angle+=this.pelota.body.velocity.x/20;if(this.time.now>this.enunratico){this.punto=false;this.explota.kill();this.empieza(this.quienEmpieza)}Player1.sprite.body.velocity.x=0}else{if(this.time.now>(PlayerCPU.sprite.tiempoGorrino-100)){PlayerCPU.sprite.body.velocity.x=0;PlayerCPU.sprite.body.rotation=0;PlayerCPU.sprite.haceGorrino=false}if(Player1.sprite.body.y>this.world.height-250){Player1.sprite.salta=false}if(PlayerCPU.sprite.body.y>this.world.height-250){PlayerCPU.sprite.salta=false}this.pelota.angle+=this.pelota.body.velocity.x/20;if(this.time.now>(Player1.sprite.tiempoGorrino-100)){Player1.sprite.body.rotation=0;Player1.sprite.haceGorrino=false;Player1.sprite.body.velocity.x=0}if(this.time.now>(Player1.sprite.tiempoGorrino+100)){Player1.sprite.paraGorrino=false}if(this.time.now>(PlayerCPU.sprite.tiempoGorrino-100)){PlayerCPU.sprite.body.rotation=0;PlayerCPU.sprite.haceGorrino=false}if(this.time.now>(PlayerCPU.sprite.tiempoGorrino+100)){PlayerCPU.sprite.paraGorrino=false}if(SUPERPIKA.isDown||SUPERPIKA2.isDown||this.click_accion){if(!Player1.sprite.body.touching.down&&!Player1.sprite.paraGorrino){Player1.sprite.enfadao=true;Player1.sprite.animations.play("senfada");Player1.sprite.enfadaoTime=this.time.now+500}else{if(!Player1.sprite.paraGorrino){Player1.sprite.haceGorrino=true;Player1.sprite.tiempoGorrino=this.time.now+400}}}if(this.game.device.desktop){if(IZQUIERDA.isDown){Player1.mueve("izquierda")}else{if(DERECHA.isDown){Player1.mueve("derecha")}else{Player1.mueve("parao")}}if(ARRIBA.isDown){Player1.mueve("arriba")}if(ABAJO.isDown){}}else{this.joy.update();this.joy.holder.events.onMove.add(this.procesaDragg,this);this.joy.holder.events.onUp.add(this.paraDragg,this)}this.procesa_movimientos_maquina();if(this.pelota.body.position.y>500){this.procesapunto()}}},procesapunto:function(){this.explota=this.add.sprite(this.pelota.body.position.x,this.pelota.body.position.y+5,"explota");Player1.sprite.body.velocity.y=Player1.sprite.body.velocity.y*0.2;PlayerCPU.sprite.body.velocity.y=PlayerCPU.sprite.body.velocity.y*0.2;Player1.sprite.body.velocity.x=Player1.sprite.body.velocity.x*0.2;PlayerCPU.sprite.body.velocity.x=PlayerCPU.sprite.body.velocity.x*0.2;this.pelota.body.velocity.y=this.pelota.body.velocity.y*0.2;this.pelota.body.velocity.x=this.pelota.body.velocity.x*0.2;this.pelota.body.gravity.y=200;if(this.pelota.body.position.x>390){this.game.puntosPlayer1++;this.scoreText1.text=this.game.puntosPlayer1;this.enunratico=this.time.now+2500;this.quienEmpieza="uno";this.punto=true;if(this.game.puntosPlayer1>=10){this.game.ganador=Player1.sprite;this.game.perdedor=PlayerCPU.sprite;this.state.start("GameOver")}}else{this.game.puntosPlayer2++;this.scoreText2.text=this.game.puntosPlayer2;this.enunratico=this.time.now+2500;this.quienEmpieza="dos";this.punto=true;if(this.game.puntosPlayer2>=10){this.game.hasperdio=true;this.game.perdedor=Player1.sprite;this.game.ganador=PlayerCPU.sprite;this.state.start("GameOver")}}},empieza:function(a){this.dondecae=this.world.width-1;this.pelota.body.gravity.y=900;Player1.sprite.body.position.x=32;Player1.sprite.body.position.y=this.world.height-250;Player1.sprite.body.velocity.x=0;Player1.sprite.body.velocity.y=0;PlayerCPU.sprite.body.position.x=this.world.width-32;PlayerCPU.sprite.body.position.y=this.world.height-250;PlayerCPU.sprite.body.velocity.x=0;PlayerCPU.sprite.body.velocity.y=0;this.pelota.body.position.y=0;this.pelota.body.velocity.x=0;if(a=="uno"){PlayerCPU.sprite.body.position.x=this.world.width-150;this.pelota.body.position.x=10}else{this.pelota.body.position.x=this.world.width-32}},quitGame:function(a){this.state.start("MainMenu")},paraDragg:function(a){Player1.mueve("parao");this.mueveizquierda=false;this.muevederecha=false;this.muevearriba=false;this.mueveabajo=false},procesaDragg:function(b,e,d){var c=d*180/Math.PI;if(e<30){Player1.mueve("parao");this.mueveizquierda=false;this.muevederecha=false;this.muevearriba=false;this.mueveabajo=false;return}if(c>-90&&c<90){Player1.mueve("derecha");this.mueveizquierda=false;this.muevederecha=true}if(c>90||c<-90){Player1.mueve("izquierda");this.mueveizquierda=true;this.muevederecha=false}if(c>-135&&c<-45){Player1.mueve("arriba");this.muevearriba=true}else{this.muevearriba=false}if(c<135&&c>45){this.mueveabajo=true}else{this.mueveabajo=false}},rebote:function(){if(this.punto){this.esperaCollide1=this.time.now+2500;return true}this.esperaCollide1=this.time.now+100;this.pelota.body.gravity.y=900;this.pelota.body.velocity.y=-600;var e=this.pelota.body.position.x;var c=Player1.sprite.body.position.x;var d=e-c;var a=this.pelota.body.velocity.x;var b=this.pelota.body.velocity.y;this.pelota.body.velocity.x=d*3;if(this.time.now<Player1.sprite.enfadaoTime&&Player1.sprite.enfadao){if(((DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&!ABAJO.isDown)||((this.muevederecha||this.mueveizquierda)&&!this.muevearriba&&!this.mueveabajo)){this.pelota.body.velocity.y=b*0.3;this.pelota.body.velocity.x=800;this.pelota.body.gravity.y=1500}else{if((DERECHA.isDown&&ARRIBA.isDown&&!ABAJO.isDown)||(this.muevederecha&&this.muevearriba&&!this.mueveabajo)){this.pelota.body.velocity.y=-700;this.pelota.body.velocity.x=800;this.pelota.body.gravity.y=1400}else{if((IZQUIERDA.isDown&&ARRIBA.isDown&&!ABAJO.isDown)||(this.mueveizquierda&&this.muevearriba&&!this.mueveabajo)){this.pelota.body.velocity.y=-700;this.pelota.body.velocity.x=-800;this.pelota.body.gravity.y=1400}else{if(((DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&ABAJO.isDown)||((this.mueveizquierda||this.muevederecha)&&!this.muevearriba&&this.mueveabajo)){this.pelota.body.velocity.y=800;this.pelota.body.velocity.x=1000;this.pelota.body.gravity.y=1400}else{if((!DERECHA.isDown&&!IZQUIERDA.isDown&&!ARRIBA.isDown&&ABAJO.isDown)||(!this.muevederecha&&!this.mueveizquierda&&!this.muevearriba&&this.mueveabajo)){this.pelota.body.velocity.y=800;this.pelota.body.velocity.x=300;this.pelota.body.gravity.y=1400}else{if((!DERECHA.isDown&&!IZQUIERDA.isDown&&!ARRIBA.isDown&&!ABAJO.isDown)&&(!this.muevederecha&&!this.mueveizquierda&&!this.muevearriba&&!this.mueveabajo)){this.pelota.body.velocity.y=-100;this.pelota.body.velocity.x=300;this.pelota.body.gravity.y=1400}else{if((!DERECHA.isDown&&!IZQUIERDA.isDown&&ARRIBA.isDown&&!ABAJO.isDown)||(!this.muevederecha&&!this.mueveizquierda&&this.muevearriba&&!this.mueveabajo)){this.pelota.body.velocity.y=-1000;this.pelota.body.velocity.x=300;this.pelota.body.gravity.y=1400}}}}}}}}},rebote_CPU:function(){if(this.punto){this.esperaCollide2=this.time.now+2500;return true}this.esperaCollide2=this.time.now+100;if(this.game.level==0){this.factorFacilidadX=0.6;this.factorFacilidadY=0.8}else{if(this.game.level==1){this.factorFacilidadX=0.9;this.factorFacilidadY=0.9}else{if(this.game.level==2){this.factorFacilidadX=1;this.factorFacilidadY=1}}}this.pelota.body.gravity.y=900;this.pelota.body.velocity.y=-600;var e=this.pelota.body.position.x;var c=PlayerCPU.sprite.body.position.x;var d=e-c;var a=this.pelota.body.velocity.x;var b=this.pelota.body.velocity.y;this.pelota.body.velocity.x=d*3;if(this.time.now<PlayerCPU.sprite.enfadaoTime&&PlayerCPU.sprite.enfadao){quehago=Math.floor(Math.random()*4);if(PlayerCPU.sprite.position.x>450&quehago==3){quehago=Math.floor(Math.random()*3)}if(quehago==0){this.pelota.body.velocity.y=b*0.3;this.pelota.body.velocity.x=-800*this.factorFacilidadX;this.pelota.body.gravity.y=1500*this.factorFacilidadX}else{if(quehago==1){this.pelota.body.velocity.y=-700*this.factorFacilidadY;this.pelota.body.velocity.x=800*this.factorFacilidadX;this.pelota.body.gravity.y=1400*this.factorFacilidadX}else{if(quehago==2){this.pelota.body.velocity.y=-700*this.factorFacilidadY;this.pelota.body.velocity.x=-800*this.factorFacilidadX;this.pelota.body.gravity.y=1400*this.factorFacilidadX}else{if(quehago==3){this.pelota.body.velocity.y=800*this.factorFacilidadY;this.pelota.body.velocity.x=-1000*this.factorFacilidadX;this.pelota.body.gravity.y=1400*this.factorFacilidadX}}}}}},procesa_movimientos_maquina:function(){x=this.pelota.body.position.x;y=515;H=(this.pelota.body.position.y-(this.world.height-185))*(-1);Vx=this.pelota.body.velocity.x;Vy=this.pelota.body.velocity.y;if(this.game.level==0){cuantocorre=135;cuantocorreGorrino=300;cuantoTiempoEnfadao=700;cuantoTiempoGorrino=300}else{if(this.game.level==1){cuantocorre=125;cuantocorreGorrino=300;cuantoTiempoEnfadao=700;cuantoTiempoGorrino=300}else{if(this.game.level==2){cuantocorre=135;cuantocorreGorrino=300;cuantoTiempoEnfadao=800;cuantoTiempoGorrino=300}}}if(Vy<0){Vy=Vy*(-1);this.dondecae=x+(Vx)/this.pelota.body.gravity.y*Math.sqrt((2*this.pelota.body.gravity.y*H)+(Vx));if(this.dondecae>800){this.dondecae=800-(this.dondecae-800)}else{if(this.dondecae<0){this.dondecae=-(this.dondecae)}}}else{}if(this.dondecae>360){if(this.dondecae<PlayerCPU.sprite.position.x&&!PlayerCPU.sprite.haceGorrino&&PlayerCPU.sprite.position.x>PlayerCPU.sprite.limiteIzquierda){PlayerCPU.sprite.body.velocity.x=-cuantocorre;if(this.time.now>PlayerCPU.sprite.enfadaoTime&&PlayerCPU.sprite.body.velocity.x!=0){PlayerCPU.sprite.animations.play("semueve")}}else{if(!PlayerCPU.sprite.haceGorrino){PlayerCPU.sprite.body.velocity.x=cuantocorre;if(this.time.now>PlayerCPU.sprite.enfadaoTime&&PlayerCPU.sprite.body.velocity.x!=0){PlayerCPU.sprite.animations.play("semueve")}}}if(this.dondecae-PlayerCPU.sprite.position.x<70&&x>440&&(PlayerCPU.sprite.position.y>this.world.height-200)&&(Vx<120&&Vx>-120)&&(this.pelota.position.y<this.world.height-300)){PlayerCPU.sprite.body.velocity.y=-550;PlayerCPU.sprite.enfadao=true;PlayerCPU.sprite.animations.play("senfada");PlayerCPU.sprite.enfadaoTime=this.time.now+cuantoTiempoEnfadao}}else{this.cincoMovimientos=(++this.cincoMovimientos%60);if(this.cincoMovimientos>58){ale=Math.random();if(ale>0.9&&PlayerCPU.sprite.position.y>this.world.height-200){PlayerCPU.sprite.body.velocity.y=-550}if(ale>0.5&&PlayerCPU.sprite.body.position.x>440){PlayerCPU.sprite.body.velocity.x=-100}else{if(ale<0.5){PlayerCPU.sprite.body.velocity.x=100}}this.dondeVaCpu=PlayerCPU.sprite.body.velocity.x}else{PlayerCPU.sprite.body.velocity.x=this.dondeVaCpu}PlayerCPU.sprite.animations.play("semueve")}if(this.game.level!=0){if(H<200&&PlayerCPU.sprite.body.touching.down){if(this.dondecae<PlayerCPU.sprite.position.x&&PlayerCPU.sprite.position.x>PlayerCPU.sprite.limiteIzquierda){if(PlayerCPU.sprite.position.x-this.dondecae>130&&x>440&&!PlayerCPU.sprite.haceGorrino){PlayerCPU.sprite.body.velocity.x=-cuantocorreGorrino;PlayerCPU.sprite.body.rotation=-90;PlayerCPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino;PlayerCPU.sprite.haceGorrino=true}}else{if(this.dondecae-PlayerCPU.sprite.position.x>130&&x>440&&!PlayerCPU.sprite.haceGorrino){PlayerCPU.sprite.body.velocity.x=cuantocorreGorrino;PlayerCPU.sprite.body.rotation=90;PlayerCPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino;PlayerCPU.sprite.haceGorrino=true}}}}},};DudeVolley.GameTwoPlayer=function(a){};DudeVolley.GameTwoPlayer.prototype={init:function(){ga("send","pageview","/GameTwoPlayer");this.physics.startSystem(Phaser.Physics.ARCADE);this.add.sprite(0,0,"sky");platforms=this.add.group();platforms.enableBody=true;var a=platforms.create(0,this.world.height-134,"ground");a.scale.setTo(2,2);a.body.immovable=true;var b=platforms.create(390,this.world.height-320,"red");b.body.immovable=true;this.pelota=this.add.sprite(32,0,"pelota");this.pelota.anchor.setTo(0.5,0.5);this.physics.arcade.enable(this.pelota);this.pelota.body.gravity.y=0;this.pelota.body.bounce.y=0.9;this.pelota.body.bounce.x=0.9;this.pelota.body.gravity.y=900;this.pelota.body.collideWorldBounds=true;this.pelota.body.mass=0.15;this.sombra1=this.add.sprite(32,this.world.height-200,"sombra");this.sombra_pelota=this.add.sprite(32,this.world.height-200,"sombra");this.sombra2=this.add.sprite(this.world.width-52,this.world.height-200,"sombra");this.sombra1.alpha=0.5;this.sombra2.alpha=0.5;this.sombra_pelota.alpha=0.2;Player1=new Player(this.game,"player1");Player2=new Player(this.game,"cpu");this.game.level=2;this.enunratico=this.time.now;this.quienEmpieza="uno";this.punto=false;this.scoreText1=this.add.text(16,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"});this.scoreText2=this.add.text(this.world.width-16,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"});this.scoreText2.anchor.x=1;this.game.puntosPlayer1=0;this.game.puntosPlayer2=0;this.esperaCollide1=this.time.now;this.esperaCollide2=this.time.now;cursors=this.input.keyboard.createCursorKeys();PAUSE=this.input.keyboard.addKey(Phaser.Keyboard.ESC);ARRIBA2=cursors.up;ABAJO2=cursors.down;IZQUIERDA2=cursors.left;DERECHA2=cursors.right;SUPERPIKA2=this.input.keyboard.addKey(Phaser.Keyboard.L);ARRIBA=this.input.keyboard.addKey(Phaser.Keyboard.R);ABAJO=this.input.keyboard.addKey(Phaser.Keyboard.F);IZQUIERDA=this.input.keyboard.addKey(Phaser.Keyboard.D);DERECHA=this.input.keyboard.addKey(Phaser.Keyboard.G);SUPERPIKA=this.input.keyboard.addKey(Phaser.Keyboard.Z);this.enpausa=false;window.onkeydown=function(){if(this.PAUSE.game.input.keyboard.event.keyCode==27){this.PAUSE.game.paused=!this.PAUSE.game.paused}}},update:function(){this.sombra2.position.set(Player1.sprite.body.position.x,this.world.height-144);this.sombra1.position.set(Player2.sprite.body.position.x,this.world.height-144);this.sombra_pelota.position.set(this.pelota.body.position.x,this.world.height-144);if(this.time.now>this.esperaCollide1){this.physics.arcade.collide(this.pelota,Player1.sprite,this.rebote,null,this)}if(this.time.now>this.esperaCollide2){this.physics.arcade.collide(this.pelota,Player2.sprite,this.rebote2,null,this)}this.physics.arcade.collide(this.pelota,platforms);this.physics.arcade.collide(Player1.sprite,platforms);this.physics.arcade.collide(Player2.sprite,platforms);this.pelota.angle+=this.pelota.body.velocity.x/20;if(this.punto){if(this.time.now>this.enunratico){this.punto=false;this.explota.kill();this.empieza(this.quienEmpieza)}}else{if(Player1.sprite.body.y>this.world.height-250){Player1.sprite.salta=false}if(Player2.sprite.body.y>this.world.height-250){Player2.sprite.salta=false}if(this.time.now>(Player1.sprite.tiempoGorrino-100)){Player1.sprite.body.rotation=0;Player1.sprite.haceGorrino=false}if(this.time.now>(Player1.sprite.tiempoGorrino+100)){Player1.sprite.paraGorrino=false}if(this.time.now>(Player2.sprite.tiempoGorrino-100)){Player2.sprite.body.rotation=0;Player2.sprite.haceGorrino=false}if(this.time.now>(Player2.sprite.tiempoGorrino+100)){Player2.sprite.paraGorrino=false}if(SUPERPIKA.isDown){if(!Player1.sprite.body.touching.down&&!Player1.sprite.paraGorrino){Player1.sprite.enfadao=true;Player1.sprite.animations.play("senfada");Player1.sprite.enfadaoTime=this.time.now+500}else{if(!Player1.sprite.paraGorrino){Player1.sprite.haceGorrino=true;Player1.sprite.tiempoGorrino=this.time.now+400}}}if(SUPERPIKA2.isDown){if(!Player2.sprite.body.touching.down&&!Player2.sprite.paraGorrino){Player2.sprite.enfadao=true;Player2.sprite.animations.play("senfada");Player2.sprite.enfadaoTime=this.time.now+500}else{if(!Player2.sprite.paraGorrino){Player2.sprite.haceGorrino=true;Player2.sprite.tiempoGorrino=this.time.now+400}}}if(IZQUIERDA.isDown){Player1.mueve("izquierda")}else{if(DERECHA.isDown){Player1.mueve("derecha")}else{Player1.mueve("parao")}}if(ARRIBA.isDown){Player1.mueve("arriba")}if(ABAJO.isDown){}if(IZQUIERDA2.isDown){Player2.mueve("izquierda")}else{if(DERECHA2.isDown){Player2.mueve("derecha")}else{Player2.mueve("parao")}}if(ARRIBA2.isDown){Player2.mueve("arriba")}if(ABAJO2.isDown){}if(this.pelota.body.position.y>500){this.procesapunto()}}},quitGame:function(a){this.state.start("MainMenu")},procesapunto:function(){this.explota=this.add.sprite(this.pelota.body.position.x,this.pelota.body.position.y+5,"explota");Player1.sprite.body.velocity.y=Player1.sprite.body.velocity.y*0.2;Player2.sprite.body.velocity.y=Player2.sprite.body.velocity.y*0.2;Player1.sprite.body.velocity.x=Player1.sprite.body.velocity.x*0.2;Player2.sprite.body.velocity.x=Player2.sprite.body.velocity.x*0.2;this.pelota.body.velocity.y=this.pelota.body.velocity.y*0.2;this.pelota.body.velocity.x=this.pelota.body.velocity.x*0.2;this.pelota.body.gravity.y=200;if(this.pelota.body.position.x>390){this.game.puntosPlayer1++;this.scoreText1.text=this.game.puntosPlayer1;if(this.game.puntosPlayer1>=15){this.game.ganador=Player1.sprite;this.game.perdedor=Player2.sprite;this.state.start("GameOver")}this.enunratico=this.time.now+2500;this.quienEmpieza="uno";this.punto=true}else{this.game.puntosPlayer2++;this.scoreText2.text=this.game.puntosPlayer2;if(this.game.puntosPlayer2>=15){this.game.ganador=Player2.sprite;this.game.perdedor=Player1.sprite;this.state.start("GameOver");this.game.hasperdio=true}this.enunratico=this.time.now+2500;this.quienEmpieza="dos";this.punto=true}},empieza:function(a){this.pelota.body.gravity.y=900;Player1.sprite.body.position.x=32;Player1.sprite.body.position.y=this.world.height-250;Player1.sprite.body.velocity.x=0;Player1.sprite.body.velocity.y=0;Player2.sprite.body.position.x=this.world.width-32;Player2.sprite.body.position.y=this.world.height-250;Player2.sprite.body.velocity.x=0;Player2.sprite.body.velocity.y=0;this.pelota.body.position.y=0;this.pelota.body.velocity.x=0;if(a=="uno"){this.pelota.body.position.x=32}else{this.pelota.body.position.x=this.world.width-32}},rebote:function(){if(this.punto){return true}this.esperaCollide1=this.time.now+100;this.pelota.body.gravity.y=900;this.pelota.body.velocity.y=-600;var e=this.pelota.body.position.x;var c=Player1.sprite.body.position.x;var d=e-c;var a=this.pelota.body.velocity.x;var b=this.pelota.body.velocity.y;this.pelota.body.velocity.x=d*3;if(this.time.now<Player1.sprite.enfadaoTime&&Player1.sprite.enfadao){if((DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&!ABAJO.isDown){this.pelota.body.velocity.y=b*0.3;this.pelota.body.velocity.x=800;this.pelota.body.gravity.y=1500}else{if(DERECHA.isDown&&ARRIBA.isDown&&!ABAJO.isDown){this.pelota.body.velocity.y=-800;this.pelota.body.velocity.x=800;this.pelota.body.gravity.y=1400}else{if(IZQUIERDA.isDown&&ARRIBA.isDown&&!ABAJO.isDown){this.pelota.body.velocity.y=-800;this.pelota.body.velocity.x=-800;this.pelota.body.gravity.y=1400}else{if((DERECHA.isDown||IZQUIERDA.isDown)&&!ARRIBA.isDown&&ABAJO.isDown){this.pelota.body.velocity.y=800;this.pelota.body.velocity.x=1000;this.pelota.body.gravity.y=1400}else{if(!DERECHA.isDown&&!IZQUIERDA.isDown&&!ARRIBA.isDown&&ABAJO.isDown){this.pelota.body.velocity.y=800;this.pelota.body.velocity.x=300;this.pelota.body.gravity.y=1400}else{if(!DERECHA.isDown&&!IZQUIERDA.isDown&&!ARRIBA.isDown&&!ABAJO.isDown){this.pelota.body.velocity.y=-100;this.pelota.body.velocity.x=300;this.pelota.body.gravity.y=1400}else{if(!DERECHA.isDown&&!IZQUIERDA.isDown&&ARRIBA.isDown&&!ABAJO.isDown){this.pelota.body.velocity.y=-1000;this.pelota.body.velocity.x=300;this.pelota.body.gravity.y=1400}}}}}}}}},rebote2:function(){if(this.punto){return true}this.esperaCollide2=this.time.now+100;this.pelota.body.gravity.y=900;this.pelota.body.velocity.y=-600;posXPelota=this.pelota.body.position.x;posXPlayer=Player2.sprite.body.position.x;diferencia=posXPelota-posXPlayer;VxPelota=this.pelota.body.velocity.x;VyPelota=this.pelota.body.velocity.y;this.pelota.body.velocity.x=diferencia*3;if(this.time.now<Player2.sprite.enfadaoTime&&Player2.sprite.enfadao){if((DERECHA2.isDown||IZQUIERDA2.isDown)&&!ARRIBA2.isDown&&!ABAJO2.isDown){this.pelota.body.velocity.y=VyPelota*0.3;this.pelota.body.velocity.x=-800;this.pelota.body.gravity.y=1500}else{if(DERECHA2.isDown&&ARRIBA2.isDown&&!ABAJO2.isDown){this.pelota.body.velocity.y=-800;this.pelota.body.velocity.x=-800;this.pelota.body.gravity.y=1400}else{if(IZQUIERDA2.isDown&&ARRIBA2.isDown&&!ABAJO2.isDown){this.pelota.body.velocity.y=-800;this.pelota.body.velocity.x=800;this.pelota.body.gravity.y=1400}else{if((DERECHA2.isDown||IZQUIERDA2.isDown)&&!ARRIBA2.isDown&&ABAJO2.isDown){this.pelota.body.velocity.y=800;this.pelota.body.velocity.x=-1000;this.pelota.body.gravity.y=1400}else{if(!DERECHA2.isDown&&!IZQUIERDA2.isDown&&!ARRIBA2.isDown&&ABAJO2.isDown){this.pelota.body.velocity.y=800;this.pelota.body.velocity.x=-300;this.pelota.body.gravity.y=1400}else{if(!DERECHA2.isDown&&!IZQUIERDA2.isDown&&!ARRIBA2.isDown&&!ABAJO2.isDown){this.pelota.body.velocity.y=-100;this.pelota.body.velocity.x=-300;this.pelota.body.gravity.y=1400}else{if(!DERECHA2.isDown&&!IZQUIERDA2.isDown&&ARRIBA2.isDown&&!ABAJO2.isDown){this.pelota.body.velocity.y=-1000;this.pelota.body.velocity.x=-300;this.pelota.body.gravity.y=1400}}}}}}}}},};DudeVolley.Menu1Player=function(a){this.background=null;this.preloadBar=null;this.ready=false};DudeVolley.Menu1Player.prototype={create:function(){ga("send","pageview","/Menu1Player");var a=this.cache.getImage("titulo_estirado");this.titulo_estirado=this.add.sprite(this.world.centerX-a.width/2,20,"titulo_estirado");this.menu_1player=this.add.sprite(this.world.centerX,300,"menu_1player");this.menu_1player.anchor.setTo(0.5,0.5);this.menu_1player.frame=0;this.cursors=this.input.keyboard.createCursorKeys();L=this.input.keyboard.addKey(Phaser.Keyboard.L);Z=this.input.keyboard.addKey(Phaser.Keyboard.Z);ENTER=this.input.keyboard.addKey(Phaser.Keyboard.ENTER);this.cambia_menu=this.time.now+200;this.movil_jugar=this.add.sprite(this.world.centerX,this.world.height-100,"seleccionar");this.movil_jugar.anchor.setTo(0.5,0.5);this.movil_jugar.inputEnabled=true;this.movil_jugar.input.sprite.events.onInputDown.add(this.empieza_movil,this)},beginSwipe:function(){startX=this.game.input.worldX;startY=this.game.input.worldY;this.game.input.onDown.remove(this.beginSwipe);this.game.input.onUp.add(this.endSwipe,this)},endSwipe:function(){endX=this.game.input.worldX;endY=this.game.input.worldY;var b=startX-endX;var a=startY-endY;if(Math.abs(a)>60){if(a>0){this.muevearriba=true}else{this.mueveabajo=true}}this.game.input.onDown.add(this.beginSwipe);this.game.input.onUp.remove(this.endSwipe)},update:function(){this.game.input.onDown.add(this.beginSwipe,this);if((this.cursors.down.isDown||this.mueveabajo)&&this.cambia_menu<this.time.now){this.mueveabajo=false;this.cambia_menu=this.time.now+200;if(this.menu_1player.frame<1){this.menu_1player.frame++}else{this.menu_1player.frame=0}}if((this.cursors.up.isDown||this.muevearriba)&&this.cambia_menu<this.time.now){this.muevearriba=false;this.cambia_menu=this.time.now+200;if(this.menu_1player.frame==0){this.menu_1player.frame=1}else{this.menu_1player.frame--}}if(L.isDown||Z.isDown||ENTER.isDown){switch(this.menu_1player.frame){case 0:this.game.normalplayer=true;this.juega(false);break;case 1:this.empieza();break}}},empieza:function(a){this.menu_1player.destroy();this.game.normalplayer=false;yomismo=this;$("#subefoto").show();$("#fileToUpload").change(function(){$("#inputsubefoto").submit()});window.sube=0;window.sube2=0;$("#subefoto").on("submit",(function(b){b.preventDefault();if(window.sube<1){window.sube=1;$.ajax({url:"subeajax1.php",type:"POST",data:new FormData(this),contentType:false,cache:false,processData:false,success:function(c){yomismo.movil_jugar.visible=false;$("#subefoto").hide();$("#contiene_foto_subida").show();lo_que_habia=$("#contiene_foto_subida").html();$("#contiene_foto_subida").html(lo_que_habia+c);$("#sube_img_cortada").on("submit",(function(d){d.preventDefault();if(window.sube2<1){window.sube2=1;$.ajax({url:"subeajax2.php",type:"POST",data:new FormData(this),contentType:false,cache:false,processData:false,success:function(e){yomismo.juega(e)}})}}))}})}}))},juega:function(a){$("#contiene_foto_subida").css("display","none");this.game.ruta_jugador=a;this.state.start("PreOnePlayer")},empieza_movil:function(){switch(this.menu_1player.frame){case 0:this.juega(false);this.game.normalplayer=true;break;case 1:this.empieza();break}},};var Player=function(b,c,a,d){if(c==="cpu"){this.sprite=b.add.sprite(b.world.width-52,b.world.height-250,c);this.sprite.animations.add("senfada",[0],5,true);this.sprite.animations.add("semueve",[2,3],7,true);this.sprite.animations.add("salta",[1],5,true);this.sprite.limiteIzquierda=470;this.sprite.limiteDerecha=800;this.soyplayer1=false;this.frameParao=3}else{this.sprite=b.add.sprite(32,b.world.height-250,c);this.sprite.animations.add("semueve",[0,1],7,true);this.sprite.animations.add("senfada",[3],5,true);this.sprite.animations.add("salta",[2],5,true);this.sprite.limiteIzquierda=0;if(!a){this.sprite.limiteDerecha=330}else{this.sprite.limiteDerecha=b.world.width}this.soyplayer1=true;this.frameParao=0}if(d){this.id=d}b.physics.arcade.enable(this.sprite);this.sprite.anchor.setTo(0.5,0.5);this.sprite.body.bounce.y=0;this.sprite.body.gravity.y=800;this.sprite.body.collideWorldBounds=true;this.sprite.enfadao=false;this.sprite.enfadaoTime=b.time.now;this.sprite.tiempoGorrino=b.time.now;this.sprite.haceGorrino=false;this.sprite.frame=1;this.mueve=function(e){if(this.sprite.haceGorrino){if(e=="izquierda"&&this.sprite.body.touching.down&&!this.sprite.paraGorrino){if(this.sprite.position.x>this.sprite.limiteIzquierda){this.sprite.body.velocity.x=-400}else{this.sprite.body.velocity.x=0}this.sprite.rotation=-90;this.sprite.paraGorrino=true}else{if(e=="derecha"&&this.sprite.body.touching.down&&!this.sprite.paraGorrino){if(this.sprite.position.x<this.sprite.limiteDerecha){this.sprite.body.velocity.x=400}else{this.sprite.body.velocity.x=0}this.sprite.rotation=90;this.sprite.paraGorrino=true}}}else{if(e=="izquierda"){if(b.time.now>this.sprite.enfadaoTime&&this.sprite.salta!=true){this.sprite.animations.play("semueve")}if(this.sprite.position.x>this.sprite.limiteIzquierda){this.sprite.body.velocity.x=-150}else{this.sprite.body.velocity.x=0}}else{if(e=="derecha"){if(b.time.now>this.sprite.enfadaoTime&&this.sprite.salta!=true){this.sprite.animations.play("semueve")}if(this.sprite.position.x<this.sprite.limiteDerecha){this.sprite.body.velocity.x=150}else{this.sprite.body.velocity.x=0}}else{if(e=="parao"&&b.time.now>this.sprite.enfadaoTime){this.sprite.animations.stop();this.sprite.body.velocity.x=0;this.sprite.frame=this.frameParao}}}if(e=="arriba"&&!this.sprite.haceGorrino&&this.sprite.body.touching.down){this.sprite.body.velocity.y=-550;this.sprite.salta=true;this.sprite.animations.play("salta")}}}};DudeVolley.PreOnePlayer=function(a){};DudeVolley.PreOnePlayer.prototype={preload:function(){if(this.game.normalplayer){this.load.spritesheet("player1","cpu_player/default_player.png",80,110)}else{this.load.spritesheet("player1",this.game.ruta_jugador,80,110)}},init:function(){},create:function(){},update:function(){this.empieza()},empieza:function(a){this.state.start("GameOnePlayer")}};DudeVolley.Demo=function(a){};DudeVolley.Demo.prototype={init:function(){ga("send","pageview","/Demo");this.physics.startSystem(Phaser.Physics.ARCADE);this.add.sprite(0,0,"sky");platforms=this.add.group();platforms.enableBody=true;var a=platforms.create(0,this.world.height-134,"ground");a.scale.setTo(2,2);a.body.immovable=true;var b=platforms.create(390,this.world.height-320,"red");b.body.immovable=true;this.pelota=this.add.sprite(32,0,"pelota");this.pelota.anchor.setTo(0.5,0.5);this.physics.arcade.enable(this.pelota);this.pelota.body.gravity.y=0;this.pelota.body.bounce.y=0.9;this.pelota.body.bounce.x=0.9;this.pelota.body.gravity.y=900;this.pelota.body.collideWorldBounds=true;this.pelota.body.mass=0.3;this.sombra1=this.add.sprite(32,this.world.height-200,"sombra");this.sombra_pelota=this.add.sprite(32,this.world.height-200,"sombra");this.sombra2=this.add.sprite(this.world.width-52,this.world.height-200,"sombra");this.sombra1.alpha=0.5;this.sombra2.alpha=0.5;this.sombra_pelota.alpha=0.2;Player1CPU=new Player(this.game,"player1",false);Player2CPU=new Player(this.game,"cpu",false);this.game.level=2;this.scoreText1=this.add.text(16,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"});this.scoreText2=this.add.text(this.world.width-38,16,"0",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"});this.game.puntosPlayer1=0;this.game.puntosPlayer2=0;this.cincoMovimientos1=0;this.cincoMovimientos2=0;this.dondeVaCpu1=100;this.dondeVaCpu2=-100;cursors=this.input.keyboard.createCursorKeys();ARRIBA=cursors.up;ABAJO=cursors.down;IZQUIERDA=cursors.left;DERECHA=cursors.right;SUPERPIKA=this.input.keyboard.addKey(Phaser.Keyboard.L);SUPERPIKA2=this.input.keyboard.addKey(Phaser.Keyboard.Z);PAUSE=this.input.keyboard.addKey(Phaser.Keyboard.ESC);this.enpausa=false;window.onkeydown=function(){if(this.PAUSE.game.input.keyboard.event.keyCode==27){this.PAUSE.game.paused=!this.PAUSE.game.paused}}},update:function(){$(document).keyup(function(a){location.reload()});$(document).click(function(a){location.reload()});document.addEventListener("touchend",function(a){location.reload()},false);if(this.time.now>(Player1CPU.sprite.tiempoGorrino-100)){Player1CPU.sprite.body.velocity.x=0;Player1CPU.sprite.body.rotation=0;Player1CPU.sprite.haceGorrino=false}if(this.time.now>(Player2CPU.sprite.tiempoGorrino-100)){Player2CPU.sprite.body.velocity.x=0;Player2CPU.sprite.body.rotation=0;Player2CPU.sprite.haceGorrino=false}this.sombra2.position.set(Player1CPU.sprite.body.position.x,this.world.height-144);this.sombra1.position.set(Player2CPU.sprite.body.position.x,this.world.height-144);this.sombra_pelota.position.set(this.pelota.body.position.x,this.world.height-144);this.physics.arcade.collide(this.pelota,Player1CPU.sprite,this.rebote_CPU,null,this);this.physics.arcade.collide(this.pelota,Player2CPU.sprite,this.rebote_CPU,null,this);this.physics.arcade.collide(this.pelota,platforms);this.physics.arcade.collide(Player1CPU.sprite,platforms);this.physics.arcade.collide(Player2CPU.sprite,platforms);this.pelota.angle+=this.pelota.body.velocity.x/20;if(this.punto){if(this.time.now>this.enunratico){this.punto=false;this.explota.kill();this.empieza(this.quienEmpieza)}}else{if(Player1CPU.sprite.body.y>this.world.height-250){Player1CPU.sprite.salta=false}if(Player2CPU.sprite.body.y>this.world.height-250){Player2CPU.sprite.salta=false}if(this.time.now>(Player1CPU.sprite.tiempoGorrino-100)){Player1CPU.sprite.body.rotation=0;Player1CPU.sprite.haceGorrino=false}if(this.time.now>(Player1CPU.sprite.tiempoGorrino+100)){Player1CPU.sprite.paraGorrino=false}if(this.time.now>(Player2CPU.sprite.tiempoGorrino-100)){Player2CPU.sprite.body.rotation=0;Player2CPU.sprite.haceGorrino=false}if(this.time.now>(Player2CPU.sprite.tiempoGorrino+100)){Player2CPU.sprite.paraGorrino=false}this.procesa_movimientos_maquina();if(this.pelota.body.position.y>500){this.procesapunto()}}},quitGame:function(a){this.state.start("MainMenu")},procesapunto:function(){this.explota=this.add.sprite(this.pelota.body.position.x,this.pelota.body.position.y+5,"explota");Player1CPU.sprite.body.velocity.y=Player1CPU.sprite.body.velocity.y*0.2;Player2CPU.sprite.body.velocity.y=Player2CPU.sprite.body.velocity.y*0.2;Player1CPU.sprite.body.velocity.x=Player1CPU.sprite.body.velocity.x*0.2;Player2CPU.sprite.body.velocity.x=Player2CPU.sprite.body.velocity.x*0.2;this.pelota.body.velocity.y=this.pelota.body.velocity.y*0.2;this.pelota.body.velocity.x=this.pelota.body.velocity.x*0.2;this.pelota.body.gravity.y=200;if(this.pelota.body.position.x>390){this.game.puntosPlayer1++;this.scoreText1.text=this.game.puntosPlayer1;this.enunratico=this.time.now+2500;this.quienEmpieza="uno";this.punto=true}else{this.game.puntosPlayer2++;this.scoreText2.text=this.game.puntosPlayer2;this.enunratico=this.time.now+2500;this.quienEmpieza="dos";this.punto=true}},empieza:function(a){this.pelota.body.gravity.y=900;Player1CPU.sprite.body.position.x=32;Player1CPU.sprite.body.position.y=this.world.height-250;Player1CPU.sprite.body.velocity.x=0;Player1CPU.sprite.body.velocity.y=0;Player2CPU.sprite.body.position.x=this.world.width-32;Player2CPU.sprite.body.position.y=this.world.height-250;Player2CPU.sprite.body.velocity.x=0;Player2CPU.sprite.body.velocity.y=0;this.pelota.body.position.y=0;this.pelota.body.velocity.x=0;if(a=="uno"){this.pelota.body.position.x=32;this.dondecae=1}else{this.pelota.body.position.x=this.world.width-32;this.dondecae=this.world.width-1}},rebote_CPU:function(f,h){if(this.punto){return true}var g;if(h.key=="cpu"){g=1;jugadorCPU=Player2CPU}else{g=-1;jugadorCPU=Player1CPU}if(this.game.level==0){this.factorFacilidadX=0.6;this.factorFacilidadY=0.8}else{if(this.game.level==1){this.factorFacilidadX=0.9;this.factorFacilidadY=0.9}else{if(this.game.level==2){this.factorFacilidadX=1;this.factorFacilidadY=1}}}this.pelota.body.gravity.y=900;this.pelota.body.velocity.y=-600;var e=this.pelota.body.position.x;var c=jugadorCPU.sprite.body.position.x;var d=e-c;var a=this.pelota.body.velocity.x;var b=this.pelota.body.velocity.y;this.pelota.body.velocity.x=d*3;if(this.time.now<jugadorCPU.sprite.enfadaoTime&&jugadorCPU.sprite.enfadao){quehago=Math.floor(Math.random()*4);if(quehago==0){this.pelota.body.velocity.y=b*0.3;this.pelota.body.velocity.x=g*(-800)*this.factorFacilidadX;this.pelota.body.gravity.y=1400*this.factorFacilidadX}else{if(quehago==1){this.pelota.body.velocity.y=-700*this.factorFacilidadY;this.pelota.body.velocity.x=g*800*this.factorFacilidadX;this.pelota.body.gravity.y=1400*this.factorFacilidadX}else{if(quehago==2){this.pelota.body.velocity.y=-700*this.factorFacilidadY;this.pelota.body.velocity.x=g*(-800)*this.factorFacilidadX;this.pelota.body.gravity.y=1400*this.factorFacilidadX}else{if(quehago==3){this.pelota.body.velocity.y=800*this.factorFacilidadY;this.pelota.body.velocity.x=g*(-1000)*this.factorFacilidadX;this.pelota.body.gravity.y=1400*this.factorFacilidadX}}}}}},procesa_movimientos_maquina:function(){x=this.pelota.body.position.x;y=515;H=(this.pelota.body.position.y-(this.world.height-185))*(-1);Vx=this.pelota.body.velocity.x;Vy=this.pelota.body.velocity.y;if(this.game.level==0){cuantocorre=135;cuantocorreGorrino=300;cuantoTiempoEnfadao=700;cuantoTiempoGorrino=300}else{if(this.game.level==1){cuantocorre=125;cuantocorreGorrino=300;cuantoTiempoEnfadao=700;cuantoTiempoGorrino=300}else{if(this.game.level==2){cuantocorre=135;cuantocorreGorrino=300;cuantoTiempoEnfadao=800;cuantoTiempoGorrino=300}}}if(Vy<0){Vy=Vy*(-1);this.dondecae=x+(Vx)/this.pelota.body.gravity.y*Math.sqrt((2*this.pelota.body.gravity.y*H)+(Vx));if(this.dondecae>800){this.dondecae=800-(this.dondecae-800)}else{if(this.dondecae<0){this.dondecae=-(this.dondecae)}}}else{}if(this.dondecae>360){if(this.dondecae<Player2CPU.sprite.position.x&&!Player2CPU.sprite.haceGorrino&&Player2CPU.sprite.position.x>Player2CPU.sprite.limiteIzquierda){Player2CPU.sprite.body.velocity.x=-cuantocorre;if(this.time.now>Player2CPU.sprite.enfadaoTime&&Player2CPU.sprite.body.velocity.x!=0){Player2CPU.sprite.animations.play("semueve")}}else{if(!Player2CPU.sprite.haceGorrino){Player2CPU.sprite.body.velocity.x=cuantocorre;if(this.time.now>Player2CPU.sprite.enfadaoTime&&Player2CPU.sprite.body.velocity.x!=0){Player2CPU.sprite.animations.play("semueve")}}}if(this.dondecae-Player2CPU.sprite.position.x<70&&x>440&&(Player2CPU.sprite.position.y>this.world.height-200)&&(Vx<120&&Vx>-120)&&(this.pelota.position.y<this.world.height-300)){Player2CPU.sprite.body.velocity.y=-550;Player2CPU.sprite.enfadao=true;Player2CPU.sprite.animations.play("senfada");Player2CPU.sprite.enfadaoTime=this.time.now+cuantoTiempoEnfadao}this.cincoMovimientos2=(++this.cincoMovimientos2%60);if(this.cincoMovimientos2>58){ale=Math.random();if(ale>0.9&&Player1CPU.sprite.position.y>this.world.height-200){Player1CPU.sprite.body.velocity.y=-550}if(ale>0.6&&Player1CPU.sprite.body.position.x<360){Player1CPU.sprite.body.velocity.x=100}else{if(ale<0.5){Player1CPU.sprite.body.velocity.x=-100}}this.dondeVaCpu1=Player1CPU.sprite.body.velocity.x}else{Player1CPU.sprite.body.velocity.x=this.dondeVaCpu1}Player1CPU.sprite.animations.play("semueve")}else{if(this.dondecae<440){if(this.dondecae<Player1CPU.sprite.position.x&&!Player1CPU.sprite.haceGorrino){Player1CPU.sprite.body.velocity.x=-cuantocorre;if(this.time.now>Player1CPU.sprite.enfadaoTime&&Player1CPU.sprite.body.velocity.x!=0){Player1CPU.sprite.animations.play("semueve")}}else{if(Player1CPU.sprite.position.x<Player1CPU.sprite.limiteDerecha){if(!Player1CPU.sprite.haceGorrino){Player1CPU.sprite.body.velocity.x=cuantocorre;if(this.time.now>Player1CPU.sprite.enfadaoTime&&Player1CPU.sprite.body.velocity.x!=0){Player1CPU.sprite.animations.play("semueve")}}}}if(this.dondecae-Player1CPU.sprite.position.x<70&&x<360&&(Player1CPU.sprite.position.y>this.world.height-200)&&(Vx<120&&Vx>-120)&&(this.pelota.position.y<this.world.height-300)){Player1CPU.sprite.body.velocity.y=-550;Player1CPU.sprite.enfadao=true;Player1CPU.sprite.animations.play("senfada");Player1CPU.sprite.enfadaoTime=this.time.now+cuantoTiempoEnfadao}this.cincoMovimientos1=(++this.cincoMovimientos1%60);if(this.cincoMovimientos1>58){ale=Math.random();if(ale>0.9&&Player2CPU.sprite.position.y>this.world.height-200){Player2CPU.sprite.body.velocity.y=-550}if(ale>0.6&&Player2CPU.sprite.body.position.x>440){Player2CPU.sprite.body.velocity.x=-100}else{if(ale<0.5){Player2CPU.sprite.body.velocity.x=100}}this.dondeVaCpu2=Player2CPU.sprite.body.velocity.x}else{Player2CPU.sprite.body.velocity.x=this.dondeVaCpu2}Player2CPU.sprite.animations.play("semueve")}}if(this.game.level!=0){if(H<200){if(this.dondecae<Player2CPU.sprite.position.x&&Player2CPU.sprite.body.touching.down){if(Player2CPU.sprite.position.x-this.dondecae>130&&x>440&&!Player2CPU.sprite.haceGorrino&&Player2CPU.sprite.position.x>Player2CPU.sprite.limiteIzquierda){Player2CPU.sprite.body.velocity.x=-cuantocorreGorrino;Player2CPU.sprite.body.rotation=-90;Player2CPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino;Player2CPU.sprite.haceGorrino=true}}else{if(this.dondecae-Player2CPU.sprite.position.x>130&&x>440&&!Player2CPU.sprite.haceGorrino&&Player2CPU.sprite.body.touching.down){Player2CPU.sprite.body.velocity.x=cuantocorreGorrino;Player2CPU.sprite.body.rotation=90;Player2CPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino;Player2CPU.sprite.haceGorrino=true}}if(this.dondecae<Player1CPU.sprite.position.x&&Player1CPU.sprite.body.touching.down){if(Player1CPU.sprite.position.x-this.dondecae>130&&x<360&&!Player1CPU.sprite.haceGorrino&&Player1CPU.sprite.position.x<Player1CPU.sprite.limiteDerecha){Player1CPU.sprite.body.velocity.x=-cuantocorreGorrino;Player1CPU.sprite.body.rotation=-90;Player1CPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino;Player1CPU.sprite.haceGorrino=true}}else{if(this.dondecae-Player1CPU.sprite.position.x>130&&x<360&&!Player1CPU.sprite.haceGorrino&&Player1CPU.sprite.body.touching.down){Player1CPU.sprite.body.velocity.x=cuantocorreGorrino;Player1CPU.sprite.body.rotation=90;Player1CPU.sprite.tiempoGorrino=this.time.now+cuantoTiempoGorrino;Player1CPU.sprite.haceGorrino=true}}}}},};DudeVolley.GameMultiplayer=function(a){};DudeVolley.GameMultiplayer.prototype={init:function(){ga("send","pageview","/GameMultiplayer");eljuego=this;primeraVez=true;if(typeof io=="undefined"){alert("sin definir");location.reload()}socket=io.connect("http://188.166.12.42:8080",{port:8080,transports:["websocket"]});p2p=new P2P(socket);p2p.on("ready",function(){p2p.usePeerConnection=true;console.log(p2p);try{p2p.emit("peer-obj",{peerId:peerId})}catch(u){console.log("mierror",u)}});e();function o(){}function i(){eljuego.game.desconectado=true;eljuego.game.hasperdio=false;eljuego.game.perdedor=Player1.sprite;eljuego.game.ganador=OTROPLAYER.sprite;eljuego.game.nombre_ganador=OTROPLAYER.nombre;eljuego.state.start("GameOver")}function d(u){if(typeof Player1==="undefined"){Player1=new Player(eljuego,"player1",null,u);$("#socket_overlay").show();eljuego.input.keyboard.removeKey(Phaser.Keyboard.D);eljuego.input.keyboard.removeKey(Phaser.Keyboard.R);eljuego.input.keyboard.removeKey(Phaser.Keyboard.F);eljuego.input.keyboard.removeKey(Phaser.Keyboard.G);eljuego.input.keyboard.removeKey(Phaser.Keyboard.Z);eljuego.input.keyboard.removeKey(Phaser.Keyboard.L);$("#socket_empezar").click(function(){ARRIBA=eljuego.input.keyboard.addKey(Phaser.Keyboard.R);ABAJO=eljuego.input.keyboard.addKey(Phaser.Keyboard.F);IZQUIERDA=eljuego.input.keyboard.addKey(Phaser.Keyboard.D);DERECHA=eljuego.input.keyboard.addKey(Phaser.Keyboard.G);SUPERPIKA=eljuego.input.keyboard.addKey(Phaser.Keyboard.L);SUPERPIKA2=eljuego.input.keyboard.addKey(Phaser.Keyboard.Z);Player1.nombre=$("#socket_nombre").val();socket.emit("player_ready",{nombre:Player1.nombre,id:Player1.id});$("#volley_label").hide();$("#botonera_socket").hide();$("#reta_a_un_colega").show()});$("#reta_a_un_colega_button").click(function(){$("#reta_a_un_colega_button").hide();$("#juega_con_quien_sea").hide();$("#pasa_el_enlace").show();$("#esperando_oponente").show()});$("#juega_con_quien_sea").click(function(){$("#reta_a_un_colega_button").hide();$("#juega_con_quien_sea").hide();$("#esperando_oponente").show()})}else{OTROPLAYER=new Player("player1",eljuego,u)}}function c(u){if(typeof Player1==="undefined"){Player1=new Player(eljuego,"cpu",null,u);$("#socket_overlay").show();eljuego.input.keyboard.removeKey(Phaser.Keyboard.D);eljuego.input.keyboard.removeKey(Phaser.Keyboard.R);eljuego.input.keyboard.removeKey(Phaser.Keyboard.F);eljuego.input.keyboard.removeKey(Phaser.Keyboard.G);eljuego.input.keyboard.removeKey(Phaser.Keyboard.Z);eljuego.input.keyboard.removeKey(Phaser.Keyboard.L);$("#socket_empezar").click(function(){ARRIBA=eljuego.input.keyboard.addKey(Phaser.Keyboard.R);ABAJO=eljuego.input.keyboard.addKey(Phaser.Keyboard.F);IZQUIERDA=eljuego.input.keyboard.addKey(Phaser.Keyboard.D);DERECHA=eljuego.input.keyboard.addKey(Phaser.Keyboard.G);SUPERPIKA=eljuego.input.keyboard.addKey(Phaser.Keyboard.L);SUPERPIKA2=eljuego.input.keyboard.addKey(Phaser.Keyboard.Z);Player1.nombre=$("#socket_nombre").val();socket.emit("player_ready",{nombre:Player1.nombre,id:Player1.id})})}if(u.id!==Player1.id&&typeof OTROPLAYER==="undefined"){if(Player1.soyplayer1==false){ruta="player1"}else{ruta="cpu"}OTROPLAYER=new Player(eljuego,ruta,null,u)}}function g(u){eljuego.nombre1.text=u[0];Player1.nombre=u[0];eljuego.nombre2.text=u[1];OTROPLAYER.nombre=u[0];$("#socket_overlay").hide();eljuego.empieza("uno")}function t(u){if(u.id===Player1.id){if(u.dir=="derecha"){Player1.mueve("derecha")}if(u.dir=="izquierda"){Player1.mueve("izquierda")}if(u.dir=="arriba"){Player1.mueve("arriba")}if(u.dir=="parao"){Player1.mueve("parao")}}else{if(u.dir=="derecha"){OTROPLAYER.mueve("derecha")}if(u.dir=="izquierda"){OTROPLAYER.mueve("izquierda")}if(u.dir=="arriba"){OTROPLAYER.mueve("arriba")}if(u.dir=="parao"){OTROPLAYER.mueve("parao")}}}function q(u){if(u.id===Player1.id){if(u.R=="1"){Player1.mueve("derecha")}if(u.L=="1"){Player1.mueve("izquierda")}if(u.U=="1"){Player1.mueve("arriba")}if(u.P=="1"){Player1.mueve("parao")}}else{if(u.R=="1"){OTROPLAYER.mueve("derecha")}if(u.L=="1"){OTROPLAYER.mueve("izquierda")}if(u.U=="1"){OTROPLAYER.mueve("arriba")}if(u.P=="1"){OTROPLAYER.mueve("parao")}if(u.D=="1"){}}}function n(u){if(!Player1.soyplayer1){eljuego.pelota.angle=u.angulo;eljuego.pelota.x=u.x;eljuego.pelota.y=u.y}}function j(u){if(!Player1.soyplayer1){eljuego.scoreText1.text=u.puntos1;eljuego.scoreText2.text=u.puntos2;eljuego.game.puntosPlayer1=u.puntos1;eljuego.game.puntosPlayer2=u.puntos2}}function b(u){eljuego.procesapunto_sync(u.x,u.y+5)}function m(u){if(!Player1.soyplayer1){if((OTROPLAYER.sprite.x>u.P1x+40)||(OTROPLAYER.sprite.x<u.P1x-40)){OTROPLAYER.sprite.x=u.P1x;tween=eljuego.add.tween(OTROPLAYER.sprite).to({x:[OTROPLAYER.sprite.x,u.P1x]},2,Phaser.Easing.Linear.None,true)}if((Player1.sprite.x>u.P2x+40)||(Player1.sprite.x<u.P2x-40)){Player1.sprite.x=u.P2x;tween2=eljuego.add.tween(Player1.sprite).to({x:[Player1.sprite.x,u.P2x]},2,Phaser.Easing.Linear.None,true)}}}function f(u){if(Player1.id!=u.id){OTROPLAYER.sprite.enfadao=true;OTROPLAYER.sprite.animations.play("senfada");OTROPLAYER.sprite.enfadaoTime=eljuego.time.now+500}}function p(){OTROPLAYER.sprite.haceGorrino=true;OTROPLAYER.sprite.tiempoGorrino=eljuego.time.now+400}function l(u){if(u.U==1){if(u.L==1){quehaceel2=7}else{if(u.R==1){quehaceel2=9}else{quehaceel2=8}}}else{if(u.D==1){if(u.L==1){quehaceel2=1}else{if(u.R==1){quehaceel2=2}else{quehaceel2=3}}}else{if(u.L==1){quehaceel2=4}else{if(u.R==1){quehaceel2=6}else{quehaceel2=5}}}}}function s(u){if(u.ganador_id==Player1.id){eljuego.game.hasperdio=true;eljuego.game.perdedor=OTROPLAYER.sprite;eljuego.game.ganador=Player1.sprite;eljuego.game.nombre_ganador=Player1.nombre}else{eljuego.game.hasperdio=false;eljuego.game.perdedor=Player1.sprite;eljuego.game.ganador=OTROPLAYER.sprite;eljuego.game.nombre_ganador=OTROPLAYER.nombre}eljuego.state.start("GameOver")}function r(u){}function a(u){if(typeof(Player1)==="undefined"){location.reload()}}function e(){socket.on("connect",o);socket.on("disconnect",i);socket.on("new player",d);socket.on("new player2",c);socket.on("samovio",t);socket.on("recibeteclas",q);socket.on("situapelota",n);socket.on("situajugador1",m);socket.on("fuera del multiplayer",a);socket.on("goGameOver",s);p2p.on("posicion pelota",n);p2p.on("posicion jugador1",m);p2p.on("actualiza_marcador",j);p2p.on("punto",b);p2p.on("enfadao2",f);p2p.on("hacegorrino2",p);p2p.on("teclaspika",l);socket.on("remove player",r);socket.on("ya estamos todos",g)}this.physics.startSystem(Phaser.Physics.ARCADE);this.add.sprite(0,0,"sky");platforms=this.add.group();platforms.enableBody=true;var k=platforms.create(0,this.world.height-134,"ground");k.scale.setTo(2,2);k.body.immovable=true;var h=platforms.create(390,this.world.height-320,"red");h.body.immovable=true;this.sombra1=this.add.sprite(32,this.world.height-200,"sombra");this.sombraPelota=this.add.sprite(32,this.world.height-200,"sombra");this.sombra2=this.add.sprite(this.world.width-52,this.world.height-200,"sombra");this.sombra1.alpha=0.5;this.sombra2.alpha=0.5;this.sombraPelota.alpha=0.2;this.nombre1=this.add.text(16,10,"",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"});this.nombre2=this.add.text(this.world.width-16,10,"",{font:"44px ArcadeClassic",fill:"#eaff02",align:"center"});this.nombre2.anchor.x=1;this.scoreText1=this.add.text(16,46,"0",{font:"54px ArcadeClassic",fill:"#eaff02",align:"center"});this.scoreText2=this.add.text(this.world.width-16,46,"0",{font:"54px ArcadeClassic",fill:"#eaff02",align:"center"});this.scoreText2.anchor.x=1;this.game.puntosPlayer1=0;this.game.puntosPlayer2=0;this.scoreText1.text=this.game.puntosPlayer1;this.scoreText2.text=this.game.puntosPlayer2;this.esperaCollide1=this.time.now;this.esperaCollide2=this.time.now;this.game.factor_slow_velocity=1;this.game.factor_slow_gravity=1;if(!this.game.device.desktop){this.joy=new Joystick(this.game,120,this.world.height-100);this.movil_accion=this.add.sprite(this.world.width-100,this.world.height-100,"pika");this.movil_accion.anchor.setTo(0.5,0.5);this.movil_accion.inputEnabled=true;this.movil_accion.input.sprite.events.onInputDown.add(this.entra_movil_accion,this);this.movil_accion.input.sprite.events.onInputUp.add(this.sal_movil_accion,this)}cursors=this.input.keyboard.createCursorKeys();SUPERPIKA=this.input.keyboard.addKey(Phaser.Keyboard.L);SUPERPIKA2=this.input.keyboard.addKey(Phaser.Keyboard.Z);PAUSE=this.input.keyboard.addKey(Phaser.Keyboard.ESC);quehaceel2=0;this.sincronizapelotatime=this.time.now+100;this.enunratico=this.time.now;this.quienEmpieza="uno";this.punto=false;this.dondecae=0;this.cuandocae=0;this.muevederecha=false;this.mueveizquierda=false;this.muevearriba=false;this.mueveabajo=false;this.game.hasperdio=false;this.game.unplayer=false;this.game.multiplayer=true;this.game.empieza=this.time.now;this.need_sync=false;this.enpausa=false;window.onkeydown=function(){if(this.PAUSE.game.input.keyboard.event.keyCode==27){this.PAUSE.game.paused=!this.PAUSE.game.paused}}},entra_movil_accion:function(){this.click_accion=true},sal_movil_accion:function(){this.click_accion=false},update:function(){if(typeof OTROPLAYER!=="undefined"){if(OTROPLAYER.sprite.body.y>this.world.height-250){OTROPLAYER.sprite.salta=false}this.sombra2.position.set(OTROPLAYER.sprite.body.position.x,this.world.height-144);if(typeof this.pelota!=="undefined"&&this.time.now>this.esperaCollide2){this.physics.arcade.collide(this.pelota,OTROPLAYER.sprite,this.pika_OTRO,null,this)}this.physics.arcade.collide(OTROPLAYER.sprite,platforms)}if(typeof Player1!=="undefined"){if(Player1.sprite.body.y>this.world.height-250){Player1.sprite.salta=false}this.sombra1.position.set(Player1.sprite.body.position.x,this.world.height-144);if(typeof this.pelota!=="undefined"&&this.time.now>this.esperaCollide1){this.physics.arcade.collide(this.pelota,Player1.sprite,this.pika,null,this)}this.physics.arcade.collide(Player1.sprite,platforms)}if(typeof this.pelota!=="undefined"&&Player1.soyplayer1){this.sombraPelota.position.set(this.pelota.body.position.x,this.world.height-144);this.pelota.angle+=this.pelota.body.velocity.x/20;this.physics.arcade.collide(this.pelota,platforms);try{p2p.emit("posicion pelota",{x:this.pelota.x,y:this.pelota.y,angulo:this.pelota.angle});if(this.need_sync){this.need_sync=false;p2p.emit("posicion jugador1",{P1x:Player1.sprite.x,P2x:OTROPLAYER.sprite.x,P1y:Player1.sprite.y,P2y:OTROPLAYER.sprite.y})}}catch(g){console.log("mierror",g)}if(this.time.now>this.sincronizapelotatime){this.sincronizapelotatime=this.time.now+20}}if(this.punto){if(this.time.now>this.enunratico){this.punto=false;this.need_sync=true;this.explota.kill();this.empieza(this.quienEmpieza)}}else{if(typeof OTROPLAYER!=="undefined"){if(this.time.now>(OTROPLAYER.sprite.tiempoGorrino-100)){OTROPLAYER.sprite.body.rotation=0;OTROPLAYER.sprite.haceGorrino=false}if(this.time.now>(OTROPLAYER.sprite.tiempoGorrino+100)){OTROPLAYER.sprite.paraGorrino=false}}if(typeof Player1!=="undefined"){if(this.time.now>(Player1.sprite.tiempoGorrino-100)){Player1.sprite.body.rotation=0;Player1.sprite.haceGorrino=false}if(this.time.now>(Player1.sprite.tiempoGorrino+100)){Player1.sprite.paraGorrino=false}if(SUPERPIKA.isDown||this.click_accion||SUPERPIKA2.isDown){if(!Player1.sprite.body.touching.down&&!Player1.sprite.paraGorrino){Player1.sprite.enfadao=true;Player1.sprite.animations.play("senfada");Player1.sprite.enfadaoTime=this.time.now+500;try{p2p.emit("enfadao2",{id:Player1.id})}catch(g){console.log("mierror",g)}}else{if(!Player1.sprite.paraGorrino){try{p2p.emit("hacegorrino2")}catch(g){console.log("mierror",g)}Player1.sprite.haceGorrino=true;Player1.sprite.tiempoGorrino=this.time.now+400}}}if(!this.game.device.desktop){this.joy.update();this.joy.holder.events.onMove.add(this.procesaDragg,this);this.joy.holder.events.onUp.add(this.paraDragg,this)}var a=0;var c=0;var b=0;var h=0;var f=0;if(cursors.left.isDown||this.mueveizquierda){a=1}else{if(cursors.right.isDown||this.muevederecha){c=1}else{f=1}}if(cursors.up.isDown||this.muevearriba){b=1}if(cursors.down.isDown||this.mueveabajo){h=1}socket.emit("teclas",{id:Player1.id,L:a,R:c,U:b,D:h,P:f});if(!Player1.soyplayer1){try{p2p.emit("teclaspika",{L:a,R:c,U:b,D:h})}catch(g){console.log("mierror",g)}}}if(typeof this.pelota!=="undefined"&&Player1.soyplayer1&&this.pelota.body.position.y>500){this.procesapunto()}}},quitGame:function(a){this.state.start("MainMenu")},paraDragg:function(a){Player1.mueve("parao");this.mueveizquierda=false;this.muevederecha=false;this.muevearriba=false;this.mueveabajo=false},procesaDragg:function(b,e,d){var c=d*180/Math.PI;if(e<30){Player1.mueve("parao");this.mueveizquierda=false;this.muevederecha=false;this.muevearriba=false;this.mueveabajo=false;return}if(c>-90&&c<90){Player1.mueve("derecha");this.mueveizquierda=false;this.muevederecha=true}if(c>90||c<-90){Player1.mueve("izquierda");this.mueveizquierda=true;this.muevederecha=false}if(c>-135&&c<-45){Player1.mueve("arriba");this.muevearriba=true}else{this.muevearriba=false}if(c<135&&c>45){this.mueveabajo=true}else{this.mueveabajo=false}},procesapunto:function(){this.explota=this.add.sprite(this.pelota.body.position.x,this.pelota.body.position.y+5,"explota");this.punto=true;Player1.sprite.body.velocity.y=Player1.sprite.body.velocity.y*0.2;OTROPLAYER.sprite.body.velocity.y=OTROPLAYER.sprite.body.velocity.y*0.2;Player1.sprite.body.velocity.x=Player1.sprite.body.velocity.x*0.2;OTROPLAYER.sprite.body.velocity.x=OTROPLAYER.sprite.body.velocity.x*0.2;this.pelota.body.velocity.y=this.pelota.body.velocity.y*0.2;this.pelota.body.velocity.x=this.pelota.body.velocity.x*0.2;this.pelota.body.gravity.y=200;if(this.pelota.body.position.x>390){this.game.puntosPlayer1++;this.scoreText1.text=this.game.puntosPlayer1;this.enunratico=this.time.now+2500;this.quienEmpieza="uno";if(this.game.puntosPlayer1>=15){socket.emit("game_over",{ganador:Player1.nombre,ganador_id:Player1.id,perdedor:OTROPLAYER.nombre,perdedor_id:OTROPLAYER.id})}}else{this.game.puntosPlayer2++;this.scoreText2.text=this.game.puntosPlayer2;this.enunratico=this.time.now+2500;this.quienEmpieza="dos";if(this.game.puntosPlayer2>=15){socket.emit("game_over",{ganador:Player1.nombre,ganador_id:Player1.id,perdedor:OTROPLAYER.nombre,perdedor_id:OTROPLAYER.id})}}try{p2p.emit("actualiza_marcador",{puntos1:this.game.puntosPlayer1,puntos2:this.game.puntosPlayer2});p2p.emit("punto",{x:this.pelota.body.position.x,y:this.pelota.body.position.y})}catch(a){console.log("mierror",a)}},procesapunto_sync:function(a,b){if(!Player1.soyplayer1){this.explota=this.add.sprite(a,b,"explota");this.punto=true;this.enunratico=this.time.now+2400}},pika:function(){if(typeof this.pelota!=="undefined"){if(this.punto){return true}this.esperaCollide1=this.time.now+100;this.pelota.body.gravity.y=900*this.game.factor_slow_gravity;this.pelota.body.velocity.y=-600*this.game.factor_slow_velocity;pos_pelota=this.pelota.body.position.x;pos_player=Player1.sprite.body.position.x;diferencia=pos_pelota-pos_player;v_x_pelota=this.pelota.body.velocity.x;v_y_pelota=this.pelota.body.velocity.y;this.pelota.body.velocity.x=diferencia*3;if(this.time.now<Player1.sprite.enfadaoTime&&Player1.sprite.enfadao){if((cursors.right.isDown||cursors.left.isDown||this.mueveizquierda||this.muevederecha||!this.game.device.desktop)&&(!cursors.up.isDown&&!this.muevearriba)&&(!cursors.down.isDown&&!this.mueveabajo)){this.pelota.body.velocity.y=v_y_pelota*0.3*this.game.factor_slow_velocity;this.pelota.body.velocity.x=800*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1500*this.game.factor_slow_gravity}else{if((cursors.right.isDown||this.muevederecha)&&(cursors.up.isDown||this.muevearriba)&&(!cursors.down.isDown&&!this.mueveabajo)){this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity;this.pelota.body.velocity.x=800*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}else{if((cursors.left.isDown||this.mueveizquierda)&&(cursors.up.isDown||this.muevearriba)&&(!cursors.down.isDown&&!this.mueveabajo)){this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity;this.pelota.body.velocity.x=-800*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}else{if((cursors.right.isDown||cursors.left.isDown||this.mueveizquierda||this.muevederecha)&&(!cursors.up.isDown&&!this.muevearriba)&&(cursors.down.isDown||this.mueveabajo)){this.pelota.body.velocity.y=800*this.game.factor_slow_velocity;this.pelota.body.velocity.x=1000*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}else{if((!cursors.right.isDown&&!this.muevederecha)&&(!cursors.left.isDown&&!this.mueveizquierda)&&(!cursors.up.isDown&&!this.muevearriba)&&(cursors.down.isDown||this.mueveabajo)){this.pelota.body.velocity.y=800*this.game.factor_slow_velocity;this.pelota.body.velocity.x=300*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}else{if((!cursors.right.isDown&&!this.muevederecha)&&(!cursors.left.isDown&&!this.muevearriba)&&(!cursors.up.isDown&&!this.muevearriba)&&(!cursors.down.isDown&&!this.mueveabajo)){this.pelota.body.velocity.y=-100*this.game.factor_slow_velocity;this.pelota.body.velocity.x=300*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}else{if((!cursors.right.isDown&&!this.muevederecha)&&(!cursors.left.isDown&&!this.mueveizquierda)&&(cursors.up.isDown||this.muevearriba)&&(!cursors.down.isDown&&!this.mueveabajo)){this.pelota.body.velocity.y=-1000*this.game.factor_slow_velocity;this.pelota.body.velocity.x=300*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}}}}}}}}}},pika_OTRO:function(){this.need_sync=true;if(typeof this.pelota!=="undefined"){if(this.punto){return true}this.esperaCollide2=this.time.now+100;this.pelota.body.gravity.y=900*this.game.factor_slow_gravity;this.pelota.body.velocity.y=-600*this.game.factor_slow_velocity;pos_pelota=this.pelota.body.position.x;pos_player=OTROPLAYER.sprite.body.position.x;diferencia=pos_pelota-pos_player;v_x_pelota=this.pelota.body.velocity.x;v_y_pelota=this.pelota.body.velocity.y;this.pelota.body.velocity.x=diferencia*3;if(this.time.now<OTROPLAYER.sprite.enfadaoTime&&OTROPLAYER.sprite.enfadao){if(quehaceel2==4||quehaceel2==6){this.pelota.body.velocity.y=v_y_pelota*0.3*this.game.factor_slow_velocity;this.pelota.body.velocity.x=-800*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1500*this.game.factor_slow_gravity}else{if(quehaceel2==9){this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity;this.pelota.body.velocity.x=800*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}else{if(quehaceel2==7){this.pelota.body.velocity.y=-700*this.game.factor_slow_velocity;this.pelota.body.velocity.x=-800*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}else{if(quehaceel2==1||quehaceel2==3){this.pelota.body.velocity.y=800*this.game.factor_slow_velocity;this.pelota.body.velocity.x=-1000*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}else{if(quehaceel2==2){this.pelota.body.velocity.y=800*this.game.factor_slow_velocity;this.pelota.body.velocity.x=-300*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}else{if(quehaceel2==5){this.pelota.body.velocity.y=-100*this.game.factor_slow_velocity;this.pelota.body.velocity.x=-300*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}else{if(quehaceel2==8){this.pelota.body.velocity.y=-1000*this.game.factor_slow_velocity;this.pelota.body.velocity.x=-300*this.game.factor_slow_velocity;this.pelota.body.gravity.y=1400*this.game.factor_slow_gravity}}}}}}}}}},empieza:function(a){if(primeraVez){this.pelota=this.add.sprite(32,0,"pelota");this.pelota.anchor.setTo(0.5,0.5);if(Player1.soyplayer1){this.physics.arcade.enable(this.pelota);this.pelota.body.gravity.y=0;this.pelota.body.bounce.y=0.9;this.pelota.body.bounce.x=0.9;this.pelota.body.gravity.y=900*this.game.factor_slow_gravity;this.pelota.body.collideWorldBounds=true;this.pelota.body.mass=0.15}primeraVez=false}else{if(Player1.soyplayer1){this.dondecae=this.world.width-1;this.pelota.body.gravity.y=900;if(a=="uno"){this.pelota.body.position.x=32}else{this.pelota.body.position.x=this.world.width-32}this.pelota.body.position.y=0;this.pelota.body.velocity.x=0;Player1.sprite.body.position.x=32;Player1.sprite.body.position.y=this.world.height-250;Player1.sprite.body.velocity.x=0;Player1.sprite.body.velocity.y=0;OTROPLAYER.sprite.body.position.x=this.world.width-32;OTROPLAYER.sprite.body.position.y=this.world.height-250;OTROPLAYER.sprite.body.velocity.x=0;OTROPLAYER.sprite.body.velocity.y=0}else{OTROPLAYER.sprite.body.position.x=32;OTROPLAYER.sprite.body.position.y=this.world.height-250;OTROPLAYER.sprite.body.velocity.x=0;OTROPLAYER.sprite.body.velocity.y=0;Player1.sprite.body.position.x=this.world.width-32;Player1.sprite.body.position.y=this.world.height-250;Player1.sprite.body.velocity.x=0;Player1.sprite.body.velocity.y=0}}}};DudeVolley.GameOver=function(a){};DudeVolley.GameOver.prototype={create:function(){ga("send","pageview","/GameOver");var c=this.game.ruta_jugador;relacion=$(window).height()/$(window).width();if(relacion<1){letra1=$(window).height()/9;letra2=$(window).height()/14;letra3=$(window).height()/20;borde=$(window).height()/40;ancho=$(window).height()/2;$("#puntos").css("font-size",letra1+"px");$("#texto_fin").css("font-size",letra2+"px");$("#envia_tus_puntos").css("font-size",letra2+"px");$("#inputtunombre").css("font-size",letra2+"px");$("#inputtunombre").css("padding",borde+"px");$("#inputtunombre").css("width",ancho+"px");$("#inputtunombre").css("border",borde+"px solid #f5f823");$("#envia_tu_nombre").css("font-size",letra2+"px");$("#envia_tu_nombre").css("padding",borde+"px");$("#envia_tu_nombre").css("border",borde+"px solid #f5f823");$("#contiene_mandapuntos").css("font-size",letra3+"px");$("#contiene_clasificacion").css("font-size",letra3+"px")}this.input.keyboard.removeKey(Phaser.Keyboard.D);this.input.keyboard.removeKey(Phaser.Keyboard.R);this.input.keyboard.removeKey(Phaser.Keyboard.F);this.input.keyboard.removeKey(Phaser.Keyboard.G);this.input.keyboard.removeKey(Phaser.Keyboard.Z);this.input.keyboard.removeKey(Phaser.Keyboard.L);this.add.sprite(0,0,"game_over_back");var b=this.game.puntosPlayer1-this.game.puntosPlayer2;var k=this.game.puntosPlayer1+" - "+this.game.puntosPlayer2;if(this.game.unplayer){var j=this.time.now-this.game.empieza;var e;var a;if(this.game.hasperdio==true){e="perdido"}else{e="ganado";if(c!=false){var i={rutaplayer:c,token:window.token};$.post("cambia_imagen_winner.php",i).done(function(l){console.log(l)})}}if(this.game.level==0){a="chupao"}else{if(this.game.level==1){a="normalico"}else{if(this.game.level==2){a="jodio"}}}$("#mandapuntos").show();$("#contiene_mandapuntos").fadeIn();$("#contiene_mandapuntos").focus();$("#texto_fin").text("Has "+e);$("#puntos").text(this.game.puntosPlayer1+" - "+this.game.puntosPlayer2);var d=cricri(b+k+j+window.token);window.entra=0;$("#envia_tu_nombre").click(function(l){l.preventDefault();if(window.entra<1){var m={nombre:$("#inputtunombre").val(),diferencia:b,puntuacion:k,tiempo:j,level:a,token:window.token,cri:d};$.post("registrapuntos.php",m).done(function(n){console.log(n);$("#mandapuntos").slideUp();$("#contiene_clasificacion").slideDown();acho=JSON.parse(n);$.each(acho,function(){var o=Number(this.tiempo);var r=Math.floor(o/1000);var p=Math.floor(r/60);var r=r-(p*60);if(r<10){r="0"+r}var q=p+":"+r;$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<dl><dt>"+this.nombre+"</dt><dd>"+this.puntuacion+"("+q+")</dd></dl>")})})}})}else{var h;var g="";if(this.game.multiplayer){h=this.game.nombre_ganador;if(this.game.desconectado){var g="</br>...el otro se ha pirao"}}else{if(this.game.hasperdio){h="Player2"}else{h="Player1"}}$("#contiene_mandapuntos").show();$("#contiene_mandapuntos").css("top","20vw");$("#mandapuntos").show();$("#envia_tus_puntos").hide();$("#inputtunombre").hide();$("#envia_tu_nombre").hide();$("#texto_fin").html("Ganador: "+h+g);$("#puntos").text(this.game.puntosPlayer1+" - "+this.game.puntosPlayer2)}this.physics.startSystem(Phaser.Physics.ARCADE);this.ganador=this.add.sprite(32,this.world.height-250,this.game.ganador.key);this.perdedor=this.add.sprite(this.world.width/2,this.world.height-250,this.game.perdedor.key);this.ganador.anchor.setTo(0.5,0.5);this.perdedor.anchor.setTo(0.5,0.5);this.physics.arcade.enable(this.ganador);this.physics.arcade.enable(this.perdedor);this.ganador.body.bounce.y=0;this.ganador.body.gravity.y=800;this.ganador.body.collideWorldBounds=true;this.perdedor.body.bounce.y=0;this.perdedor.body.gravity.y=800;this.perdedor.body.collideWorldBounds=true;this.pelota=this.add.sprite(300,this.world.height-130,"pelota");this.pelota.anchor.setTo(0.5,0.5);this.pelota.angle=Math.floor((Math.random()*180)+1);this.explota=this.add.sprite(300,this.world.height-150,"explota");this.ganador.animations.add("semueve",[0,1],7,true);this.perdedor.animations.add("semueve2",[0,1],7,true);this.ganador.animations.add("senfada",[2,3],7,true);this.perdedor.animations.add("senfada2",[2,3],7,true);var f=this.cache.getImage("volver_a_jugar");this.play_again=this.add.sprite(this.world.centerX-f.width/2,470,"volver_a_jugar");this.play_again.inputEnabled=true;this.play_again.input.sprite.events.onInputDown.add(this.empieza,this)},update:function(){if(this.ganador.body.x>=(this.world.width-180)){this.ganador.body.velocity.x=-150}if(this.ganador.body.x<=140){this.ganador.body.velocity.x=150}this.ganador.animations.play("semueve");this.perdedor.animations.play("senfada");this.perdedor.body.rotation=90;if(this.ganador.body.y>(this.world.height-190)){this.ganador.body.velocity.y=-550}if(this.perdedor.body.y>(this.world.height-180)){this.perdedor.body.velocity.y=0;this.perdedor.body.y=this.world.height-180}if(SUPERPIKA.isDown||SUPERPIKA2.isDown){this.state.start("Preloader")}},empieza:function(){location.reload()}};function cricri(D){var E;var w=function(b,a){return(b<<a)|(b>>>(32-a))};var J=function(k,b){var aa,a,d,Y,c;d=(k&2147483648);Y=(b&2147483648);aa=(k&1073741824);a=(b&1073741824);c=(k&1073741823)+(b&1073741823);if(aa&a){return(c^2147483648^d^Y)}if(aa|a){if(c&1073741824){return(c^3221225472^d^Y)}else{return(c^1073741824^d^Y)}}else{return(c^d^Y)}};var r=function(a,c,b){return(a&c)|((~a)&b)};var q=function(a,c,b){return(a&b)|(c&(~b))};var p=function(a,c,b){return(a^c^b)};var n=function(a,c,b){return(c^(a|(~b)))};var u=function(aa,Y,af,ae,k,ab,ad){aa=J(aa,J(J(r(Y,af,ae),k),ad));return J(w(aa,ab),Y)};var f=function(aa,Y,af,ae,k,ab,ad){aa=J(aa,J(J(q(Y,af,ae),k),ad));return J(w(aa,ab),Y)};var G=function(aa,Y,af,ae,k,ab,ad){aa=J(aa,J(J(p(Y,af,ae),k),ad));return J(w(aa,ab),Y)};var t=function(aa,Y,af,ae,k,ab,ad){aa=J(aa,J(J(n(Y,af,ae),k),ad));return J(w(aa,ab),Y)};var e=function(aa){var ab;var d=aa.length;var c=d+8;var b=(c-(c%64))/64;var Y=(b+1)*16;var ac=new Array(Y-1);var a=0;var k=0;while(k<d){ab=(k-(k%4))/4;a=(k%4)*8;ac[ab]=(ac[ab]|(aa.charCodeAt(k)<<a));k++}ab=(k-(k%4))/4;a=(k%4)*8;ac[ab]=ac[ab]|(128<<a);ac[Y-2]=d<<3;ac[Y-1]=d>>>29;return ac};var s=function(d){var a="",b="",k,c;for(c=0;c<=3;c++){k=(d>>>(c*8))&255;b="0"+k.toString(16);a=a+b.substr(b.length-2,2)}return a};var F=[],O,h,I,v,g,X,W,V,U,R=7,P=12,M=17,K=22,C=5,B=9,A=14,z=20,o=4,m=11,l=16,j=23,T=6,S=10,Q=15,N=21;D=utf8_encode(D);F=e(D);X=1732584193;W=4023233417;V=2562383102;U=271733878;E=F.length;for(O=0;O<E;O+=16){h=X;I=W;v=V;g=U;X=u(X,W,V,U,F[O+0],R,3614090360);U=u(U,X,W,V,F[O+1],P,3905402710);V=u(V,U,X,W,F[O+2],M,606105819);W=u(W,V,U,X,F[O+3],K,3250441966);X=u(X,W,V,U,F[O+4],R,4118548399);U=u(U,X,W,V,F[O+5],P,1200080426);V=u(V,U,X,W,F[O+6],M,2821735955);W=u(W,V,U,X,F[O+7],K,4249261313);X=u(X,W,V,U,F[O+8],R,1770035416);U=u(U,X,W,V,F[O+9],P,2336552879);V=u(V,U,X,W,F[O+10],M,4294925233);W=u(W,V,U,X,F[O+11],K,2304563134);X=u(X,W,V,U,F[O+12],R,1804603682);U=u(U,X,W,V,F[O+13],P,4254626195);V=u(V,U,X,W,F[O+14],M,2792965006);W=u(W,V,U,X,F[O+15],K,1236535329);X=f(X,W,V,U,F[O+1],C,4129170786);U=f(U,X,W,V,F[O+6],B,3225465664);V=f(V,U,X,W,F[O+11],A,643717713);W=f(W,V,U,X,F[O+0],z,3921069994);X=f(X,W,V,U,F[O+5],C,3593408605);U=f(U,X,W,V,F[O+10],B,38016083);V=f(V,U,X,W,F[O+15],A,3634488961);W=f(W,V,U,X,F[O+4],z,3889429448);X=f(X,W,V,U,F[O+9],C,568446438);U=f(U,X,W,V,F[O+14],B,3275163606);V=f(V,U,X,W,F[O+3],A,4107603335);W=f(W,V,U,X,F[O+8],z,1163531501);X=f(X,W,V,U,F[O+13],C,2850285829);U=f(U,X,W,V,F[O+2],B,4243563512);V=f(V,U,X,W,F[O+7],A,1735328473);W=f(W,V,U,X,F[O+12],z,2368359562);X=G(X,W,V,U,F[O+5],o,4294588738);U=G(U,X,W,V,F[O+8],m,2272392833);V=G(V,U,X,W,F[O+11],l,1839030562);W=G(W,V,U,X,F[O+14],j,4259657740);X=G(X,W,V,U,F[O+1],o,2763975236);U=G(U,X,W,V,F[O+4],m,1272893353);V=G(V,U,X,W,F[O+7],l,4139469664);W=G(W,V,U,X,F[O+10],j,3200236656);X=G(X,W,V,U,F[O+13],o,681279174);U=G(U,X,W,V,F[O+0],m,3936430074);V=G(V,U,X,W,F[O+3],l,3572445317);W=G(W,V,U,X,F[O+6],j,76029189);X=G(X,W,V,U,F[O+9],o,3654602809);U=G(U,X,W,V,F[O+12],m,3873151461);V=G(V,U,X,W,F[O+15],l,530742520);W=G(W,V,U,X,F[O+2],j,3299628645);X=t(X,W,V,U,F[O+0],T,4096336452);U=t(U,X,W,V,F[O+7],S,1126891415);V=t(V,U,X,W,F[O+14],Q,2878612391);W=t(W,V,U,X,F[O+5],N,4237533241);X=t(X,W,V,U,F[O+12],T,1700485571);U=t(U,X,W,V,F[O+3],S,2399980690);V=t(V,U,X,W,F[O+10],Q,4293915773);W=t(W,V,U,X,F[O+1],N,2240044497);X=t(X,W,V,U,F[O+8],T,1873313359);U=t(U,X,W,V,F[O+15],S,4264355552);V=t(V,U,X,W,F[O+6],Q,2734768916);W=t(W,V,U,X,F[O+13],N,1309151649);X=t(X,W,V,U,F[O+4],T,4149444226);U=t(U,X,W,V,F[O+11],S,3174756917);V=t(V,U,X,W,F[O+2],Q,718787259);W=t(W,V,U,X,F[O+9],N,3951481745);X=J(X,h);W=J(W,I);V=J(V,v);U=J(U,g)}var i=s(X)+s(W)+s(V)+s(U);return i.toLowerCase()}function utf8_encode(a){if(a===null||typeof a==="undefined"){return""}var i=(a+"");var j="",b,e,c=0;b=e=0;c=i.length;for(var d=0;d<c;d++){var h=i.charCodeAt(d);var g=null;if(h<128){e++}else{if(h>127&&h<2048){g=String.fromCharCode((h>>6)|192,(h&63)|128)}else{if((h&63488)!=55296){g=String.fromCharCode((h>>12)|224,((h>>6)&63)|128,(h&63)|128)}else{if((h&64512)!=55296){throw new RangeError("Unmatched trail surrogate at "+d)}var f=i.charCodeAt(++d);if((f&64512)!=56320){throw new RangeError("Unmatched lead surrogate at "+(d-1))}h=((h&1023)<<10)+(f&1023)+65536;g=String.fromCharCode((h>>18)|240,((h>>12)&63)|128,((h>>6)&63)|128,(h&63)|128)}}}if(g!==null){if(e>b){j+=i.slice(b,e)}j+=g;b=e=d+1}}if(e>b){j+=i.slice(b,c)}return j}var Joystick=function(d,a,f){this.pin=d.add.sprite(0,0,"joy_front");this.holder=d.add.sprite(0,0,"joy_back");this.holder.anchor.setTo(0.5,0.5);this.holder.fixedToCamera=true;this.holder.cameraOffset.setTo(a,f);this.holder.direction=new Phaser.Point(0,0);this.holder.distance=0;this.holder.pinAngle=0;this.holder.disabled=false;this.holder.isBeingDragged=false;this.holder.events.onDown=new Phaser.Signal();this.holder.events.onUp=new Phaser.Signal();this.holder.events.onMove=new Phaser.Signal();this.pin.anchor.setTo(0.5,0.5);this.holder.addChild(this.pin);var c=this.dragger=d.add.sprite(0,0,"null");c.anchor.setTo(0.5,0.5);c.width=c.height=181;c.inputEnabled=true;c.input.enableDrag(true);c.events.onDragStart.add(b,this);c.events.onDragStop.add(e,this);c.alpha=0;this.holder.addChild(c);this.enable=function(){this.disabled=false};this.disable=function(){this.disabled=true};function b(){this.isBeingDragged=true;if(this.disabled){return}this.holder.events.onDown.dispatch()}function e(){this.isBeingDragged=false;this.dragger.position.setTo(0,0);this.pin.position.setTo(0,0);if(this.disabled){return}this.holder.events.onUp.dispatch(this.direction,this.distance,this.angle)}this.update=function(){if(this.isBeingDragged){var k=this.dragger.position;var h=this.pin.position;var i=new Phaser.Point(0,0);var l=this.pinAngle=i.angle(k);var m=this.distance=k.getMagnitude();var g=Phaser.Point.normalize;var j=g(k,this.direction);h.copyFrom(k);if(m>80){h.setMagnitude(80)}if(this.disabled){return}this.holder.events.onMove.dispatch(j,m,l)}}};DudeVolley.MainMenu=function(a){this.background=null;this.preloadBar=null;this.ready=false;this.UN_JUGADOR=0;this.DOS_JUGADORES=1;this.JUGAR_ONLINE=2;this.ENTRENAMIENTO=3;this.MEJORES_PUNTUACIONES=4;this.CREDITOS=5};DudeVolley.MainMenu.prototype={create:function(){ga("send","pageview","/MainMenu");var a=this.cache.getImage("titulo_estirado");this.titulo_estirado=this.add.sprite(this.world.centerX-a.width/2,20,"titulo_estirado");this.menu_principal=this.add.sprite(this.world.centerX,300,"menu_principal");this.menu_principal.anchor.setTo(0.5,0.5);this.menu_principal.frame=0;this.cursors=this.input.keyboard.createCursorKeys();L=this.input.keyboard.addKey(Phaser.Keyboard.L);Z=this.input.keyboard.addKey(Phaser.Keyboard.Z);ENTER=this.input.keyboard.addKey(Phaser.Keyboard.ENTER);this.cambia_menu=this.time.now+200;this.notocas=this.time.now+10000;this.game.best_player_got=false},get_creditos:function(){if(this.game.creditos_got){return}this.menu_principal.visible=false;this.game.creditos_got=true;eljuego=this;$("#contiene_creditos").show()},cierra_creditos:function(){this.game.creditos_got=false;$("#contiene_creditos").hide();eljuego.menu_principal.visible=true},get_best_players:function(a){if(this.game.best_player_got){return}this.game.best_player_got=true;eljuego=this;$.ajax({url:"best_players.php",type:"GET",contentType:false,cache:false,processData:false,success:function(b){$("#mandapuntos").hide();$("#contiene_mandapuntos").show();$("#contiene_clasificacion").html("<dl id='titulo_nivel'></dl>");acho=JSON.parse(b);$.each(acho,function(){var c=Number(this.tiempo);var f=Math.floor(c/1000);var d=Math.floor(f/60);var f=f-(d*60);if(f<10){f="0"+f}var e=d+":"+f;$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<dl><dt>"+this.nombre+"</dt><dd>"+this.puntuacion+"("+e+")</dd></dl>")});$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<div style='text-align:center;'><input id='volver_menu' onclick='eljuego.cierra_best();' type='submit' value='volver' /></div>");eljuego.menu_principal.visible=false;$("#contiene_mandapuntos").css("top","120px")}})},cierra_best:function(){this.game.best_player_got=false;$("#contiene_mandapuntos").slideDown();$("#contiene_clasificacion").html("");$("#contiene_mandapuntos").css("top","4vw");this.menu_principal.visible=true},update:function(){if(this.time.now>this.notocas){this.state.start("Demo")}var a=this;$(document).keyup(function(b){a.notocas=a.time.now+10000});if((this.cursors.down.isDown||this.mueveabajo)&&this.cambia_menu<this.time.now){this.mueveabajo=false;this.cambia_menu=this.time.now+200;if(this.menu_principal.frame<5){this.menu_principal.frame++}else{this.menu_principal.frame=0}}if((this.cursors.up.isDown||this.muevearriba)&&this.cambia_menu<this.time.now){this.muevearriba=false;this.cambia_menu=this.time.now+200;if(this.menu_principal.frame==0){this.menu_principal.frame=5}else{this.menu_principal.frame--}}if(L.isDown||Z.isDown||ENTER.isDown){this.empieza()}},empieza:function(){switch(this.menu_principal.frame){case this.UN_JUGADOR:this.state.start("Menu1Player");break;case this.DOS_JUGADORES:this.state.start("GameTwoPlayer");break;case this.JUGAR_ONLINE:this.state.start("GameMultiplayer");break;case this.ENTRENAMIENTO:this.state.start("Entrenamiento");break;case this.MEJORES_PUNTUACIONES:this.get_best_players();break;case this.CREDITOS:this.get_creditos();break}}};DudeVolley.MovilMainMenu=function(a){this.background=null;this.preloadBar=null;this.ready=false;this.UN_JUGADOR=0;this.JUGAR_ONLINE=1;this.ENTRENAMIENTO=2;this.MEJORES_PUNTUACIONES=3;this.CREDITOS=4};DudeVolley.MovilMainMenu.prototype={create:function(){ga("send","pageview","/MovilMainMenu");var a=this.cache.getImage("titulo_estirado");this.titulo_estirado=this.add.sprite(this.world.centerX-a.width/2,20,"titulo_estirado");this.menu_principal=this.add.sprite(this.world.centerX,300,"menu_principal");this.menu_principal.anchor.setTo(0.5,0.5);this.menu_principal.frame=0;this.cambia_menu=this.time.now+200;this.notocas=this.time.now+10000;this.game.best_player_got=false;this.movil_jugar=this.add.sprite(this.world.centerX,this.world.height-100,"seleccionar");this.movil_jugar.anchor.setTo(0.5,0.5);this.movil_jugar.inputEnabled=true;this.movil_jugar.input.sprite.events.onInputDown.add(this.empieza,this)},get_creditos:function(){if(this.game.creditos_got){return}this.menu_principal.visible=false;this.movil_jugar.visible=false;this.game.creditos_got=true;eljuego=this;$("#contiene_creditos").show()},cierra_creditos:function(){this.game.creditos_got=false;$("#contiene_creditos").hide();this.menu_principal.visible=true;this.movil_jugar.visible=true},get_best_players:function(a){if(this.game.best_player_got){return}this.game.best_player_got=true;self=this;$.ajax({url:"best_players.php",type:"GET",contentType:false,cache:false,processData:false,success:function(b){$("#mandapuntos").hide();$("#contiene_mandapuntos").show();$("#contiene_clasificacion").html("<dl id='titulo_nivel'></dl>");acho=JSON.parse(b);$.each(acho,function(){var c=Number(this.tiempo);var f=Math.floor(c/1000);var d=Math.floor(f/60);var f=f-(d*60);if(f<10){f="0"+f}var e=d+":"+f;$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<dl><dt>"+this.nombre+"</dt><dd>"+this.puntuacion+"("+e+")</dd></dl>")});$("#contiene_clasificacion").html($("#contiene_clasificacion").html()+"<div style='text-align:center;'><input id='volver_menu' onclick='self.cierra_best();' type='submit' value='volver' /></div>");self.menu_principal.visible=false;self.movil_jugar.visible=false;$("#contiene_mandapuntos").css("top","120px")}})},cierra_best:function(){this.game.best_player_got=false;$("#contiene_mandapuntos").slideDown();$("#contiene_clasificacion").html("");$("#contiene_mandapuntos").css("top","4vw");this.menu_principal.visible=true;this.movil_jugar.visible=true},beginSwipe:function(){this.notocas=this.time.now+10000;startX=this.game.input.worldX;startY=this.game.input.worldY;this.game.input.onDown.remove(this.beginSwipe);this.game.input.onUp.add(this.endSwipe,this)},endSwipe:function(){endX=this.game.input.worldX;endY=this.game.input.worldY;var b=startX-endX;var a=startY-endY;if(Math.abs(a)>60){if(a>0){this.mueveabajo=true}else{this.muevearriba=true}}this.game.input.onDown.add(this.beginSwipe);this.game.input.onUp.remove(this.endSwipe)},update:function(){this.game.input.onDown.add(this.beginSwipe,this);var a=this;document.addEventListener("touchend",function(b){a.notocas=a.time.now+10000},false);if(this.time.now>this.notocas){this.state.start("Demo")}if(this.mueveabajo&&this.cambia_menu<this.time.now){this.mueveabajo=false;this.cambia_menu=this.time.now+200;if(this.menu_principal.frame<4){this.menu_principal.frame++}else{this.menu_principal.frame=0}}if(this.muevearriba&&this.cambia_menu<this.time.now){this.muevearriba=false;this.cambia_menu=this.time.now+200;if(this.menu_principal.frame==0){this.menu_principal.frame=4}else{this.menu_principal.frame--}}},empieza:function(){switch(this.menu_principal.frame){case this.UN_JUGADOR:this.state.start("Menu1Player");break;case this.JUGAR_ONLINE:this.state.start("GameMultiplayer");break;case this.ENTRENAMIENTO:this.state.start("Entrenamiento");break;case this.MEJORES_PUNTUACIONES:this.get_best_players();break;case this.CREDITOS:this.get_creditos();break}}};DudeVolley.Preloader=function(a){this.background=null;this.preloadBar=null;this.ready=false};DudeVolley.Preloader.prototype={preload:function(){var a=this.cache.getImage("titulo");this.background=this.add.sprite(this.world.centerX-a.width/2,120,"titulo");this.preloadBar=this.add.sprite(240,400,"preloaderBar");this.load.setPreloadSprite(this.preloadBar);this.load.spritesheet("menu_1player","assets/menu_1player.png",400,270);this.load.image("titulo_estirado","assets/dude_volley.png");this.load.image("sky","assets/new_campo2.png");this.load.image("ground","assets/platform2.png");this.load.image("red","assets/new_red.png");this.load.image("pelota","assets/new_pelota.png");this.load.image("sombra","assets/sombra.png");this.load.image("explota","assets/explota.png");this.load.image("game_over_back","assets/game_over_back.png");this.load.image("volver_a_jugar","assets/volver_a_jugar.png");this.load.image("seleccionar","assets/seleccionar.png");this.load.spritesheet("player1","assets/default_player.png",80,110);this.load.spritesheet("cpu","cpu_player/cpu_player.png",80,110);this.load.image("volver","assets/volver.png");this.load.image("tip1","assets/muevete.png");this.load.image("tip2","assets/salta_arriba.png");this.load.image("tip3","assets/gorrino.png");this.load.image("tip4","assets/mate.png");if(this.game.device.desktop){this.load.spritesheet("menu_principal","assets/menu_sprite.png",400,400)}else{this.load.spritesheet("menu_principal","assets/menu_sprite_movil.png",400,400);this.load.image("joy_back","assets/joy_back2.png");this.load.image("joy_front","assets/joy_front.png");this.load.image("pika","assets/pika.png")}},create:function(){this.preloadBar.cropEnabled=false;this.ready=true;if(this.game.device.desktop){this.state.start("MainMenu")}else{this.state.start("MovilMainMenu")}},update:function(){}};